import{r as Qt,s as Fi,g as Gc,R as qt}from"./react-vendor-Byl6S4M9.js";const Dc=Math.PI/180;function Fc(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const wn=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},b={_global:wn,version:"10.0.4",isBrowser:Fc(),isUnminified:/param/.test(function(o){}.toString()),dblClickWindow:400,getAngle(o){return b.angleDeg?o*Dc:o},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return b.DD.isDragging},isTransforming(){var o,t;return(t=(o=b.Transformer)===null||o===void 0?void 0:o.isTransforming())!==null&&t!==void 0?t:!1},isDragReady(){return!!b.DD.node},releaseCanvasOnDestroy:!0,document:wn.document,_injectGlobal(o){typeof wn.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),wn.Konva=o}},Rt=o=>{b[o.prototype.getClassName()]=o};b._injectGlobal(b);const zc=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,El=()=>{if(typeof document>"u")throw new Error(zc)};class ae{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new ae(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){const r=this.m;return{x:r[0]*t.x+r[2]*t.y+r[4],y:r[1]*t.x+r[3]*t.y+r[5]}}translate(t,r){return this.m[4]+=this.m[0]*t+this.m[2]*r,this.m[5]+=this.m[1]*t+this.m[3]*r,this}scale(t,r){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=r,this.m[3]*=r,this}rotate(t){const r=Math.cos(t),i=Math.sin(t),a=this.m[0]*r+this.m[2]*i,h=this.m[1]*r+this.m[3]*i,l=this.m[0]*-i+this.m[2]*r,d=this.m[1]*-i+this.m[3]*r;return this.m[0]=a,this.m[1]=h,this.m[2]=l,this.m[3]=d,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,r){const i=this.m[0]+this.m[2]*r,a=this.m[1]+this.m[3]*r,h=this.m[2]+this.m[0]*t,l=this.m[3]+this.m[1]*t;return this.m[0]=i,this.m[1]=a,this.m[2]=h,this.m[3]=l,this}multiply(t){const r=this.m[0]*t.m[0]+this.m[2]*t.m[1],i=this.m[1]*t.m[0]+this.m[3]*t.m[1],a=this.m[0]*t.m[2]+this.m[2]*t.m[3],h=this.m[1]*t.m[2]+this.m[3]*t.m[3],l=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],d=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=r,this.m[1]=i,this.m[2]=a,this.m[3]=h,this.m[4]=l,this.m[5]=d,this}invert(){const t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),r=this.m[3]*t,i=-this.m[1]*t,a=-this.m[2]*t,h=this.m[0]*t,l=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),d=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=r,this.m[1]=i,this.m[2]=a,this.m[3]=h,this.m[4]=l,this.m[5]=d,this}getMatrix(){return this.m}decompose(){const t=this.m[0],r=this.m[1],i=this.m[2],a=this.m[3],h=this.m[4],l=this.m[5],d=t*a-r*i,f={x:h,y:l,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(t!=0||r!=0){const p=Math.sqrt(t*t+r*r);f.rotation=r>0?Math.acos(t/p):-Math.acos(t/p),f.scaleX=p,f.scaleY=d/p,f.skewX=(t*i+r*a)/d,f.skewY=0}else if(i!=0||a!=0){const p=Math.sqrt(i*i+a*a);f.rotation=Math.PI/2-(a>0?Math.acos(-i/p):-Math.acos(i/p)),f.scaleX=d/p,f.scaleY=p,f.skewX=0,f.skewY=(t*i+r*a)/d}return f.rotation=P._getRotation(f.rotation),f}}const bc="[object Array]",Bc="[object Number]",Hc="[object String]",Wc="[object Boolean]",Uc=Math.PI/180,Yc=180/Math.PI,oa="#",Xc="",jc="0",Vc="Konva warning: ",Tl="Konva error: ",qc="rgb(",la={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},Qc=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let Ei=[];const Kc=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(o){setTimeout(o,60)},P={_isElement(o){return!!(o&&o.nodeType==1)},_isFunction(o){return!!(o&&o.constructor&&o.call&&o.apply)},_isPlainObject(o){return!!o&&o.constructor===Object},_isArray(o){return Object.prototype.toString.call(o)===bc},_isNumber(o){return Object.prototype.toString.call(o)===Bc&&!isNaN(o)&&isFinite(o)},_isString(o){return Object.prototype.toString.call(o)===Hc},_isBoolean(o){return Object.prototype.toString.call(o)===Wc},isObject(o){return o instanceof Object},isValidSelector(o){if(typeof o!="string")return!1;const t=o[0];return t==="#"||t==="."||t===t.toUpperCase()},_sign(o){return o===0||o>0?1:-1},requestAnimFrame(o){Ei.push(o),Ei.length===1&&Kc(function(){const t=Ei;Ei=[],t.forEach(function(r){r()})})},createCanvasElement(){El();const o=document.createElement("canvas");try{o.style=o.style||{}}catch{}return o},createImageElement(){return El(),document.createElement("img")},_isInDocument(o){for(;o=o.parentNode;)if(o==document)return!0;return!1},_urlToImage(o,t){const r=P.createImageElement();r.onload=function(){t(r)},r.src=o},_rgbToHex(o,t,r){return((1<<24)+(o<<16)+(t<<8)+r).toString(16).slice(1)},_hexToRgb(o){o=o.replace(oa,Xc);const t=parseInt(o,16);return{r:t>>16&255,g:t>>8&255,b:t&255}},getRandomColor(){let o=(Math.random()*16777215<<0).toString(16);for(;o.length<6;)o=jc+o;return oa+o},getRGB(o){let t;return o in la?(t=la[o],{r:t[0],g:t[1],b:t[2]}):o[0]===oa?this._hexToRgb(o.substring(1)):o.substr(0,4)===qc?(t=Qc.exec(o.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA(o){return o=o||"black",P._namedColorToRBA(o)||P._hex3ColorToRGBA(o)||P._hex4ColorToRGBA(o)||P._hex6ColorToRGBA(o)||P._hex8ColorToRGBA(o)||P._rgbColorToRGBA(o)||P._rgbaColorToRGBA(o)||P._hslColorToRGBA(o)},_namedColorToRBA(o){const t=la[o.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(o){if(o.indexOf("rgb(")===0){o=o.match(/rgb\(([^)]+)\)/)[1];const t=o.split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(o){if(o.indexOf("rgba(")===0){o=o.match(/rgba\(([^)]+)\)/)[1];const t=o.split(/ *, */).map((r,i)=>r.slice(-1)==="%"?i===3?parseInt(r)/100:parseInt(r)/100*255:Number(r));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex8ColorToRGBA(o){if(o[0]==="#"&&o.length===9)return{r:parseInt(o.slice(1,3),16),g:parseInt(o.slice(3,5),16),b:parseInt(o.slice(5,7),16),a:parseInt(o.slice(7,9),16)/255}},_hex6ColorToRGBA(o){if(o[0]==="#"&&o.length===7)return{r:parseInt(o.slice(1,3),16),g:parseInt(o.slice(3,5),16),b:parseInt(o.slice(5,7),16),a:1}},_hex4ColorToRGBA(o){if(o[0]==="#"&&o.length===5)return{r:parseInt(o[1]+o[1],16),g:parseInt(o[2]+o[2],16),b:parseInt(o[3]+o[3],16),a:parseInt(o[4]+o[4],16)/255}},_hex3ColorToRGBA(o){if(o[0]==="#"&&o.length===4)return{r:parseInt(o[1]+o[1],16),g:parseInt(o[2]+o[2],16),b:parseInt(o[3]+o[3],16),a:1}},_hslColorToRGBA(o){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(o)){const[t,...r]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(o),i=Number(r[0])/360,a=Number(r[1])/100,h=Number(r[2])/100;let l,d,f;if(a===0)return f=h*255,{r:Math.round(f),g:Math.round(f),b:Math.round(f),a:1};h<.5?l=h*(1+a):l=h+a-h*a;const p=2*h-l,m=[0,0,0];for(let _=0;_<3;_++)d=i+1/3*-(_-1),d<0&&d++,d>1&&d--,6*d<1?f=p+(l-p)*6*d:2*d<1?f=l:3*d<2?f=p+(l-p)*(2/3-d)*6:f=p,m[_]=f*255;return{r:Math.round(m[0]),g:Math.round(m[1]),b:Math.round(m[2]),a:1}}},haveIntersection(o,t){return!(t.x>o.x+o.width||t.x+t.width<o.x||t.y>o.y+o.height||t.y+t.height<o.y)},cloneObject(o){const t={};for(const r in o)this._isPlainObject(o[r])?t[r]=this.cloneObject(o[r]):this._isArray(o[r])?t[r]=this.cloneArray(o[r]):t[r]=o[r];return t},cloneArray(o){return o.slice(0)},degToRad(o){return o*Uc},radToDeg(o){return o*Yc},_degToRad(o){return P.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),P.degToRad(o)},_radToDeg(o){return P.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),P.radToDeg(o)},_getRotation(o){return b.angleDeg?P.radToDeg(o):o},_capitalize(o){return o.charAt(0).toUpperCase()+o.slice(1)},throw(o){throw new Error(Tl+o)},error(o){console.error(Tl+o)},warn(o){b.showWarnings&&console.warn(Vc+o)},each(o,t){for(const r in o)t(r,o[r])},_inRange(o,t,r){return t<=o&&o<r},_getProjectionToSegment(o,t,r,i,a,h){let l,d,f;const p=(o-r)*(o-r)+(t-i)*(t-i);if(p==0)l=o,d=t,f=(a-r)*(a-r)+(h-i)*(h-i);else{const m=((a-o)*(r-o)+(h-t)*(i-t))/p;m<0?(l=o,d=t,f=(o-a)*(o-a)+(t-h)*(t-h)):m>1?(l=r,d=i,f=(r-a)*(r-a)+(i-h)*(i-h)):(l=o+m*(r-o),d=t+m*(i-t),f=(l-a)*(l-a)+(d-h)*(d-h))}return[l,d,f]},_getProjectionToLine(o,t,r){const i=P.cloneObject(o);let a=Number.MAX_VALUE;return t.forEach(function(h,l){if(!r&&l===t.length-1)return;const d=t[(l+1)%t.length],f=P._getProjectionToSegment(h.x,h.y,d.x,d.y,o.x,o.y),p=f[0],m=f[1],_=f[2];_<a&&(i.x=p,i.y=m,a=_)}),i},_prepareArrayForTween(o,t,r){const i=[],a=[];if(o.length>t.length){const l=t;t=o,o=l}for(let l=0;l<o.length;l+=2)i.push({x:o[l],y:o[l+1]});for(let l=0;l<t.length;l+=2)a.push({x:t[l],y:t[l+1]});const h=[];return a.forEach(function(l){const d=P._getProjectionToLine(l,i,r);h.push(d.x),h.push(d.y)}),h},_prepareToStringify(o){let t;o.visitedByCircularReferenceRemoval=!0;for(const r in o)if(o.hasOwnProperty(r)&&o[r]&&typeof o[r]=="object"){if(t=Object.getOwnPropertyDescriptor(o,r),o[r].visitedByCircularReferenceRemoval||P._isElement(o[r]))if(t.configurable)delete o[r];else return null;else if(P._prepareToStringify(o[r])===null)if(t.configurable)delete o[r];else return null}return delete o.visitedByCircularReferenceRemoval,o},_assign(o,t){for(const r in t)o[r]=t[r];return o},_getFirstPointerId(o){return o.touches?o.changedTouches[0].identifier:o.pointerId||999},releaseCanvas(...o){b.releaseCanvasOnDestroy&&o.forEach(t=>{t.width=0,t.height=0})},drawRoundedRectPath(o,t,r,i){let a=t<0?t:0,h=r<0?r:0;t=Math.abs(t),r=Math.abs(r);let l=0,d=0,f=0,p=0;typeof i=="number"?l=d=f=p=Math.min(i,t/2,r/2):(l=Math.min(i[0]||0,t/2,r/2),d=Math.min(i[1]||0,t/2,r/2),p=Math.min(i[2]||0,t/2,r/2),f=Math.min(i[3]||0,t/2,r/2)),o.moveTo(a+l,h),o.lineTo(a+t-d,h),o.arc(a+t-d,h+d,d,Math.PI*3/2,0,!1),o.lineTo(a+t,h+r-p),o.arc(a+t-p,h+r-p,p,0,Math.PI/2,!1),o.lineTo(a+f,h+r),o.arc(a+f,h+r-f,f,Math.PI/2,Math.PI,!1),o.lineTo(a,h+l),o.arc(a+l,h+l,l,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(o,t,r,i,a){i=Math.abs(i);for(let h=0;h<r;h++){const l=t[(h-1+r)%r],d=t[h],f=t[(h+1)%r],p={x:d.x-l.x,y:d.y-l.y},m={x:f.x-d.x,y:f.y-d.y},_=Math.hypot(p.x,p.y),v=Math.hypot(m.x,m.y);let w;typeof a=="number"?w=a:w=h<a.length?a[h]:0,w=i*Math.cos(Math.PI/r)*Math.min(1,w/i*2);const M={x:p.x/_,y:p.y/_},A={x:m.x/v,y:m.y/v},L={x:d.x-M.x*w,y:d.y-M.y*w},R={x:d.x+A.x*w,y:d.y+A.y*w};h===0?o.moveTo(L.x,L.y):o.lineTo(L.x,L.y),o.arcTo(d.x,d.y,R.x,R.y,w)}}};function Jc(o){const t=[],r=o.length,i=P;for(let a=0;a<r;a++){let h=o[a];i._isNumber(h)?h=Math.round(h*1e3)/1e3:i._isString(h)||(h=h+""),t.push(h)}return t}const Rl=",",Zc="(",$c=")",td="([",ed="])",nd=";",rd="()",id="=",Al=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],sd=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],ad=100;let Ti=null;function Ml(){if(Ti!==null)return Ti;try{const t=P.createCanvasElement().getContext("2d");return t?!!t&&"filter"in t:(Ti=!1,!1)}catch{return Ti=!1,!1}}class Hi{constructor(t){this.canvas=t,b.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,r){let i=this.traceArr,a=i.length,h="",l,d,f,p;for(l=0;l<a;l++)d=i[l],f=d.method,f?(p=d.args,h+=f,t?h+=rd:P._isArray(p[0])?h+=td+p.join(Rl)+ed:(r&&(p=p.map(m=>typeof m=="number"?Math.floor(m):m)),h+=Zc+p.join(Rl)+$c)):(h+=d.property,t||(h+=id+d.val)),h+=nd;return h}clearTrace(){this.traceArr=[]}_trace(t){let r=this.traceArr,i;r.push(t),i=r.length,i>=ad&&r.shift()}reset(){const t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){const r=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,r.getWidth()/r.pixelRatio,r.getHeight()/r.pixelRatio)}_applyLineCap(t){const r=t.attrs.lineCap;r&&this.setAttr("lineCap",r)}_applyOpacity(t){const r=t.getAbsoluteOpacity();r!==1&&this.setAttr("globalAlpha",r)}_applyLineJoin(t){const r=t.attrs.lineJoin;r&&this.setAttr("lineJoin",r)}_applyMiterLimit(t){const r=t.attrs.miterLimit;r!=null&&this.setAttr("miterLimit",r)}setAttr(t,r){this._context[t]=r}arc(t,r,i,a,h,l){this._context.arc(t,r,i,a,h,l)}arcTo(t,r,i,a,h){this._context.arcTo(t,r,i,a,h)}beginPath(){this._context.beginPath()}bezierCurveTo(t,r,i,a,h,l){this._context.bezierCurveTo(t,r,i,a,h,l)}clearRect(t,r,i,a){this._context.clearRect(t,r,i,a)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,r){const i=arguments;if(i.length===2)return this._context.createImageData(t,r);if(i.length===1)return this._context.createImageData(t)}createLinearGradient(t,r,i,a){return this._context.createLinearGradient(t,r,i,a)}createPattern(t,r){return this._context.createPattern(t,r)}createRadialGradient(t,r,i,a,h,l){return this._context.createRadialGradient(t,r,i,a,h,l)}drawImage(t,r,i,a,h,l,d,f,p){const m=arguments,_=this._context;m.length===3?_.drawImage(t,r,i):m.length===5?_.drawImage(t,r,i,a,h):m.length===9&&_.drawImage(t,r,i,a,h,l,d,f,p)}ellipse(t,r,i,a,h,l,d,f){this._context.ellipse(t,r,i,a,h,l,d,f)}isPointInPath(t,r,i,a){return i?this._context.isPointInPath(i,t,r,a):this._context.isPointInPath(t,r,a)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,r,i,a){this._context.fillRect(t,r,i,a)}strokeRect(t,r,i,a){this._context.strokeRect(t,r,i,a)}fillText(t,r,i,a){a?this._context.fillText(t,r,i,a):this._context.fillText(t,r,i)}measureText(t){return this._context.measureText(t)}getImageData(t,r,i,a){return this._context.getImageData(t,r,i,a)}lineTo(t,r){this._context.lineTo(t,r)}moveTo(t,r){this._context.moveTo(t,r)}rect(t,r,i,a){this._context.rect(t,r,i,a)}roundRect(t,r,i,a,h){this._context.roundRect(t,r,i,a,h)}putImageData(t,r,i){this._context.putImageData(t,r,i)}quadraticCurveTo(t,r,i,a){this._context.quadraticCurveTo(t,r,i,a)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,r){this._context.scale(t,r)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,r,i,a,h,l){this._context.setTransform(t,r,i,a,h,l)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,r,i,a){this._context.strokeText(t,r,i,a)}transform(t,r,i,a,h,l){this._context.transform(t,r,i,a,h,l)}translate(t,r){this._context.translate(t,r)}_enableTrace(){let t=this,r=Al.length,i=this.setAttr,a,h;const l=function(d){let f=t[d],p;t[d]=function(){return h=Jc(Array.prototype.slice.call(arguments,0)),p=f.apply(t,arguments),t._trace({method:d,args:h}),p}};for(a=0;a<r;a++)l(Al[a]);t.setAttr=function(){i.apply(t,arguments);const d=arguments[0];let f=arguments[1];(d==="shadowOffsetX"||d==="shadowOffsetY"||d==="shadowBlur")&&(f=f/this.canvas.getPixelRatio()),t._trace({property:d,val:f})}}_applyGlobalCompositeOperation(t){const r=t.attrs.globalCompositeOperation;!r||r==="source-over"||this.setAttr("globalCompositeOperation",r)}}sd.forEach(function(o){Object.defineProperty(Hi.prototype,o,{get(){return this._context[o]},set(t){this._context[o]=t}})});class od extends Hi{constructor(t,{willReadFrequently:r=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:r})}_fillColor(t){const r=t.fill();this.setAttr("fillStyle",r),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){const r=t._getLinearGradient();r&&(this.setAttr("fillStyle",r),t._fillFunc(this))}_fillRadialGradient(t){const r=t._getRadialGradient();r&&(this.setAttr("fillStyle",r),t._fillFunc(this))}_fill(t){const r=t.fill(),i=t.getFillPriority();if(r&&i==="color"){this._fillColor(t);return}const a=t.getFillPatternImage();if(a&&i==="pattern"){this._fillPattern(t);return}const h=t.getFillLinearGradientColorStops();if(h&&i==="linear-gradient"){this._fillLinearGradient(t);return}const l=t.getFillRadialGradientColorStops();if(l&&i==="radial-gradient"){this._fillRadialGradient(t);return}r?this._fillColor(t):a?this._fillPattern(t):h?this._fillLinearGradient(t):l&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const r=t.getStrokeLinearGradientStartPoint(),i=t.getStrokeLinearGradientEndPoint(),a=t.getStrokeLinearGradientColorStops(),h=this.createLinearGradient(r.x,r.y,i.x,i.y);if(a){for(let l=0;l<a.length;l+=2)h.addColorStop(a[l],a[l+1]);this.setAttr("strokeStyle",h)}}_stroke(t){const r=t.dash(),i=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!i){this.save();const h=this.getCanvas().getPixelRatio();this.setTransform(h,0,0,h,0,0)}this._applyLineCap(t),r&&t.dashEnabled()&&(this.setLineDash(r),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),i||this.restore()}}_applyShadow(t){var r,i,a;const h=(r=t.getShadowRGBA())!==null&&r!==void 0?r:"black",l=(i=t.getShadowBlur())!==null&&i!==void 0?i:5,d=(a=t.getShadowOffset())!==null&&a!==void 0?a:{x:0,y:0},f=t.getAbsoluteScale(),p=this.canvas.getPixelRatio(),m=f.x*p,_=f.y*p;this.setAttr("shadowColor",h),this.setAttr("shadowBlur",l*Math.min(Math.abs(m),Math.abs(_))),this.setAttr("shadowOffsetX",d.x*m),this.setAttr("shadowOffsetY",d.y*_)}}class ld extends Hi{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const r=t.getStrokeScaleEnabled();if(!r){this.save();const h=this.getCanvas().getPixelRatio();this.setTransform(h,0,0,h,0,0)}this._applyLineCap(t);const i=t.hitStrokeWidth(),a=i==="auto"?t.strokeWidth():i;this.setAttr("lineWidth",a),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),r||this.restore()}}}let Ri;function hd(){if(Ri)return Ri;const o=P.createCanvasElement(),t=o.getContext("2d");return Ri=function(){const r=b._global.devicePixelRatio||1,i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return r/i}(),P.releaseCanvas(o),Ri}class Ta{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const i=(t||{}).pixelRatio||b.pixelRatio||hd();this.pixelRatio=i,this._canvas=P.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){const r=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/r,this.getHeight()/r)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";const r=this.pixelRatio;this.getContext()._context.scale(r,r)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";const r=this.pixelRatio;this.getContext()._context.scale(r,r)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,r){this.setWidth(t||0),this.setHeight(r||0)}toDataURL(t,r){try{return this._canvas.toDataURL(t,r)}catch{try{return this._canvas.toDataURL()}catch(a){return P.error("Unable to get data URL. "+a.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class sn extends Ta{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new od(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}function Ll(){const o=P.createCanvasElement();o.width=1,o.height=1;const t=o.getContext("2d",{willReadFrequently:!0});t.clearRect(0,0,1,1),t.fillStyle="rgba(255,0,255,1)",t.fillRect(0,0,1,1);const r=t.getImageData(0,0,1,1).data;return!(r[0]===255&&r[1]===0&&r[2]===255&&r[3]===255)}function Il(){var o,t;return typeof navigator>"u"?!1:(t=(o=navigator.brave)===null||o===void 0?void 0:o.isBrave())!==null&&t!==void 0?t:!1}let Nl=!1;function ud(){return Il()&&Ll()&&!Nl&&(Nl=!0,P.error('Looks like you have "Brave shield" enabled in your browser. It breaks KonvaJS internals. Please disable it. You may need to ask your users to do the same.')),Il()&&Ll()}class Ra extends Ta{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new ld(this),this.setSize(t.width,t.height),ud()}}const ft={get isDragging(){let o=!1;return ft._dragElements.forEach(t=>{t.dragStatus==="dragging"&&(o=!0)}),o},justDragged:!1,get node(){let o;return ft._dragElements.forEach(t=>{o=t.node}),o},_dragElements:new Map,_drag(o){const t=[];ft._dragElements.forEach((r,i)=>{const{node:a}=r,h=a.getStage();h.setPointersPositions(o),r.pointerId===void 0&&(r.pointerId=P._getFirstPointerId(o));const l=h._changedPointerPositions.find(d=>d.id===r.pointerId);if(l){if(r.dragStatus!=="dragging"){const d=a.dragDistance();if(Math.max(Math.abs(l.x-r.startPointerPos.x),Math.abs(l.y-r.startPointerPos.y))<d||(a.startDrag({evt:o}),!a.isDragging()))return}a._setDragPosition(o,r),t.push(a)}}),t.forEach(r=>{r.fire("dragmove",{type:"dragmove",target:r,evt:o},!0)})},_endDragBefore(o){const t=[];ft._dragElements.forEach(r=>{const{node:i}=r,a=i.getStage();if(o&&a.setPointersPositions(o),!a._changedPointerPositions.find(d=>d.id===r.pointerId))return;(r.dragStatus==="dragging"||r.dragStatus==="stopped")&&(ft.justDragged=!0,b._mouseListenClick=!1,b._touchListenClick=!1,b._pointerListenClick=!1,r.dragStatus="stopped");const l=r.node.getLayer()||r.node instanceof b.Stage&&r.node;l&&t.indexOf(l)===-1&&t.push(l)}),t.forEach(r=>{r.draw()})},_endDragAfter(o){ft._dragElements.forEach((t,r)=>{t.dragStatus==="stopped"&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:o},!0),t.dragStatus!=="dragging"&&ft._dragElements.delete(r)})}};b.isBrowser&&(window.addEventListener("mouseup",ft._endDragBefore,!0),window.addEventListener("touchend",ft._endDragBefore,!0),window.addEventListener("touchcancel",ft._endDragBefore,!0),window.addEventListener("mousemove",ft._drag),window.addEventListener("touchmove",ft._drag),window.addEventListener("mouseup",ft._endDragAfter,!1),window.addEventListener("touchend",ft._endDragAfter,!1),window.addEventListener("touchcancel",ft._endDragAfter,!1));function an(o){return P._isString(o)?'"'+o+'"':Object.prototype.toString.call(o)==="[object Number]"||P._isBoolean(o)?o:Object.prototype.toString.call(o)}function hh(o){return o>255?255:o<0?0:Math.round(o)}function z(){if(b.isUnminified)return function(o,t){return P._isNumber(o)||P.warn(an(o)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),o}}function Wi(o){if(b.isUnminified)return function(t,r){let i=P._isNumber(t),a=P._isArray(t)&&t.length==o;return!i&&!a&&P.warn(an(t)+' is a not valid value for "'+r+'" attribute. The value should be a number or Array<number>('+o+")"),t}}function Aa(){if(b.isUnminified)return function(o,t){return P._isNumber(o)||o==="auto"||P.warn(an(o)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),o}}function Pn(){if(b.isUnminified)return function(o,t){return P._isString(o)||P.warn(an(o)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),o}}function uh(){if(b.isUnminified)return function(o,t){const r=P._isString(o),i=Object.prototype.toString.call(o)==="[object CanvasGradient]"||o&&o.addColorStop;return r||i||P.warn(an(o)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),o}}function cd(){if(b.isUnminified)return function(o,t){const r=Int8Array?Object.getPrototypeOf(Int8Array):null;return r&&o instanceof r||(P._isArray(o)?o.forEach(function(i){P._isNumber(i)||P.warn('"'+t+'" attribute has non numeric element '+i+". Make sure that all elements are numbers.")}):P.warn(an(o)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),o}}function Pe(){if(b.isUnminified)return function(o,t){return o===!0||o===!1||P.warn(an(o)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),o}}function dd(o){if(b.isUnminified)return function(t,r){return t==null||P.isObject(t)||P.warn(an(t)+' is a not valid value for "'+r+'" attribute. The value should be an object with properties '+o),t}}const yr="get",vr="set",S={addGetterSetter(o,t,r,i,a){S.addGetter(o,t,r),S.addSetter(o,t,i,a),S.addOverloadedGetterSetter(o,t)},addGetter(o,t,r){const i=yr+P._capitalize(t);o.prototype[i]=o.prototype[i]||function(){const a=this.attrs[t];return a===void 0?r:a}},addSetter(o,t,r,i){const a=vr+P._capitalize(t);o.prototype[a]||S.overWriteSetter(o,t,r,i)},overWriteSetter(o,t,r,i){const a=vr+P._capitalize(t);o.prototype[a]=function(h){return r&&h!==void 0&&h!==null&&(h=r.call(this,h,t)),this._setAttr(t,h),i&&i.call(this),this}},addComponentsGetterSetter(o,t,r,i,a){const h=r.length,l=P._capitalize,d=yr+l(t),f=vr+l(t);o.prototype[d]=function(){const m={};for(let _=0;_<h;_++){const v=r[_];m[v]=this.getAttr(t+l(v))}return m};const p=dd(r);o.prototype[f]=function(m){const _=this.attrs[t];i&&(m=i.call(this,m,t)),p&&p.call(this,m,t);for(const v in m)m.hasOwnProperty(v)&&this._setAttr(t+l(v),m[v]);return m||r.forEach(v=>{this._setAttr(t+l(v),void 0)}),this._fireChangeEvent(t,_,m),a&&a.call(this),this},S.addOverloadedGetterSetter(o,t)},addOverloadedGetterSetter(o,t){const r=P._capitalize(t),i=vr+r,a=yr+r;o.prototype[t]=function(){return arguments.length?(this[i](arguments[0]),this):this[a]()}},addDeprecatedGetterSetter(o,t,r,i){P.error("Adding deprecated "+t);const a=yr+P._capitalize(t),h=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";o.prototype[a]=function(){P.error(h);const l=this.attrs[t];return l===void 0?r:l},S.addSetter(o,t,i,function(){P.error(h)}),S.addOverloadedGetterSetter(o,t)},backCompat(o,t){P.each(t,function(r,i){const a=o.prototype[i],h=yr+P._capitalize(r),l=vr+P._capitalize(r);function d(){a.apply(this,arguments),P.error('"'+r+'" method is deprecated and will be removed soon. Use ""'+i+'" instead.')}o.prototype[r]=d,o.prototype[h]=d,o.prototype[l]=d})},afterSetFilter(){this._filterUpToDate=!1}};function fd(o){const t=/(\w+)\(([^)]+)\)/g;let r;for(;(r=t.exec(o))!==null;){const[,i,a]=r;switch(i){case"blur":{const h=parseFloat(a.replace("px",""));return function(l){this.blurRadius(h*.5);const d=b.Filters;d&&d.Blur&&d.Blur.call(this,l)}}case"brightness":{const h=a.includes("%")?parseFloat(a)/100:parseFloat(a);return function(l){this.brightness(h);const d=b.Filters;d&&d.Brightness&&d.Brightness.call(this,l)}}case"contrast":{const h=parseFloat(a);return function(l){const d=100*(Math.sqrt(h)-1);this.contrast(d);const f=b.Filters;f&&f.Contrast&&f.Contrast.call(this,l)}}case"grayscale":return function(h){const l=b.Filters;l&&l.Grayscale&&l.Grayscale.call(this,h)};case"sepia":return function(h){const l=b.Filters;l&&l.Sepia&&l.Sepia.call(this,h)};case"invert":return function(h){const l=b.Filters;l&&l.Invert&&l.Invert.call(this,h)};default:P.warn(`CSS filter "${i}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const zi="absoluteOpacity",Ai="allEventListeners",We="absoluteTransform",Ol="absoluteScale",xn="canvas",gd="Change",pd="children",md="konva",ma="listening",yd="mouseenter",vd="mouseleave",_d="pointerenter",Sd="pointerleave",xd="touchenter",wd="touchleave",Gl="set",Dl="Shape",bi=" ",Fl="stage",nn="transform",Cd="Stage",ya="visible",Pd=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(bi);let kd=1;class F{constructor(t){this._id=kd++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===nn||t===We)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,r){let i=this._cache.get(t);return(i===void 0||(t===nn||t===We)&&i.dirty===!0)&&(i=r.call(this),this._cache.set(t,i)),i}_calculate(t,r,i){if(!this._attachedDepsListeners.get(t)){const a=r.map(h=>h+"Change.konva").join(bi);this.on(a,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,i)}_getCanvasCache(){return this._cache.get(xn)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===We&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(xn)){const{scene:t,filter:r,hit:i,buffer:a}=this._cache.get(xn);P.releaseCanvas(t,r,i,a),this._cache.delete(xn)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){const r=t||{};let i={};(r.x===void 0||r.y===void 0||r.width===void 0||r.height===void 0)&&(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let a=Math.ceil(r.width||i.width),h=Math.ceil(r.height||i.height),l=r.pixelRatio,d=r.x===void 0?Math.floor(i.x):r.x,f=r.y===void 0?Math.floor(i.y):r.y,p=r.offset||0,m=r.drawBorder||!1,_=r.hitCanvasPixelRatio||1;if(!a||!h){P.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const v=Math.abs(Math.round(i.x)-d)>.5?1:0,w=Math.abs(Math.round(i.y)-f)>.5?1:0;a+=p*2+v,h+=p*2+w,d-=p,f-=p;const x=new sn({pixelRatio:l,width:a,height:h}),M=new sn({pixelRatio:l,width:0,height:0,willReadFrequently:!0}),A=new Ra({pixelRatio:_,width:a,height:h}),L=x.getContext(),R=A.getContext(),N=new sn({width:x.width/x.pixelRatio+Math.abs(d),height:x.height/x.pixelRatio+Math.abs(f),pixelRatio:x.pixelRatio}),O=N.getContext();return A.isCache=!0,x.isCache=!0,this._cache.delete(xn),this._filterUpToDate=!1,r.imageSmoothingEnabled===!1&&(x.getContext()._context.imageSmoothingEnabled=!1,M.getContext()._context.imageSmoothingEnabled=!1),L.save(),R.save(),O.save(),L.translate(-d,-f),R.translate(-d,-f),O.translate(-d,-f),N.x=d,N.y=f,this._isUnderCache=!0,this._clearSelfAndDescendantCache(zi),this._clearSelfAndDescendantCache(Ol),this.drawScene(x,this,N),this.drawHit(A,this),this._isUnderCache=!1,L.restore(),R.restore(),m&&(L.save(),L.beginPath(),L.rect(0,0,a,h),L.closePath(),L.setAttr("strokeStyle","red"),L.setAttr("lineWidth",5),L.stroke(),L.restore()),this._cache.set(xn,{scene:x,filter:M,hit:A,buffer:N,x:d,y:f}),this._requestDraw(),this}isCached(){return this._cache.has(xn)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,r){const i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}];let a=1/0,h=1/0,l=-1/0,d=-1/0;const f=this.getAbsoluteTransform(r);return i.forEach(function(p){const m=f.point(p);a===void 0&&(a=l=m.x,h=d=m.y),a=Math.min(a,m.x),h=Math.min(h,m.y),l=Math.max(l,m.x),d=Math.max(d,m.y)}),{x:a,y:h,width:l-a,height:d-h}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const r=this._getCanvasCache();t.translate(r.x,r.y);const i=this._getCachedSceneCanvas(),a=i.pixelRatio;t.drawImage(i._canvas,0,0,i.width/a,i.height/a),t.restore()}_drawCachedHitCanvas(t){const r=this._getCanvasCache(),i=r.hit;t.save(),t.translate(r.x,r.y),t.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),t.restore()}_getCachedSceneCanvas(){let t=this.filters(),r=this._getCanvasCache(),i=r.scene,a=r.filter,h=a.getContext(),l,d,f,p;if(!t||t.length===0)return i;if(this._filterUpToDate)return a;let m=!0;for(let v=0;v<t.length;v++)if(typeof t[v]=="string"&&Ml(),typeof t[v]!="string"||!Ml()){m=!1;break}const _=i.pixelRatio;if(a.setSize(i.width/i.pixelRatio,i.height/i.pixelRatio),m){const v=t.join(" ");return h.save(),h.setAttr("filter",v),h.drawImage(i._canvas,0,0,i.getWidth()/_,i.getHeight()/_),h.restore(),this._filterUpToDate=!0,a}try{for(l=t.length,h.clear(),h.drawImage(i._canvas,0,0,i.getWidth()/_,i.getHeight()/_),d=h.getImageData(0,0,a.getWidth(),a.getHeight()),f=0;f<l;f++)p=t[f],typeof p=="string"&&(p=fd(p)),p.call(this,d),h.putImageData(d,0,0)}catch(v){P.error("Unable to apply filter. "+v.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,a}on(t,r){if(this._cache&&this._cache.delete(Ai),arguments.length===3)return this._delegate.apply(this,arguments);const i=t.split(bi);for(let a=0;a<i.length;a++){const l=i[a].split("."),d=l[0],f=l[1]||"";this.eventListeners[d]||(this.eventListeners[d]=[]),this.eventListeners[d].push({name:f,handler:r})}return this}off(t,r){let i=(t||"").split(bi),a=i.length,h,l,d,f,p,m;if(this._cache&&this._cache.delete(Ai),!t)for(l in this.eventListeners)this._off(l);for(h=0;h<a;h++)if(d=i[h],f=d.split("."),p=f[0],m=f[1],p)this.eventListeners[p]&&this._off(p,m,r);else for(l in this.eventListeners)this._off(l,m,r);return this}dispatchEvent(t){const r={target:this,type:t.type,evt:t};return this.fire(t.type,r),this}addEventListener(t,r){return this.on(t,function(i){r.call(this,i.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,r,i){const a=this;this.on(t,function(h){const l=h.target.findAncestors(r,!0,a);for(let d=0;d<l.length;d++)h=P.cloneObject(h),h.currentTarget=l[d],i.call(l[d],h)})}remove(){return this.isDragging()&&this.stopDrag(),ft._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(We),this._clearSelfAndDescendantCache(zi),this._clearSelfAndDescendantCache(Ol),this._clearSelfAndDescendantCache(Fl),this._clearSelfAndDescendantCache(ya),this._clearSelfAndDescendantCache(ma)}_remove(){this._clearCaches();const t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){const r="get"+P._capitalize(t);return P._isFunction(this[r])?this[r]():this.attrs[t]}getAncestors(){let t=this.getParent(),r=[];for(;t;)r.push(t),t=t.getParent();return r}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{let r,i;if(!t)return this;for(r in t)r!==pd&&(i=Gl+P._capitalize(r),P._isFunction(this[i])?this[i](t[r]):this._setAttr(r,t[r]))}),this}isListening(){return this._getCache(ma,this._isListening)}_isListening(t){if(!this.listening())return!1;const i=this.getParent();return i&&i!==t&&this!==t?i._isListening(t):!0}isVisible(){return this._getCache(ya,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const i=this.getParent();return i&&i!==t&&this!==t?i._isVisible(t):!0}shouldDrawHit(t,r=!1){if(t)return this._isVisible(t)&&this._isListening(t);const i=this.getLayer();let a=!1;ft._dragElements.forEach(l=>{l.dragStatus==="dragging"&&(l.node.nodeType==="Stage"||l.node.getLayer()===i)&&(a=!0)});const h=!r&&!b.hitOnDragEnabled&&(a||b.isTransforming());return this.isListening()&&this.isVisible()&&!h}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let t=this.getDepth(),r=this,i=0,a,h,l,d;function f(m){for(a=[],h=m.length,l=0;l<h;l++)d=m[l],i++,d.nodeType!==Dl&&(a=a.concat(d.getChildren().slice())),d._id===r._id&&(l=h);a.length>0&&a[0].getDepth()<=t&&f(a)}const p=this.getStage();return r.nodeType!==Cd&&p&&f(p.getChildren()),i}getDepth(){let t=0,r=this.parent;for(;r;)t++,r=r.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(nn),this._clearSelfAndDescendantCache(We)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;const r=t.getPointerPosition();if(!r)return null;const i=this.getAbsoluteTransform().copy();return i.invert(),i.point(r)}getAbsolutePosition(t){let r=!1,i=this.parent;for(;i;){if(i.isCached()){r=!0;break}i=i.parent}r&&!t&&(t=!0);const a=this.getAbsoluteTransform(t).getMatrix(),h=new ae,l=this.offset();return h.m=a.slice(),h.translate(l.x,l.y),h.getTranslation()}setAbsolutePosition(t){const{x:r,y:i,...a}=this._clearTransform();this.attrs.x=r,this.attrs.y=i,this._clearCache(nn);const h=this._getAbsoluteTransform().copy();return h.invert(),h.translate(t.x,t.y),t={x:this.attrs.x+h.getTranslation().x,y:this.attrs.y+h.getTranslation().y},this._setTransform(a),this.setPosition({x:t.x,y:t.y}),this._clearCache(nn),this._clearSelfAndDescendantCache(We),this}_setTransform(t){let r;for(r in t)this.attrs[r]=t[r]}_clearTransform(){const t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){let r=t.x,i=t.y,a=this.x(),h=this.y();return r!==void 0&&(a+=r),i!==void 0&&(h+=i),this.setPosition({x:a,y:h}),this}_eachAncestorReverse(t,r){let i=[],a=this.getParent(),h,l;if(!(r&&r._id===this._id)){for(i.unshift(this);a&&(!r||a._id!==r._id);)i.unshift(a),a=a.parent;for(h=i.length,l=0;l<h;l++)t(i[l])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return P.warn("Node has no parent. moveToTop function is ignored."),!1;const t=this.index,r=this.parent.getChildren().length;return t<r-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return P.warn("Node has no parent. moveUp function is ignored."),!1;const t=this.index,r=this.parent.getChildren().length;return t<r-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return P.warn("Node has no parent. moveDown function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return P.warn("Node has no parent. moveToBottom function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return P.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&P.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const r=this.index;return this.parent.children.splice(r,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(zi,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let t=this.opacity();const r=this.getParent();return r&&!r._isUnderCache&&(t*=r.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){let t=this.getAttrs(),r,i,a,h,l;const d={attrs:{},className:this.getClassName()};for(r in t)i=t[r],l=P.isObject(i)&&!P._isPlainObject(i)&&!P._isArray(i),!l&&(a=typeof this[r]=="function"&&this[r],delete t[r],h=a?a.call(this):null,t[r]=i,h!==i&&(d.attrs[r]=i));return P._prepareToStringify(d)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,r,i){const a=[];r&&this._isMatch(t)&&a.push(this);let h=this.parent;for(;h;){if(h===i)return a;h._isMatch(t)&&a.push(h),h=h.parent}return a}isAncestorOf(t){return!1}findAncestor(t,r,i){return this.findAncestors(t,r,i)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);let r=t.replace(/ /g,"").split(","),i=r.length,a,h;for(a=0;a<i;a++)if(h=r[a],P.isValidSelector(h)||(P.warn('Selector "'+h+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),P.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),P.warn("Konva is awesome, right?")),h.charAt(0)==="#"){if(this.id()===h.slice(1))return!0}else if(h.charAt(0)==="."){if(this.hasName(h.slice(1)))return!0}else if(this.className===h||this.nodeType===h)return!0;return!1}getLayer(){const t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(Fl,this._getStage)}_getStage(){const t=this.getParent();return t?t.getStage():null}fire(t,r={},i){return r.target=r.target||this,i?this._fireAndBubble(t,r):this._fire(t,r),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(We,this._getAbsoluteTransform)}_getAbsoluteTransform(t){let r;if(t)return r=new ae,this._eachAncestorReverse(function(i){const a=i.transformsEnabled();a==="all"?r.multiply(i.getTransform()):a==="position"&&r.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},t),r;{r=this._cache.get(We)||new ae,this.parent?this.parent.getAbsoluteTransform().copyInto(r):r.reset();const i=this.transformsEnabled();if(i==="all")r.multiply(this.getTransform());else if(i==="position"){const a=this.attrs.x||0,h=this.attrs.y||0,l=this.attrs.offsetX||0,d=this.attrs.offsetY||0;r.translate(a-l,h-d)}return r.dirty=!1,r}}getAbsoluteScale(t){let r=this;for(;r;)r._isUnderCache&&(t=r),r=r.getParent();const a=this.getAbsoluteTransform(t).decompose();return{x:a.scaleX,y:a.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(nn,this._getTransform)}_getTransform(){var t,r;const i=this._cache.get(nn)||new ae;i.reset();const a=this.x(),h=this.y(),l=b.getAngle(this.rotation()),d=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,f=(r=this.attrs.scaleY)!==null&&r!==void 0?r:1,p=this.attrs.skewX||0,m=this.attrs.skewY||0,_=this.attrs.offsetX||0,v=this.attrs.offsetY||0;return(a!==0||h!==0)&&i.translate(a,h),l!==0&&i.rotate(l),(p!==0||m!==0)&&i.skew(p,m),(d!==1||f!==1)&&i.scale(d,f),(_!==0||v!==0)&&i.translate(-1*_,-1*v),i.dirty=!1,i}clone(t){let r=P.cloneObject(this.attrs),i,a,h,l,d;for(i in t)r[i]=t[i];const f=new this.constructor(r);for(i in this.eventListeners)for(a=this.eventListeners[i],h=a.length,l=0;l<h;l++)d=a[l],d.name.indexOf(md)<0&&(f.eventListeners[i]||(f.eventListeners[i]=[]),f.eventListeners[i].push(d));return f}_toKonvaCanvas(t){t=t||{};const r=this.getClientRect(),i=this.getStage(),a=t.x!==void 0?t.x:Math.floor(r.x),h=t.y!==void 0?t.y:Math.floor(r.y),l=t.pixelRatio||1,d=new sn({width:t.width||Math.ceil(r.width)||(i?i.width():0),height:t.height||Math.ceil(r.height)||(i?i.height():0),pixelRatio:l}),f=d.getContext(),p=new sn({width:d.width/d.pixelRatio+Math.abs(a),height:d.height/d.pixelRatio+Math.abs(h),pixelRatio:d.pixelRatio});return t.imageSmoothingEnabled===!1&&(f._context.imageSmoothingEnabled=!1),f.save(),(a||h)&&f.translate(-1*a,-1*h),this.drawScene(d,void 0,p),f.restore(),d}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};const r=t.mimeType||null,i=t.quality||null,a=this._toKonvaCanvas(t).toDataURL(r,i);return t.callback&&t.callback(a),a}toImage(t){return new Promise((r,i)=>{try{const a=t?.callback;a&&delete t.callback,P._urlToImage(this.toDataURL(t),function(h){r(h),a?.(h)})}catch(a){i(a)}})}toBlob(t){return new Promise((r,i)=>{try{const a=t?.callback;a&&delete t.callback,this.toCanvas(t).toBlob(h=>{r(h),a?.(h)},t?.mimeType,t?.quality)}catch(a){i(a)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():b.dragDistance}_off(t,r,i){let a=this.eventListeners[t],h,l,d;for(h=0;h<a.length;h++)if(l=a[h].name,d=a[h].handler,(l!=="konva"||r==="konva")&&(!r||l===r)&&(!i||i===d)){if(a.splice(h,1),a.length===0){delete this.eventListeners[t];break}h--}}_fireChangeEvent(t,r,i){this._fire(t+gd,{oldVal:r,newVal:i})}addName(t){if(!this.hasName(t)){const r=this.name(),i=r?r+" "+t:t;this.name(i)}return this}hasName(t){if(!t)return!1;const r=this.name();return r?(r||"").split(/\s/g).indexOf(t)!==-1:!1}removeName(t){const r=(this.name()||"").split(/\s/g),i=r.indexOf(t);return i!==-1&&(r.splice(i,1),this.name(r.join(" "))),this}setAttr(t,r){const i=this[Gl+P._capitalize(t)];return P._isFunction(i)?i.call(this,r):this._setAttr(t,r),this}_requestDraw(){if(b.autoDrawEnabled){const t=this.getLayer()||this.getStage();t?.batchDraw()}}_setAttr(t,r){const i=this.attrs[t];i===r&&!P.isObject(r)||(r==null?delete this.attrs[t]:this.attrs[t]=r,this._shouldFireChangeEvents&&this._fireChangeEvent(t,i,r),this._requestDraw())}_setComponentAttr(t,r,i){let a;i!==void 0&&(a=this.attrs[t],a||(this.attrs[t]=this.getAttr(t)),this.attrs[t][r]=i,this._fireChangeEvent(t,a,i))}_fireAndBubble(t,r,i){r&&this.nodeType===Dl&&(r.target=this);const a=[yd,vd,_d,Sd,xd,wd];if(!(a.indexOf(t)!==-1&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||this.nodeType==="Stage"&&!i))){this._fire(t,r);const l=a.indexOf(t)!==-1&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(r&&!r.cancelBubble||!r)&&this.parent&&this.parent.isListening()&&!l&&(i&&i.parent?this._fireAndBubble.call(this.parent,t,r,i):this._fireAndBubble.call(this.parent,t,r))}}_getProtoListeners(t){var r,i,a;const h=(r=this._cache.get(Ai))!==null&&r!==void 0?r:{};let l=h?.[t];if(l===void 0){l=[];let d=Object.getPrototypeOf(this);for(;d;){const f=(a=(i=d.eventListeners)===null||i===void 0?void 0:i[t])!==null&&a!==void 0?a:[];l.push(...f),d=Object.getPrototypeOf(d)}h[t]=l,this._cache.set(Ai,h)}return l}_fire(t,r){r=r||{},r.currentTarget=this,r.type=t;const i=this._getProtoListeners(t);if(i)for(let h=0;h<i.length;h++)i[h].handler.call(this,r);const a=this.eventListeners[t];if(a)for(let h=0;h<a.length;h++)a[h].handler.call(this,r)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){const r=t?t.pointerId:void 0,i=this.getStage(),a=this.getAbsolutePosition();if(!i)return;const h=i._getPointerById(r)||i._changedPointerPositions[0]||a;ft._dragElements.set(this._id,{node:this,startPointerPos:h,offset:{x:h.x-a.x,y:h.y-a.y},dragStatus:"ready",pointerId:r})}startDrag(t,r=!0){ft._dragElements.has(this._id)||this._createDragElement(t);const i=ft._dragElements.get(this._id);i.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},r)}_setDragPosition(t,r){const i=this.getStage()._getPointerById(r.pointerId);if(!i)return;let a={x:i.x-r.offset.x,y:i.y-r.offset.y};const h=this.dragBoundFunc();if(h!==void 0){const l=h.call(this,a,t);l?a=l:P.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==a.x||this._lastPos.y!==a.y)&&(this.setAbsolutePosition(a),this._requestDraw()),this._lastPos=a}stopDrag(t){const r=ft._dragElements.get(this._id);r&&(r.dragStatus="stopped"),ft._endDragBefore(t),ft._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=ft._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){if(!(!(t.evt.button!==void 0)||b.dragButtons.indexOf(t.evt.button)>=0)||this.isDragging())return;let a=!1;ft._dragElements.forEach(h=>{this.isAncestorOf(h.node)&&(a=!0)}),a||this._createDragElement(t)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const r=ft._dragElements.get(this._id),i=r&&r.dragStatus==="dragging",a=r&&r.dragStatus==="ready";i?this.stopDrag():a&&ft._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const r=this.getStage();if(!r)return!1;const i={x:-t.x,y:-t.y,width:r.width()+2*t.x,height:r.height()+2*t.y};return P.haveIntersection(i,this.getClientRect())}static create(t,r){return P._isString(t)&&(t=JSON.parse(t)),this._createNode(t,r)}static _createNode(t,r){let i=F.prototype.getClassName.call(t),a=t.children,h,l,d;r&&(t.attrs.container=r),b[i]||(P.warn('Can not find a node with class name "'+i+'". Fallback to "Shape".'),i="Shape");const f=b[i];if(h=new f(t.attrs),a)for(l=a.length,d=0;d<l;d++)h.add(F._createNode(a[d]));return h}}F.prototype.nodeType="Node";F.prototype._attrsAffectingSize=[];F.prototype.eventListeners={};F.prototype.on.call(F.prototype,Pd,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(nn),this._clearSelfAndDescendantCache(We)});F.prototype.on.call(F.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(ya)});F.prototype.on.call(F.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(ma)});F.prototype.on.call(F.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(zi)});const mt=S.addGetterSetter;mt(F,"zIndex");mt(F,"absolutePosition");mt(F,"position");mt(F,"x",0,z());mt(F,"y",0,z());mt(F,"globalCompositeOperation","source-over",Pn());mt(F,"opacity",1,z());mt(F,"name","",Pn());mt(F,"id","",Pn());mt(F,"rotation",0,z());S.addComponentsGetterSetter(F,"scale",["x","y"]);mt(F,"scaleX",1,z());mt(F,"scaleY",1,z());S.addComponentsGetterSetter(F,"skew",["x","y"]);mt(F,"skewX",0,z());mt(F,"skewY",0,z());S.addComponentsGetterSetter(F,"offset",["x","y"]);mt(F,"offsetX",0,z());mt(F,"offsetY",0,z());mt(F,"dragDistance",void 0,z());mt(F,"width",0,z());mt(F,"height",0,z());mt(F,"listening",!0,Pe());mt(F,"preventDefault",!0,Pe());mt(F,"filters",void 0,function(o){return this._filterUpToDate=!1,o});mt(F,"visible",!0,Pe());mt(F,"transformsEnabled","all",Pn());mt(F,"size");mt(F,"dragBoundFunc");mt(F,"draggable",!1,Pe());S.backCompat(F,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class oe extends F{constructor(){super(...arguments),this.children=[]}getChildren(t){const r=this.children||[];return t?r.filter(t):r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(let i=0;i<t.length;i++)this.add(t[i]);return this}const r=t[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){const r=this._generalFind(t,!0);return r.length>0?r[0]:void 0}_generalFind(t,r){const i=[];return this._descendants(a=>{const h=a._isMatch(t);return h&&i.push(a),!!(h&&r)}),i}_descendants(t){let r=!1;const i=this.getChildren();for(const a of i){if(r=t(a),r)return!0;if(a.hasChildren()&&(r=a._descendants(t),r))return!0}return!1}toObject(){const t=F.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(r=>{t.children.push(r.toObject())}),t}isAncestorOf(t){let r=t.getParent();for(;r;){if(r._id===this._id)return!0;r=r.getParent()}return!1}clone(t){const r=F.prototype.clone.call(this,t);return this.getChildren().forEach(function(i){r.add(i.clone())}),r}getAllIntersections(t){const r=[];return this.find("Shape").forEach(i=>{i.isVisible()&&i.intersects(t)&&r.push(i)}),r}_clearSelfAndDescendantCache(t){var r;super._clearSelfAndDescendantCache(t),!this.isCached()&&((r=this.children)===null||r===void 0||r.forEach(function(i){i._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(r,i){r.index=i}),this._requestDraw()}drawScene(t,r,i){const a=this.getLayer(),h=t||a&&a.getCanvas(),l=h&&h.getContext(),d=this._getCanvasCache(),f=d&&d.scene,p=h&&h.isCache;if(!this.isVisible()&&!p)return this;if(f){l.save();const m=this.getAbsoluteTransform(r).getMatrix();l.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._drawCachedSceneCanvas(l),l.restore()}else this._drawChildren("drawScene",h,r,i);return this}drawHit(t,r){if(!this.shouldDrawHit(r))return this;const i=this.getLayer(),a=t||i&&i.hitCanvas,h=a&&a.getContext(),l=this._getCanvasCache();if(l&&l.hit){h.save();const f=this.getAbsoluteTransform(r).getMatrix();h.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedHitCanvas(h),h.restore()}else this._drawChildren("drawHit",a,r);return this}_drawChildren(t,r,i,a){var h;const l=r&&r.getContext(),d=this.clipWidth(),f=this.clipHeight(),p=this.clipFunc(),m=typeof d=="number"&&typeof f=="number"||p,_=i===this;if(m){l.save();const w=this.getAbsoluteTransform(i);let x=w.getMatrix();l.transform(x[0],x[1],x[2],x[3],x[4],x[5]),l.beginPath();let M;if(p)M=p.call(this,l,this);else{const A=this.clipX(),L=this.clipY();l.rect(A||0,L||0,d,f)}l.clip.apply(l,M),x=w.copy().invert().getMatrix(),l.transform(x[0],x[1],x[2],x[3],x[4],x[5])}const v=!_&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";v&&(l.save(),l._applyGlobalCompositeOperation(this)),(h=this.children)===null||h===void 0||h.forEach(function(w){w[t](r,i,a)}),v&&l.restore(),m&&l.restore()}getClientRect(t={}){var r;const i=t.skipTransform,a=t.relativeTo;let h,l,d,f,p={x:1/0,y:1/0,width:0,height:0};const m=this;(r=this.children)===null||r===void 0||r.forEach(function(w){if(!w.visible())return;const x=w.getClientRect({relativeTo:m,skipShadow:t.skipShadow,skipStroke:t.skipStroke});x.width===0&&x.height===0||(h===void 0?(h=x.x,l=x.y,d=x.x+x.width,f=x.y+x.height):(h=Math.min(h,x.x),l=Math.min(l,x.y),d=Math.max(d,x.x+x.width),f=Math.max(f,x.y+x.height)))});const _=this.find("Shape");let v=!1;for(let w=0;w<_.length;w++)if(_[w]._isVisible(this)){v=!0;break}return v&&h!==void 0?p={x:h,y:l,width:d-h,height:f-l}:p={x:0,y:0,width:0,height:0},i?p:this._transformedRect(p,a)}}S.addComponentsGetterSetter(oe,"clip",["x","y","width","height"]);S.addGetterSetter(oe,"clipX",void 0,z());S.addGetterSetter(oe,"clipY",void 0,z());S.addGetterSetter(oe,"clipWidth",void 0,z());S.addGetterSetter(oe,"clipHeight",void 0,z());S.addGetterSetter(oe,"clipFunc");const Mr=new Map,ch=b._global.PointerEvent!==void 0;function ha(o){return Mr.get(o)}function Ma(o){return{evt:o,pointerId:o.pointerId}}function dh(o,t){return Mr.get(o)===t}function fh(o,t){Er(o),t.getStage()&&(Mr.set(o,t),ch&&t._fire("gotpointercapture",Ma(new PointerEvent("gotpointercapture"))))}function Er(o,t){const r=Mr.get(o);if(!r)return;const i=r.getStage();i&&i.content,Mr.delete(o),ch&&r._fire("lostpointercapture",Ma(new PointerEvent("lostpointercapture")))}const Ed="Stage",Td="string",zl="px",Rd="mouseout",gh="mouseleave",ph="mouseover",mh="mouseenter",yh="mousemove",vh="mousedown",_h="mouseup",Sr="pointermove",xr="pointerdown",Vn="pointerup",wr="pointercancel",Ad="lostpointercapture",Mi="pointerout",Cr="pointerleave",Li="pointerover",Ii="pointerenter",va="contextmenu",Sh="touchstart",xh="touchend",wh="touchmove",Ch="touchcancel",_a="wheel",Md=5,Ld=[[mh,"_pointerenter"],[vh,"_pointerdown"],[yh,"_pointermove"],[_h,"_pointerup"],[gh,"_pointerleave"],[Sh,"_pointerdown"],[wh,"_pointermove"],[xh,"_pointerup"],[Ch,"_pointercancel"],[ph,"_pointerover"],[_a,"_wheel"],[va,"_contextmenu"],[xr,"_pointerdown"],[Sr,"_pointermove"],[Vn,"_pointerup"],[wr,"_pointercancel"],[Cr,"_pointerleave"],[Ad,"_lostpointercapture"]],ua={mouse:{[Mi]:Rd,[Cr]:gh,[Li]:ph,[Ii]:mh,[Sr]:yh,[xr]:vh,[Vn]:_h,[wr]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Mi]:"touchout",[Cr]:"touchleave",[Li]:"touchover",[Ii]:"touchenter",[Sr]:wh,[xr]:Sh,[Vn]:xh,[wr]:Ch,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Mi]:Mi,[Cr]:Cr,[Li]:Li,[Ii]:Ii,[Sr]:Sr,[xr]:xr,[Vn]:Vn,[wr]:wr,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Pr=o=>o.indexOf("pointer")>=0?"pointer":o.indexOf("touch")>=0?"touch":"mouse",Yn=o=>{const t=Pr(o);if(t==="pointer")return b.pointerEventsEnabled&&ua.pointer;if(t==="touch")return ua.touch;if(t==="mouse")return ua.mouse};function bl(o={}){return(o.clipFunc||o.clipWidth||o.clipHeight)&&P.warn("Stage does not support clipping. Please use clip for Layers or Groups."),o}const Id="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",Tr=[];let Ui=class extends oe{constructor(t){super(bl(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),Tr.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{bl(this.attrs)}),this._checkVisibility()}_validateAdd(t){const r=t.getType()==="Layer",i=t.getType()==="FastLayer";r||i||P.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if(typeof t===Td){let r;if(t.charAt(0)==="."){const i=t.slice(1);t=document.getElementsByClassName(i)[0]}else t.charAt(0)!=="#"?r=t:r=t.slice(1),t=document.getElementById(r);if(!t)throw"Can not find container in document with id "+r}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const t=this.children,r=t.length;for(let i=0;i<r;i++)t[i].clear();return this}clone(t){return t||(t={}),t.container=typeof document<"u"&&document.createElement("div"),oe.prototype.clone.call(this,t)}destroy(){super.destroy();const t=this.content;t&&P._isInDocument(t)&&this.container().removeChild(t);const r=Tr.indexOf(this);return r>-1&&Tr.splice(r,1),P.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(P.warn(Id),null)}_getPointerById(t){return this._pointerPositions.find(r=>r.id===t)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){t={...t},t.x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();const r=new sn({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),i=r.getContext()._context,a=this.children;return(t.x||t.y)&&i.translate(-1*t.x,-1*t.y),a.forEach(function(h){if(!h.isVisible())return;const l=h._toKonvaCanvas(t);i.drawImage(l._canvas,t.x,t.y,l.getWidth()/l.getPixelRatio(),l.getHeight()/l.getPixelRatio())}),r}getIntersection(t){if(!t)return null;const r=this.children,i=r.length,a=i-1;for(let h=a;h>=0;h--){const l=r[h].getIntersection(t);if(l)return l}return null}_resizeDOM(){const t=this.width(),r=this.height();this.content&&(this.content.style.width=t+zl,this.content.style.height=r+zl),this.bufferCanvas.setSize(t,r),this.bufferHitCanvas.setSize(t,r),this.children.forEach(i=>{i.setSize({width:t,height:r}),i.draw()})}add(t,...r){if(arguments.length>1){for(let a=0;a<arguments.length;a++)this.add(arguments[a]);return this}super.add(t);const i=this.children.length;return i>Md&&P.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),b.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return dh(t,this)}setPointerCapture(t){fh(t,this)}releaseCapture(t){Er(t)}getLayers(){return this.children}_bindContentEvents(){b.isBrowser&&Ld.forEach(([t,r])=>{this.content.addEventListener(t,i=>{this[r](i)},{passive:!1})})}_pointerenter(t){this.setPointersPositions(t);const r=Yn(t.type);r&&this._fire(r.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const r=Yn(t.type);r&&this._fire(r.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let r=this[t+"targetShape"];return r&&!r.getStage()&&(r=null),r}_pointerleave(t){const r=Yn(t.type),i=Pr(t.type);if(!r)return;this.setPointersPositions(t);const a=this._getTargetShape(i),h=!(b.isDragging()||b.isTransforming())||b.hitOnDragEnabled;a&&h?(a._fireAndBubble(r.pointerout,{evt:t}),a._fireAndBubble(r.pointerleave,{evt:t}),this._fire(r.pointerleave,{evt:t,target:this,currentTarget:this}),this[i+"targetShape"]=null):h&&(this._fire(r.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(r.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(t){const r=Yn(t.type),i=Pr(t.type);if(!r)return;this.setPointersPositions(t);let a=!1;this._changedPointerPositions.forEach(h=>{const l=this.getIntersection(h);if(ft.justDragged=!1,b["_"+i+"ListenClick"]=!0,!l||!l.isListening()){this[i+"ClickStartShape"]=void 0;return}b.capturePointerEventsEnabled&&l.setPointerCapture(h.id),this[i+"ClickStartShape"]=l,l._fireAndBubble(r.pointerdown,{evt:t,pointerId:h.id}),a=!0;const d=t.type.indexOf("touch")>=0;l.preventDefault()&&t.cancelable&&d&&t.preventDefault()}),a||this._fire(r.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(t){const r=Yn(t.type),i=Pr(t.type);if(!r)return;const a=t.type.indexOf("touch")>=0||t.pointerType==="touch";if(b.isDragging()&&ft.node.preventDefault()&&t.cancelable&&a&&t.preventDefault(),this.setPointersPositions(t),!(!(b.isDragging()||b.isTransforming())||b.hitOnDragEnabled))return;const l={};let d=!1;const f=this._getTargetShape(i);this._changedPointerPositions.forEach(p=>{const m=ha(p.id)||this.getIntersection(p),_=p.id,v={evt:t,pointerId:_},w=f!==m;if(w&&f&&(f._fireAndBubble(r.pointerout,{...v},m),f._fireAndBubble(r.pointerleave,{...v},m)),m){if(l[m._id])return;l[m._id]=!0}m&&m.isListening()?(d=!0,w&&(m._fireAndBubble(r.pointerover,{...v},f),m._fireAndBubble(r.pointerenter,{...v},f),this[i+"targetShape"]=m),m._fireAndBubble(r.pointermove,{...v})):f&&(this._fire(r.pointerover,{evt:t,target:this,currentTarget:this,pointerId:_}),this[i+"targetShape"]=null)}),d||this._fire(r.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const r=Yn(t.type),i=Pr(t.type);if(!r)return;this.setPointersPositions(t);const a=this[i+"ClickStartShape"],h=this[i+"ClickEndShape"],l={};let d=!1;this._changedPointerPositions.forEach(f=>{const p=ha(f.id)||this.getIntersection(f);if(p){if(p.releaseCapture(f.id),l[p._id])return;l[p._id]=!0}const m=f.id,_={evt:t,pointerId:m};let v=!1;b["_"+i+"InDblClickWindow"]?(v=!0,clearTimeout(this[i+"DblTimeout"])):ft.justDragged||(b["_"+i+"InDblClickWindow"]=!0,clearTimeout(this[i+"DblTimeout"])),this[i+"DblTimeout"]=setTimeout(function(){b["_"+i+"InDblClickWindow"]=!1},b.dblClickWindow),p&&p.isListening()?(d=!0,this[i+"ClickEndShape"]=p,p._fireAndBubble(r.pointerup,{..._}),b["_"+i+"ListenClick"]&&a&&a===p&&(p._fireAndBubble(r.pointerclick,{..._}),v&&h&&h===p&&p._fireAndBubble(r.pointerdblclick,{..._}))):(this[i+"ClickEndShape"]=null,d||(this._fire(r.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),d=!0),b["_"+i+"ListenClick"]&&this._fire(r.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:m}),v&&this._fire(r.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:m}))}),d||this._fire(r.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),b["_"+i+"ListenClick"]=!1,t.cancelable&&i!=="touch"&&i!=="pointer"&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);const r=this.getIntersection(this.getPointerPosition());r&&r.isListening()?r._fireAndBubble(va,{evt:t}):this._fire(va,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);const r=this.getIntersection(this.getPointerPosition());r&&r.isListening()?r._fireAndBubble(_a,{evt:t}):this._fire(_a,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const r=ha(t.pointerId)||this.getIntersection(this.getPointerPosition());r&&r._fireAndBubble(Vn,Ma(t)),Er(t.pointerId)}_lostpointercapture(t){Er(t.pointerId)}setPointersPositions(t){const r=this._getContentPosition();let i=null,a=null;t=t||window.event,t.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,h=>{this._pointerPositions.push({id:h.identifier,x:(h.clientX-r.left)/r.scaleX,y:(h.clientY-r.top)/r.scaleY})}),Array.prototype.forEach.call(t.changedTouches||t.touches,h=>{this._changedPointerPositions.push({id:h.identifier,x:(h.clientX-r.left)/r.scaleX,y:(h.clientY-r.top)/r.scaleY})})):(i=(t.clientX-r.left)/r.scaleX,a=(t.clientY-r.top)/r.scaleY,this.pointerPos={x:i,y:a},this._pointerPositions=[{x:i,y:a,id:P._getFirstPointerId(t)}],this._changedPointerPositions=[{x:i,y:a,id:P._getFirstPointerId(t)}])}_setPointerPosition(t){P.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new sn({width:this.width(),height:this.height()}),this.bufferHitCanvas=new Ra({pixelRatio:1,width:this.width(),height:this.height()}),!b.isBrowser)return;const t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}cache(){return P.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(t){t.batchDraw()}),this}};Ui.prototype.nodeType=Ed;Rt(Ui);S.addGetterSetter(Ui,"container");b.isBrowser&&document.addEventListener("visibilitychange",()=>{Tr.forEach(o=>{o.batchDraw()})});const Ph="hasShadow",kh="shadowRGBA",Eh="patternImage",Th="linearGradient",Rh="radialGradient";let Ni;function ca(){return Ni||(Ni=P.createCanvasElement().getContext("2d"),Ni)}const Rr={};function Nd(o){const t=this.attrs.fillRule;t?o.fill(t):o.fill()}function Od(o){o.stroke()}function Gd(o){const t=this.attrs.fillRule;t?o.fill(t):o.fill()}function Dd(o){o.stroke()}function Fd(){this._clearCache(Ph)}function zd(){this._clearCache(kh)}function bd(){this._clearCache(Eh)}function Bd(){this._clearCache(Th)}function Hd(){this._clearCache(Rh)}class G extends F{constructor(t){super(t);let r;for(;r=P.getRandomColor(),!(r&&!(r in Rr)););this.colorKey=r,Rr[r]=this}getContext(){return P.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return P.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(Ph,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(Eh,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const r=ca().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(r&&r.setTransform){const i=new ae;i.translate(this.fillPatternX(),this.fillPatternY()),i.rotate(b.getAngle(this.fillPatternRotation())),i.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),i.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const a=i.getMatrix(),h=typeof DOMMatrix>"u"?{a:a[0],b:a[1],c:a[2],d:a[3],e:a[4],f:a[5]}:new DOMMatrix(a);r.setTransform(h)}return r}}_getLinearGradient(){return this._getCache(Th,this.__getLinearGradient)}__getLinearGradient(){const t=this.fillLinearGradientColorStops();if(t){const r=ca(),i=this.fillLinearGradientStartPoint(),a=this.fillLinearGradientEndPoint(),h=r.createLinearGradient(i.x,i.y,a.x,a.y);for(let l=0;l<t.length;l+=2)h.addColorStop(t[l],t[l+1]);return h}}_getRadialGradient(){return this._getCache(Rh,this.__getRadialGradient)}__getRadialGradient(){const t=this.fillRadialGradientColorStops();if(t){const r=ca(),i=this.fillRadialGradientStartPoint(),a=this.fillRadialGradientEndPoint(),h=r.createRadialGradient(i.x,i.y,this.fillRadialGradientStartRadius(),a.x,a.y,this.fillRadialGradientEndRadius());for(let l=0;l<t.length;l+=2)h.addColorStop(t[l],t[l+1]);return h}}getShadowRGBA(){return this._getCache(kh,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const t=P.colorToRGBA(this.shadowColor());if(t)return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const t=this.hitStrokeWidth();return t==="auto"?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){const r=this.getStage();if(!r)return!1;const i=r.bufferHitCanvas;return i.getContext().clear(),this.drawHit(i,void 0,!0),i.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0}destroy(){return F.prototype.destroy.call(this),delete Rr[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var r;if(!((r=this.attrs.perfectDrawEnabled)!==null&&r!==void 0?r:!0))return!1;const a=t||this.hasFill(),h=this.hasStroke(),l=this.getAbsoluteOpacity()!==1;if(a&&h&&l)return!0;const d=this.hasShadow(),f=this.shadowForStrokeEnabled();return!!(a&&h&&d&&f)}setStrokeHitEnabled(t){P.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){let r=!1,i=this.getParent();for(;i;){if(i.isCached()){r=!0;break}i=i.getParent()}const a=t.skipTransform,h=t.relativeTo||r&&this.getStage()||void 0,l=this.getSelfRect(),f=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,p=l.width+f,m=l.height+f,_=!t.skipShadow&&this.hasShadow(),v=_?this.shadowOffsetX():0,w=_?this.shadowOffsetY():0,x=p+Math.abs(v),M=m+Math.abs(w),A=_&&this.shadowBlur()||0,L=x+A*2,R=M+A*2,N={width:L,height:R,x:-(f/2+A)+Math.min(v,0)+l.x,y:-(f/2+A)+Math.min(w,0)+l.y};return a?N:this._transformedRect(N,h)}drawScene(t,r,i){const a=this.getLayer(),h=t||a.getCanvas(),l=h.getContext(),d=this._getCanvasCache(),f=this.getSceneFunc(),p=this.hasShadow();let m;const _=r===this;if(!this.isVisible()&&!_)return this;if(d){l.save();const v=this.getAbsoluteTransform(r).getMatrix();return l.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._drawCachedSceneCanvas(l),l.restore(),this}if(!f)return this;if(l.save(),this._useBufferCanvas()){m=this.getStage();const v=i||m.bufferCanvas,w=v.getContext();w.clear(),w.save(),w._applyLineJoin(this),w._applyMiterLimit(this);const x=this.getAbsoluteTransform(r).getMatrix();w.transform(x[0],x[1],x[2],x[3],x[4],x[5]),f.call(this,w,this),w.restore();const M=v.pixelRatio;p&&l._applyShadow(this),l._applyOpacity(this),l._applyGlobalCompositeOperation(this),l.drawImage(v._canvas,v.x||0,v.y||0,v.width/M,v.height/M)}else{if(l._applyLineJoin(this),l._applyMiterLimit(this),!_){const v=this.getAbsoluteTransform(r).getMatrix();l.transform(v[0],v[1],v[2],v[3],v[4],v[5]),l._applyOpacity(this),l._applyGlobalCompositeOperation(this)}p&&l._applyShadow(this),f.call(this,l,this)}return l.restore(),this}drawHit(t,r,i=!1){if(!this.shouldDrawHit(r,i))return this;const a=this.getLayer(),h=t||a.hitCanvas,l=h&&h.getContext(),d=this.hitFunc()||this.sceneFunc(),f=this._getCanvasCache(),p=f&&f.hit;if(this.colorKey||P.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),p){l.save();const _=this.getAbsoluteTransform(r).getMatrix();return l.transform(_[0],_[1],_[2],_[3],_[4],_[5]),this._drawCachedHitCanvas(l),l.restore(),this}if(!d)return this;if(l.save(),l._applyLineJoin(this),l._applyMiterLimit(this),!(this===r)){const _=this.getAbsoluteTransform(r).getMatrix();l.transform(_[0],_[1],_[2],_[3],_[4],_[5])}return d.call(this,l,this),l.restore(),this}drawHitFromCache(t=0){const r=this._getCanvasCache(),i=this._getCachedSceneCanvas(),a=r.hit,h=a.getContext(),l=a.getWidth(),d=a.getHeight();h.clear(),h.drawImage(i._canvas,0,0,l,d);try{const f=h.getImageData(0,0,l,d),p=f.data,m=p.length,_=P._hexToRgb(this.colorKey);for(let v=0;v<m;v+=4)p[v+3]>t?(p[v]=_.r,p[v+1]=_.g,p[v+2]=_.b,p[v+3]=255):p[v+3]=0;h.putImageData(f,0,0)}catch(f){P.error("Unable to draw hit graph from cached scene canvas. "+f.message)}return this}hasPointerCapture(t){return dh(t,this)}setPointerCapture(t){fh(t,this)}releaseCapture(t){Er(t)}}G.prototype._fillFunc=Nd;G.prototype._strokeFunc=Od;G.prototype._fillFuncHit=Gd;G.prototype._strokeFuncHit=Dd;G.prototype._centroid=!1;G.prototype.nodeType="Shape";Rt(G);G.prototype.eventListeners={};G.prototype.on.call(G.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",Fd);G.prototype.on.call(G.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",zd);G.prototype.on.call(G.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",bd);G.prototype.on.call(G.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",Bd);G.prototype.on.call(G.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",Hd);S.addGetterSetter(G,"stroke",void 0,uh());S.addGetterSetter(G,"strokeWidth",2,z());S.addGetterSetter(G,"fillAfterStrokeEnabled",!1);S.addGetterSetter(G,"hitStrokeWidth","auto",Aa());S.addGetterSetter(G,"strokeHitEnabled",!0,Pe());S.addGetterSetter(G,"perfectDrawEnabled",!0,Pe());S.addGetterSetter(G,"shadowForStrokeEnabled",!0,Pe());S.addGetterSetter(G,"lineJoin");S.addGetterSetter(G,"lineCap");S.addGetterSetter(G,"miterLimit");S.addGetterSetter(G,"sceneFunc");S.addGetterSetter(G,"hitFunc");S.addGetterSetter(G,"dash");S.addGetterSetter(G,"dashOffset",0,z());S.addGetterSetter(G,"shadowColor",void 0,Pn());S.addGetterSetter(G,"shadowBlur",0,z());S.addGetterSetter(G,"shadowOpacity",1,z());S.addComponentsGetterSetter(G,"shadowOffset",["x","y"]);S.addGetterSetter(G,"shadowOffsetX",0,z());S.addGetterSetter(G,"shadowOffsetY",0,z());S.addGetterSetter(G,"fillPatternImage");S.addGetterSetter(G,"fill",void 0,uh());S.addGetterSetter(G,"fillPatternX",0,z());S.addGetterSetter(G,"fillPatternY",0,z());S.addGetterSetter(G,"fillLinearGradientColorStops");S.addGetterSetter(G,"strokeLinearGradientColorStops");S.addGetterSetter(G,"fillRadialGradientStartRadius",0);S.addGetterSetter(G,"fillRadialGradientEndRadius",0);S.addGetterSetter(G,"fillRadialGradientColorStops");S.addGetterSetter(G,"fillPatternRepeat","repeat");S.addGetterSetter(G,"fillEnabled",!0);S.addGetterSetter(G,"strokeEnabled",!0);S.addGetterSetter(G,"shadowEnabled",!0);S.addGetterSetter(G,"dashEnabled",!0);S.addGetterSetter(G,"strokeScaleEnabled",!0);S.addGetterSetter(G,"fillPriority","color");S.addComponentsGetterSetter(G,"fillPatternOffset",["x","y"]);S.addGetterSetter(G,"fillPatternOffsetX",0,z());S.addGetterSetter(G,"fillPatternOffsetY",0,z());S.addComponentsGetterSetter(G,"fillPatternScale",["x","y"]);S.addGetterSetter(G,"fillPatternScaleX",1,z());S.addGetterSetter(G,"fillPatternScaleY",1,z());S.addComponentsGetterSetter(G,"fillLinearGradientStartPoint",["x","y"]);S.addComponentsGetterSetter(G,"strokeLinearGradientStartPoint",["x","y"]);S.addGetterSetter(G,"fillLinearGradientStartPointX",0);S.addGetterSetter(G,"strokeLinearGradientStartPointX",0);S.addGetterSetter(G,"fillLinearGradientStartPointY",0);S.addGetterSetter(G,"strokeLinearGradientStartPointY",0);S.addComponentsGetterSetter(G,"fillLinearGradientEndPoint",["x","y"]);S.addComponentsGetterSetter(G,"strokeLinearGradientEndPoint",["x","y"]);S.addGetterSetter(G,"fillLinearGradientEndPointX",0);S.addGetterSetter(G,"strokeLinearGradientEndPointX",0);S.addGetterSetter(G,"fillLinearGradientEndPointY",0);S.addGetterSetter(G,"strokeLinearGradientEndPointY",0);S.addComponentsGetterSetter(G,"fillRadialGradientStartPoint",["x","y"]);S.addGetterSetter(G,"fillRadialGradientStartPointX",0);S.addGetterSetter(G,"fillRadialGradientStartPointY",0);S.addComponentsGetterSetter(G,"fillRadialGradientEndPoint",["x","y"]);S.addGetterSetter(G,"fillRadialGradientEndPointX",0);S.addGetterSetter(G,"fillRadialGradientEndPointY",0);S.addGetterSetter(G,"fillPatternRotation",0);S.addGetterSetter(G,"fillRule",void 0,Pn());S.backCompat(G,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const Wd="#",Ud="beforeDraw",Yd="draw",Ah=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Xd=Ah.length;let kn=class extends oe{constructor(t){super(t),this.canvas=new sn,this.hitCanvas=new Ra({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);const r=this.getStage();return r&&r.content&&(r.content.removeChild(this.getNativeCanvasElement()),t<r.children.length-1?r.content.insertBefore(this.getNativeCanvasElement(),r.children[t+1].getCanvas()._canvas):r.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){F.prototype.moveToTop.call(this);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!F.prototype.moveUp.call(this))return!1;const r=this.getStage();return!r||!r.content?!1:(r.content.removeChild(this.getNativeCanvasElement()),this.index<r.children.length-1?r.content.insertBefore(this.getNativeCanvasElement(),r.children[this.index+1].getCanvas()._canvas):r.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(F.prototype.moveDown.call(this)){const t=this.getStage();if(t){const r=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),r[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(F.prototype.moveToBottom.call(this)){const t=this.getStage();if(t){const r=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),r[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const t=this.getNativeCanvasElement();return F.prototype.remove.call(this),t&&t.parentNode&&P._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:r}){return this.canvas.setSize(t,r),this.hitCanvas.setSize(t,r),this._setSmoothEnabled(),this}_validateAdd(t){const r=t.getType();r!=="Group"&&r!=="Shape"&&P.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t={...t},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),F.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){P.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){P.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,P.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;let r=1,i=!1;for(;;){for(let a=0;a<Xd;a++){const h=Ah[a],l=this._getIntersection({x:t.x+h.x*r,y:t.y+h.y*r}),d=l.shape;if(d)return d;if(i=!!l.antialiased,!l.antialiased)break}if(i)r+=1;else return null}}_getIntersection(t){const r=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(t.x*r),Math.round(t.y*r),1,1).data,a=i[3];if(a===255){const h=P._rgbToHex(i[0],i[1],i[2]),l=Rr[Wd+h];return l?{shape:l}:{antialiased:!0}}else if(a>0)return{antialiased:!0};return{}}drawScene(t,r,i){const a=this.getLayer(),h=t||a&&a.getCanvas();return this._fire(Ud,{node:this}),this.clearBeforeDraw()&&h.getContext().clear(),oe.prototype.drawScene.call(this,h,r,i),this._fire(Yd,{node:this}),this}drawHit(t,r){const i=this.getLayer(),a=t||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),oe.prototype.drawHit.call(this,a,r),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){P.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return P.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}destroy(){return P.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};kn.prototype.nodeType="Layer";Rt(kn);S.addGetterSetter(kn,"imageSmoothingEnabled",!0);S.addGetterSetter(kn,"clearBeforeDraw",!0);S.addGetterSetter(kn,"hitGraphEnabled",!0,Pe());class La extends kn{constructor(t){super(t),this.listening(!1),P.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}La.prototype.nodeType="FastLayer";Rt(La);class qn extends oe{_validateAdd(t){const r=t.getType();r!=="Group"&&r!=="Shape"&&P.throw("You may only add groups and shapes to groups.")}}qn.prototype.nodeType="Group";Rt(qn);const da=function(){return wn.performance&&wn.performance.now?function(){return wn.performance.now()}:function(){return new Date().getTime()}}();class ye{constructor(t,r){this.id=ye.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:da(),frameRate:0},this.func=t,this.setLayers(r)}setLayers(t){let r=[];return t&&(r=Array.isArray(t)?t:[t]),this.layers=r,this}getLayers(){return this.layers}addLayer(t){const r=this.layers,i=r.length;for(let a=0;a<i;a++)if(r[a]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const r=ye.animations,i=r.length;for(let a=0;a<i;a++)if(r[a].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=da(),ye._addAnimation(this),this}stop(){return ye._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const r=t.id,i=this.animations,a=i.length;for(let h=0;h<a;h++)if(i[h].id===r){this.animations.splice(h,1);break}}static _runFrames(){const t={},r=this.animations;for(let i=0;i<r.length;i++){const a=r[i],h=a.layers,l=a.func;a._updateFrameObject(da());const d=h.length;let f;if(l?f=l.call(a,a.frame)!==!1:f=!0,!!f)for(let p=0;p<d;p++){const m=h[p];m._id!==void 0&&(t[m._id]=m)}}for(const i in t)t.hasOwnProperty(i)&&t[i].batchDraw()}static _animationLoop(){const t=ye;t.animations.length?(t._runFrames(),P.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,P.requestAnimFrame(this._animationLoop))}}ye.animations=[];ye.animIdCounter=0;ye.animRunning=!1;const jd={node:1,duration:1,easing:1,onFinish:1,yoyo:1},Vd=1,Bl=2,Hl=3,Wl=["fill","stroke","shadowColor"];let qd=0;class Qd{constructor(t,r,i,a,h,l,d){this.prop=t,this.propFunc=r,this.begin=a,this._pos=a,this.duration=l,this._change=0,this.prevPos=0,this.yoyo=d,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=h-this.begin,this.pause()}fire(t){const r=this[t];r&&r()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return t===void 0&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=Bl,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=Hl,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const t=this.getTimer()-this._startTime;this.state===Bl?this.setTime(t):this.state===Hl&&this.setTime(this.duration-t)}pause(){this.state=Vd,this.fire("onPause")}getTimer(){return new Date().getTime()}}class vt{constructor(t){const r=this,i=t.node,a=i._id,h=t.easing||Ar.Linear,l=!!t.yoyo;let d,f;typeof t.duration>"u"?d=.3:t.duration===0?d=.001:d=t.duration,this.node=i,this._id=qd++;const p=i.getLayer()||(i instanceof b.Stage?i.getLayers():null);p||P.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new ye(function(){r.tween.onEnterFrame()},p),this.tween=new Qd(f,function(m){r._tweenFunc(m)},h,0,1,d*1e3,l),this._addListeners(),vt.attrs[a]||(vt.attrs[a]={}),vt.attrs[a][this._id]||(vt.attrs[a][this._id]={}),vt.tweens[a]||(vt.tweens[a]={});for(f in t)jd[f]===void 0&&this._addAttr(f,t[f]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,r){const i=this.node,a=i._id;let h,l,d,f,p;const m=vt.tweens[a][t];m&&delete vt.attrs[a][m][t];let _=i.getAttr(t);if(P._isArray(r))if(h=[],l=Math.max(r.length,_.length),t==="points"&&r.length!==_.length&&(r.length>_.length?(f=_,_=P._prepareArrayForTween(_,r,i.closed())):(d=r,r=P._prepareArrayForTween(r,_,i.closed()))),t.indexOf("fill")===0)for(let v=0;v<l;v++)if(v%2===0)h.push(r[v]-_[v]);else{const w=P.colorToRGBA(_[v]);p=P.colorToRGBA(r[v]),_[v]=w,h.push({r:p.r-w.r,g:p.g-w.g,b:p.b-w.b,a:p.a-w.a})}else for(let v=0;v<l;v++)h.push(r[v]-_[v]);else Wl.indexOf(t)!==-1?(_=P.colorToRGBA(_),p=P.colorToRGBA(r),h={r:p.r-_.r,g:p.g-_.g,b:p.b-_.b,a:p.a-_.a}):h=r-_;vt.attrs[a][this._id][t]={start:_,diff:h,end:r,trueEnd:d,trueStart:f},vt.tweens[a][t]=this._id}_tweenFunc(t){const r=this.node,i=vt.attrs[r._id][this._id];let a,h,l,d,f,p,m,_;for(a in i){if(h=i[a],l=h.start,d=h.diff,_=h.end,P._isArray(l))if(f=[],m=Math.max(l.length,_.length),a.indexOf("fill")===0)for(p=0;p<m;p++)p%2===0?f.push((l[p]||0)+d[p]*t):f.push("rgba("+Math.round(l[p].r+d[p].r*t)+","+Math.round(l[p].g+d[p].g*t)+","+Math.round(l[p].b+d[p].b*t)+","+(l[p].a+d[p].a*t)+")");else for(p=0;p<m;p++)f.push((l[p]||0)+d[p]*t);else Wl.indexOf(a)!==-1?f="rgba("+Math.round(l.r+d.r*t)+","+Math.round(l.g+d.g*t)+","+Math.round(l.b+d.b*t)+","+(l.a+d.a*t)+")":f=l+d*t;r.setAttr(a,f)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const t=this.node,r=vt.attrs[t._id][this._id];r.points&&r.points.trueEnd&&t.setAttr("points",r.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const t=this.node,r=vt.attrs[t._id][this._id];r.points&&r.points.trueStart&&t.points(r.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(t*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const t=this.node._id,r=this._id,i=vt.tweens[t];this.pause(),this.anim&&this.anim.stop();for(const a in i)delete vt.tweens[t][a];delete vt.attrs[t][r],vt.tweens[t]&&(Object.keys(vt.tweens[t]).length===0&&delete vt.tweens[t],Object.keys(vt.attrs[t]).length===0&&delete vt.attrs[t])}}vt.attrs={};vt.tweens={};F.prototype.to=function(o){const t=o.onFinish;o.node=this,o.onFinish=function(){this.destroy(),t&&t()},new vt(o).play()};const Ar={BackEaseIn(o,t,r,i){return r*(o/=i)*o*((1.70158+1)*o-1.70158)+t},BackEaseOut(o,t,r,i){return r*((o=o/i-1)*o*((1.70158+1)*o+1.70158)+1)+t},BackEaseInOut(o,t,r,i){let a=1.70158;return(o/=i/2)<1?r/2*(o*o*(((a*=1.525)+1)*o-a))+t:r/2*((o-=2)*o*(((a*=1.525)+1)*o+a)+2)+t},ElasticEaseIn(o,t,r,i,a,h){let l=0;return o===0?t:(o/=i)===1?t+r:(h||(h=i*.3),!a||a<Math.abs(r)?(a=r,l=h/4):l=h/(2*Math.PI)*Math.asin(r/a),-(a*Math.pow(2,10*(o-=1))*Math.sin((o*i-l)*(2*Math.PI)/h))+t)},ElasticEaseOut(o,t,r,i,a,h){let l=0;return o===0?t:(o/=i)===1?t+r:(h||(h=i*.3),!a||a<Math.abs(r)?(a=r,l=h/4):l=h/(2*Math.PI)*Math.asin(r/a),a*Math.pow(2,-10*o)*Math.sin((o*i-l)*(2*Math.PI)/h)+r+t)},ElasticEaseInOut(o,t,r,i,a,h){let l=0;return o===0?t:(o/=i/2)===2?t+r:(h||(h=i*(.3*1.5)),!a||a<Math.abs(r)?(a=r,l=h/4):l=h/(2*Math.PI)*Math.asin(r/a),o<1?-.5*(a*Math.pow(2,10*(o-=1))*Math.sin((o*i-l)*(2*Math.PI)/h))+t:a*Math.pow(2,-10*(o-=1))*Math.sin((o*i-l)*(2*Math.PI)/h)*.5+r+t)},BounceEaseOut(o,t,r,i){return(o/=i)<1/2.75?r*(7.5625*o*o)+t:o<2/2.75?r*(7.5625*(o-=1.5/2.75)*o+.75)+t:o<2.5/2.75?r*(7.5625*(o-=2.25/2.75)*o+.9375)+t:r*(7.5625*(o-=2.625/2.75)*o+.984375)+t},BounceEaseIn(o,t,r,i){return r-Ar.BounceEaseOut(i-o,0,r,i)+t},BounceEaseInOut(o,t,r,i){return o<i/2?Ar.BounceEaseIn(o*2,0,r,i)*.5+t:Ar.BounceEaseOut(o*2-i,0,r,i)*.5+r*.5+t},EaseIn(o,t,r,i){return r*(o/=i)*o+t},EaseOut(o,t,r,i){return-r*(o/=i)*(o-2)+t},EaseInOut(o,t,r,i){return(o/=i/2)<1?r/2*o*o+t:-r/2*(--o*(o-2)-1)+t},StrongEaseIn(o,t,r,i){return r*(o/=i)*o*o*o*o+t},StrongEaseOut(o,t,r,i){return r*((o=o/i-1)*o*o*o*o+1)+t},StrongEaseInOut(o,t,r,i){return(o/=i/2)<1?r/2*o*o*o*o*o+t:r/2*((o-=2)*o*o*o*o+2)+t},Linear(o,t,r,i){return r*o/i+t}},Cn=P._assign(b,{Util:P,Transform:ae,Node:F,Container:oe,Stage:Ui,stages:Tr,Layer:kn,FastLayer:La,Group:qn,DD:ft,Shape:G,shapes:Rr,Animation:ye,Tween:vt,Easings:Ar,Context:Hi,Canvas:Ta});class Ue extends G{_sceneFunc(t){const r=b.getAngle(this.angle()),i=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,r,i),t.arc(0,0,this.innerRadius(),r,0,!i),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),r=this.outerRadius(),i=this.clockwise(),a=b.getAngle(i?360-this.angle():this.angle()),h=Math.cos(Math.min(a,Math.PI)),l=1,d=Math.sin(Math.min(Math.max(Math.PI,a),3*Math.PI/2)),f=Math.sin(Math.min(a,Math.PI/2)),p=h*(h>0?t:r),m=l*r,_=d*(d>0?t:r),v=f*(f>0?r:t);return{x:p,y:i?-1*v:_,width:m-p,height:v-_}}}Ue.prototype._centroid=!0;Ue.prototype.className="Arc";Ue.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];Rt(Ue);S.addGetterSetter(Ue,"innerRadius",0,z());S.addGetterSetter(Ue,"outerRadius",0,z());S.addGetterSetter(Ue,"angle",0,z());S.addGetterSetter(Ue,"clockwise",!1,Pe());function Sa(o,t,r,i,a,h,l){const d=Math.sqrt(Math.pow(r-o,2)+Math.pow(i-t,2)),f=Math.sqrt(Math.pow(a-r,2)+Math.pow(h-i,2)),p=l*d/(d+f),m=l*f/(d+f),_=r-p*(a-o),v=i-p*(h-t),w=r+m*(a-o),x=i+m*(h-t);return[_,v,w,x]}function Ul(o,t){const r=o.length,i=[];for(let a=2;a<r-2;a+=2){const h=Sa(o[a-2],o[a-1],o[a],o[a+1],o[a+2],o[a+3],t);isNaN(h[0])||(i.push(h[0]),i.push(h[1]),i.push(o[a]),i.push(o[a+1]),i.push(h[2]),i.push(h[3]))}return i}class Ye extends G{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){const r=this.points(),i=r.length,a=this.tension(),h=this.closed(),l=this.bezier();if(!i)return;let d=0;if(t.beginPath(),t.moveTo(r[0],r[1]),a!==0&&i>4){const f=this.getTensionPoints(),p=f.length;for(d=h?0:4,h||t.quadraticCurveTo(f[0],f[1],f[2],f[3]);d<p-2;)t.bezierCurveTo(f[d++],f[d++],f[d++],f[d++],f[d++],f[d++]);h||t.quadraticCurveTo(f[p-2],f[p-1],r[i-2],r[i-1])}else if(l)for(d=2;d<i;)t.bezierCurveTo(r[d++],r[d++],r[d++],r[d++],r[d++],r[d++]);else for(d=2;d<i;d+=2)t.lineTo(r[d],r[d+1]);h?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():Ul(this.points(),this.tension())}_getTensionPointsClosed(){const t=this.points(),r=t.length,i=this.tension(),a=Sa(t[r-2],t[r-1],t[0],t[1],t[2],t[3],i),h=Sa(t[r-4],t[r-3],t[r-2],t[r-1],t[0],t[1],i),l=Ul(t,i);return[a[2],a[3]].concat(l).concat([h[0],h[1],t[r-2],t[r-1],h[2],h[3],a[0],a[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:t=this.points();let r=t[0],i=t[0],a=t[1],h=t[1],l,d;for(let f=0;f<t.length/2;f++)l=t[f*2],d=t[f*2+1],r=Math.min(r,l),i=Math.max(i,l),a=Math.min(a,d),h=Math.max(h,d);return{x:r,y:a,width:i-r,height:h-a}}}Ye.prototype.className="Line";Ye.prototype._attrsAffectingSize=["points","bezier","tension"];Rt(Ye);S.addGetterSetter(Ye,"closed",!1);S.addGetterSetter(Ye,"bezier",!1);S.addGetterSetter(Ye,"tension",0,z());S.addGetterSetter(Ye,"points",[],cd());const Kd=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],Jd=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],Zd=[[1],[1,1],[1,2,1],[1,3,3,1]],Yl=(o,t,r)=>{let i,a;const l=r/2;i=0;for(let d=0;d<20;d++)a=l*Kd[20][d]+l,i+=Jd[20][d]*$d(o,t,a);return l*i},Xl=(o,t,r)=>{r===void 0&&(r=1);const i=o[0]-2*o[1]+o[2],a=t[0]-2*t[1]+t[2],h=2*o[1]-2*o[0],l=2*t[1]-2*t[0],d=4*(i*i+a*a),f=4*(i*h+a*l),p=h*h+l*l;if(d===0)return r*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(t[2]-t[0],2));const m=f/(2*d),_=p/d,v=r+m,w=_-m*m,x=v*v+w>0?Math.sqrt(v*v+w):0,M=m*m+w>0?Math.sqrt(m*m+w):0,A=m+Math.sqrt(m*m+w)!==0?w*Math.log(Math.abs((v+x)/(m+M))):0;return Math.sqrt(d)/2*(v*x-m*M+A)};function $d(o,t,r){const i=xa(1,r,o),a=xa(1,r,t),h=i*i+a*a;return Math.sqrt(h)}const xa=(o,t,r)=>{const i=r.length-1;let a,h;if(i===0)return 0;if(o===0){h=0;for(let l=0;l<=i;l++)h+=Zd[i][l]*Math.pow(1-t,i-l)*Math.pow(t,l)*r[l];return h}else{a=new Array(i);for(let l=0;l<i;l++)a[l]=i*(r[l+1]-r[l]);return xa(o-1,t,a)}},jl=(o,t,r)=>{let i=1,a=o/t,h=(o-r(a))/t,l=0;for(;i>.001;){const d=r(a+h),f=Math.abs(o-d)/t;if(f<i)i=f,a+=h;else{const p=r(a-h),m=Math.abs(o-p)/t;m<i?(i=m,a-=h):h/=2}if(l++,l>500)break}return a};class _t extends G{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=_t.parsePathData(this.data()),this.pathLength=_t.getPathLength(this.dataArray)}_sceneFunc(t){const r=this.dataArray;t.beginPath();let i=!1;for(let a=0;a<r.length;a++){const h=r[a].command,l=r[a].points;switch(h){case"L":t.lineTo(l[0],l[1]);break;case"M":t.moveTo(l[0],l[1]);break;case"C":t.bezierCurveTo(l[0],l[1],l[2],l[3],l[4],l[5]);break;case"Q":t.quadraticCurveTo(l[0],l[1],l[2],l[3]);break;case"A":const d=l[0],f=l[1],p=l[2],m=l[3],_=l[4],v=l[5],w=l[6],x=l[7],M=p>m?p:m,A=p>m?1:p/m,L=p>m?m/p:1;t.translate(d,f),t.rotate(w),t.scale(A,L),t.arc(0,0,M,_,_+v,1-x),t.scale(1/A,1/L),t.rotate(-w),t.translate(-d,-f);break;case"z":i=!0,t.closePath();break}}!i&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){let t=[];this.dataArray.forEach(function(f){if(f.command==="A"){const p=f.points[4],m=f.points[5],_=f.points[4]+m;let v=Math.PI/180;if(Math.abs(p-_)<v&&(v=Math.abs(p-_)),m<0)for(let w=p-v;w>_;w-=v){const x=_t.getPointOnEllipticalArc(f.points[0],f.points[1],f.points[2],f.points[3],w,0);t.push(x.x,x.y)}else for(let w=p+v;w<_;w+=v){const x=_t.getPointOnEllipticalArc(f.points[0],f.points[1],f.points[2],f.points[3],w,0);t.push(x.x,x.y)}}else if(f.command==="C")for(let p=0;p<=1;p+=.01){const m=_t.getPointOnCubicBezier(p,f.start.x,f.start.y,f.points[0],f.points[1],f.points[2],f.points[3],f.points[4],f.points[5]);t.push(m.x,m.y)}else t=t.concat(f.points)});let r=t[0],i=t[0],a=t[1],h=t[1],l,d;for(let f=0;f<t.length/2;f++)l=t[f*2],d=t[f*2+1],isNaN(l)||(r=Math.min(r,l),i=Math.max(i,l)),isNaN(d)||(a=Math.min(a,d),h=Math.max(h,d));return{x:r,y:a,width:i-r,height:h-a}}getLength(){return this.pathLength}getPointAtLength(t){return _t.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,r,i,a){return Math.sqrt((i-t)*(i-t)+(a-r)*(a-r))}static getPathLength(t){let r=0;for(let i=0;i<t.length;++i)r+=t[i].pathLength;return r}static getPointAtLengthOfDataArray(t,r){let i,a=0,h=r.length;if(!h)return null;for(;a<h&&t>r[a].pathLength;)t-=r[a].pathLength,++a;if(a===h)return i=r[a-1].points.slice(-2),{x:i[0],y:i[1]};if(t<.01)return r[a].command==="M"?(i=r[a].points.slice(0,2),{x:i[0],y:i[1]}):{x:r[a].start.x,y:r[a].start.y};const l=r[a],d=l.points;switch(l.command){case"L":return _t.getPointOnLine(t,l.start.x,l.start.y,d[0],d[1]);case"C":return _t.getPointOnCubicBezier(jl(t,_t.getPathLength(r),M=>Yl([l.start.x,d[0],d[2],d[4]],[l.start.y,d[1],d[3],d[5]],M)),l.start.x,l.start.y,d[0],d[1],d[2],d[3],d[4],d[5]);case"Q":return _t.getPointOnQuadraticBezier(jl(t,_t.getPathLength(r),M=>Xl([l.start.x,d[0],d[2]],[l.start.y,d[1],d[3]],M)),l.start.x,l.start.y,d[0],d[1],d[2],d[3]);case"A":const f=d[0],p=d[1],m=d[2],_=d[3],v=d[5],w=d[6];let x=d[4];return x+=v*t/l.pathLength,_t.getPointOnEllipticalArc(f,p,m,_,x,w)}return null}static getPointOnLine(t,r,i,a,h,l,d){l=l??r,d=d??i;const f=this.getLineLength(r,i,a,h);if(f<1e-10)return{x:r,y:i};if(a===r)return{x:l,y:d+(h>i?t:-t)};const p=(h-i)/(a-r),m=Math.sqrt(t*t/(1+p*p))*(a<r?-1:1),_=p*m;if(Math.abs(d-i-p*(l-r))<1e-10)return{x:l+m,y:d+_};const v=((l-r)*(a-r)+(d-i)*(h-i))/(f*f),w=r+v*(a-r),x=i+v*(h-i),M=this.getLineLength(l,d,w,x),A=Math.sqrt(t*t-M*M),L=Math.sqrt(A*A/(1+p*p))*(a<r?-1:1),R=p*L;return{x:w+L,y:x+R}}static getPointOnCubicBezier(t,r,i,a,h,l,d,f,p){function m(A){return A*A*A}function _(A){return 3*A*A*(1-A)}function v(A){return 3*A*(1-A)*(1-A)}function w(A){return(1-A)*(1-A)*(1-A)}const x=f*m(t)+l*_(t)+a*v(t)+r*w(t),M=p*m(t)+d*_(t)+h*v(t)+i*w(t);return{x,y:M}}static getPointOnQuadraticBezier(t,r,i,a,h,l,d){function f(w){return w*w}function p(w){return 2*w*(1-w)}function m(w){return(1-w)*(1-w)}const _=l*f(t)+a*p(t)+r*m(t),v=d*f(t)+h*p(t)+i*m(t);return{x:_,y:v}}static getPointOnEllipticalArc(t,r,i,a,h,l){const d=Math.cos(l),f=Math.sin(l),p={x:i*Math.cos(h),y:a*Math.sin(h)};return{x:t+(p.x*d-p.y*f),y:r+(p.x*f+p.y*d)}}static parsePathData(t){if(!t)return[];let r=t;const i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];r=r.replace(new RegExp(" ","g"),",");for(let _=0;_<i.length;_++)r=r.replace(new RegExp(i[_],"g"),"|"+i[_]);const a=r.split("|"),h=[],l=[];let d=0,f=0;const p=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let m;for(let _=1;_<a.length;_++){let v=a[_],w=v.charAt(0);for(v=v.slice(1),l.length=0;m=p.exec(v);)l.push(m[0]);let x=[],M=w==="A"||w==="a"?0:-1;for(let A=0,L=l.length;A<L;A++){const R=l[A];if(R==="00"){x.push(0,0),M>=0&&(M+=2,M>=7&&(M-=7));continue}if(M>=0){if(M===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(R)){x.push(parseInt(R[0],10)),x.push(parseInt(R[1],10)),x.push(parseFloat(R.slice(2))),M+=3,M>=7&&(M-=7);continue}if(R==="11"||R==="10"||R==="01"){x.push(parseInt(R[0],10)),x.push(parseInt(R[1],10)),M+=2,M>=7&&(M-=7);continue}if(R==="0"||R==="1"){x.push(parseInt(R,10)),M+=1,M>=7&&(M-=7);continue}}else if(M===4){if(/^[01]\d+(?:\.\d+)?$/.test(R)){x.push(parseInt(R[0],10)),x.push(parseFloat(R.slice(1))),M+=2,M>=7&&(M-=7);continue}if(R==="0"||R==="1"){x.push(parseInt(R,10)),M+=1,M>=7&&(M-=7);continue}}const N=parseFloat(R);isNaN(N)?x.push(0):x.push(N),M+=1,M>=7&&(M-=7)}else{const N=parseFloat(R);isNaN(N)?x.push(0):x.push(N)}}for(;x.length>0&&!isNaN(x[0]);){let A="",L=[];const R=d,N=f;let O,H,B,U,j,K,et,at,J,ot;switch(w){case"l":d+=x.shift(),f+=x.shift(),A="L",L.push(d,f);break;case"L":d=x.shift(),f=x.shift(),L.push(d,f);break;case"m":const $=x.shift(),Q=x.shift();if(d+=$,f+=Q,A="M",h.length>2&&h[h.length-1].command==="z"){for(let X=h.length-2;X>=0;X--)if(h[X].command==="M"){d=h[X].points[0]+$,f=h[X].points[1]+Q;break}}L.push(d,f),w="l";break;case"M":d=x.shift(),f=x.shift(),A="M",L.push(d,f),w="L";break;case"h":d+=x.shift(),A="L",L.push(d,f);break;case"H":d=x.shift(),A="L",L.push(d,f);break;case"v":f+=x.shift(),A="L",L.push(d,f);break;case"V":f=x.shift(),A="L",L.push(d,f);break;case"C":L.push(x.shift(),x.shift(),x.shift(),x.shift()),d=x.shift(),f=x.shift(),L.push(d,f);break;case"c":L.push(d+x.shift(),f+x.shift(),d+x.shift(),f+x.shift()),d+=x.shift(),f+=x.shift(),A="C",L.push(d,f);break;case"S":H=d,B=f,O=h[h.length-1],O.command==="C"&&(H=d+(d-O.points[2]),B=f+(f-O.points[3])),L.push(H,B,x.shift(),x.shift()),d=x.shift(),f=x.shift(),A="C",L.push(d,f);break;case"s":H=d,B=f,O=h[h.length-1],O.command==="C"&&(H=d+(d-O.points[2]),B=f+(f-O.points[3])),L.push(H,B,d+x.shift(),f+x.shift()),d+=x.shift(),f+=x.shift(),A="C",L.push(d,f);break;case"Q":L.push(x.shift(),x.shift()),d=x.shift(),f=x.shift(),L.push(d,f);break;case"q":L.push(d+x.shift(),f+x.shift()),d+=x.shift(),f+=x.shift(),A="Q",L.push(d,f);break;case"T":H=d,B=f,O=h[h.length-1],O.command==="Q"&&(H=d+(d-O.points[0]),B=f+(f-O.points[1])),d=x.shift(),f=x.shift(),A="Q",L.push(H,B,d,f);break;case"t":H=d,B=f,O=h[h.length-1],O.command==="Q"&&(H=d+(d-O.points[0]),B=f+(f-O.points[1])),d+=x.shift(),f+=x.shift(),A="Q",L.push(H,B,d,f);break;case"A":U=x.shift(),j=x.shift(),K=x.shift(),et=x.shift(),at=x.shift(),J=d,ot=f,d=x.shift(),f=x.shift(),A="A",L=this.convertEndpointToCenterParameterization(J,ot,d,f,et,at,U,j,K);break;case"a":U=x.shift(),j=x.shift(),K=x.shift(),et=x.shift(),at=x.shift(),J=d,ot=f,d+=x.shift(),f+=x.shift(),A="A",L=this.convertEndpointToCenterParameterization(J,ot,d,f,et,at,U,j,K);break}h.push({command:A||w,points:L,start:{x:R,y:N},pathLength:this.calcLength(R,N,A||w,L)})}(w==="z"||w==="Z")&&h.push({command:"z",points:[],start:void 0,pathLength:0})}return h}static calcLength(t,r,i,a){let h,l,d,f;const p=_t;switch(i){case"L":return p.getLineLength(t,r,a[0],a[1]);case"C":return Yl([t,a[0],a[2],a[4]],[r,a[1],a[3],a[5]],1);case"Q":return Xl([t,a[0],a[2]],[r,a[1],a[3]],1);case"A":h=0;const m=a[4],_=a[5],v=a[4]+_;let w=Math.PI/180;if(Math.abs(m-v)<w&&(w=Math.abs(m-v)),l=p.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],m,0),_<0)for(f=m-w;f>v;f-=w)d=p.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],f,0),h+=p.getLineLength(l.x,l.y,d.x,d.y),l=d;else for(f=m+w;f<v;f+=w)d=p.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],f,0),h+=p.getLineLength(l.x,l.y,d.x,d.y),l=d;return d=p.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],v,0),h+=p.getLineLength(l.x,l.y,d.x,d.y),h}return 0}static convertEndpointToCenterParameterization(t,r,i,a,h,l,d,f,p){const m=p*(Math.PI/180),_=Math.cos(m)*(t-i)/2+Math.sin(m)*(r-a)/2,v=-1*Math.sin(m)*(t-i)/2+Math.cos(m)*(r-a)/2,w=_*_/(d*d)+v*v/(f*f);w>1&&(d*=Math.sqrt(w),f*=Math.sqrt(w));let x=Math.sqrt((d*d*(f*f)-d*d*(v*v)-f*f*(_*_))/(d*d*(v*v)+f*f*(_*_)));h===l&&(x*=-1),isNaN(x)&&(x=0);const M=x*d*v/f,A=x*-f*_/d,L=(t+i)/2+Math.cos(m)*M-Math.sin(m)*A,R=(r+a)/2+Math.sin(m)*M+Math.cos(m)*A,N=function(et){return Math.sqrt(et[0]*et[0]+et[1]*et[1])},O=function(et,at){return(et[0]*at[0]+et[1]*at[1])/(N(et)*N(at))},H=function(et,at){return(et[0]*at[1]<et[1]*at[0]?-1:1)*Math.acos(O(et,at))},B=H([1,0],[(_-M)/d,(v-A)/f]),U=[(_-M)/d,(v-A)/f],j=[(-1*_-M)/d,(-1*v-A)/f];let K=H(U,j);return O(U,j)<=-1&&(K=Math.PI),O(U,j)>=1&&(K=0),l===0&&K>0&&(K=K-2*Math.PI),l===1&&K<0&&(K=K+2*Math.PI),[L,R,d,f,B,K,m,l]}}_t.prototype.className="Path";_t.prototype._attrsAffectingSize=["data"];Rt(_t);S.addGetterSetter(_t,"data");class En extends Ye{_sceneFunc(t){super._sceneFunc(t);const r=Math.PI*2,i=this.points();let a=i;const h=this.tension()!==0&&i.length>4;h&&(a=this.getTensionPoints());const l=this.pointerLength(),d=i.length;let f,p;if(h){const v=[a[a.length-4],a[a.length-3],a[a.length-2],a[a.length-1],i[d-2],i[d-1]],w=_t.calcLength(a[a.length-4],a[a.length-3],"C",v),x=_t.getPointOnQuadraticBezier(Math.min(1,1-l/w),v[0],v[1],v[2],v[3],v[4],v[5]);f=i[d-2]-x.x,p=i[d-1]-x.y}else f=i[d-2]-i[d-4],p=i[d-1]-i[d-3];const m=(Math.atan2(p,f)+r)%r,_=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(i[d-2],i[d-1]),t.rotate(m),t.moveTo(0,0),t.lineTo(-l,_/2),t.lineTo(-l,-_/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(i[0],i[1]),h?(f=(a[0]+a[2])/2-i[0],p=(a[1]+a[3])/2-i[1]):(f=i[2]-i[0],p=i[3]-i[1]),t.rotate((Math.atan2(-p,-f)+r)%r),t.moveTo(0,0),t.lineTo(-l,_/2),t.lineTo(-l,-_/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){const r=this.dashEnabled();r&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),r&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),r=this.pointerWidth()/2;return{x:t.x,y:t.y-r,width:t.width,height:t.height+r*2}}}En.prototype.className="Arrow";Rt(En);S.addGetterSetter(En,"pointerLength",10,z());S.addGetterSetter(En,"pointerWidth",10,z());S.addGetterSetter(En,"pointerAtBeginning",!1);S.addGetterSetter(En,"pointerAtEnding",!0);class Qn extends G{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}Qn.prototype._centroid=!0;Qn.prototype.className="Circle";Qn.prototype._attrsAffectingSize=["radius"];Rt(Qn);S.addGetterSetter(Qn,"radius",0,z());class on extends G{_sceneFunc(t){const r=this.radiusX(),i=this.radiusY();t.beginPath(),t.save(),r!==i&&t.scale(1,i/r),t.arc(0,0,r,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}on.prototype.className="Ellipse";on.prototype._centroid=!0;on.prototype._attrsAffectingSize=["radiusX","radiusY"];Rt(on);S.addComponentsGetterSetter(on,"radius",["x","y"]);S.addGetterSetter(on,"radiusX",0,z());S.addGetterSetter(on,"radiusY",0,z());let Ne=class Mh extends G{constructor(t){super(t),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",r=>{this._removeImageLoad(r.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",this._loadListener)}_removeImageLoad(t){t&&t.removeEventListener&&t.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const t=!!this.cornerRadius(),r=this.hasShadow();return t&&r?!0:super._useBufferCanvas(!0)}_sceneFunc(t){const r=this.getWidth(),i=this.getHeight(),a=this.cornerRadius(),h=this.attrs.image;let l;if(h){const d=this.attrs.cropWidth,f=this.attrs.cropHeight;d&&f?l=[h,this.cropX(),this.cropY(),d,f,0,0,r,i]:l=[h,0,0,r,i]}(this.hasFill()||this.hasStroke()||a)&&(t.beginPath(),a?P.drawRoundedRectPath(t,r,i,a):t.rect(0,0,r,i),t.closePath(),t.fillStrokeShape(this)),h&&(a&&t.clip(),t.drawImage.apply(t,l))}_hitFunc(t){const r=this.width(),i=this.height(),a=this.cornerRadius();t.beginPath(),a?P.drawRoundedRectPath(t,r,i,a):t.rect(0,0,r,i),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,r;return(t=this.attrs.width)!==null&&t!==void 0?t:(r=this.image())===null||r===void 0?void 0:r.width}getHeight(){var t,r;return(t=this.attrs.height)!==null&&t!==void 0?t:(r=this.image())===null||r===void 0?void 0:r.height}static fromURL(t,r,i=null){const a=P.createImageElement();a.onload=function(){const h=new Mh({image:a});r(h)},a.onerror=i,a.crossOrigin="Anonymous",a.src=t}};Ne.prototype.className="Image";Rt(Ne);S.addGetterSetter(Ne,"cornerRadius",0,Wi(4));S.addGetterSetter(Ne,"image");S.addComponentsGetterSetter(Ne,"crop",["x","y","width","height"]);S.addGetterSetter(Ne,"cropX",0,z());S.addGetterSetter(Ne,"cropY",0,z());S.addGetterSetter(Ne,"cropWidth",0,z());S.addGetterSetter(Ne,"cropHeight",0,z());const Lh=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],t0="Change.konva",e0="none",wa="up",Ca="right",Pa="down",ka="left",n0=Lh.length;class Ia extends qn{constructor(t){super(t),this.on("add.konva",function(r){this._addListeners(r.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){let r=this,i;const a=function(){r._sync()};for(i=0;i<n0;i++)t.on(Lh[i]+t0,a)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let t=this.getText(),r=this.getTag(),i,a,h,l,d,f,p;if(t&&r){switch(i=t.width(),a=t.height(),h=r.pointerDirection(),l=r.pointerWidth(),p=r.pointerHeight(),d=0,f=0,h){case wa:d=i/2,f=-1*p;break;case Ca:d=i+l,f=a/2;break;case Pa:d=i/2,f=a+p;break;case ka:d=-1*l,f=a/2;break}r.setAttrs({x:-1*d,y:-1*f,width:i,height:a}),t.setAttrs({x:-1*d,y:-1*f})}}}Ia.prototype.className="Label";Rt(Ia);class Tn extends G{_sceneFunc(t){const r=this.width(),i=this.height(),a=this.pointerDirection(),h=this.pointerWidth(),l=this.pointerHeight(),d=this.cornerRadius();let f=0,p=0,m=0,_=0;typeof d=="number"?f=p=m=_=Math.min(d,r/2,i/2):(f=Math.min(d[0]||0,r/2,i/2),p=Math.min(d[1]||0,r/2,i/2),_=Math.min(d[2]||0,r/2,i/2),m=Math.min(d[3]||0,r/2,i/2)),t.beginPath(),t.moveTo(f,0),a===wa&&(t.lineTo((r-h)/2,0),t.lineTo(r/2,-1*l),t.lineTo((r+h)/2,0)),t.lineTo(r-p,0),t.arc(r-p,p,p,Math.PI*3/2,0,!1),a===Ca&&(t.lineTo(r,(i-l)/2),t.lineTo(r+h,i/2),t.lineTo(r,(i+l)/2)),t.lineTo(r,i-_),t.arc(r-_,i-_,_,0,Math.PI/2,!1),a===Pa&&(t.lineTo((r+h)/2,i),t.lineTo(r/2,i+l),t.lineTo((r-h)/2,i)),t.lineTo(m,i),t.arc(m,i-m,m,Math.PI/2,Math.PI,!1),a===ka&&(t.lineTo(0,(i+l)/2),t.lineTo(-1*h,i/2),t.lineTo(0,(i-l)/2)),t.lineTo(0,f),t.arc(f,f,f,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){let t=0,r=0,i=this.pointerWidth(),a=this.pointerHeight(),h=this.pointerDirection(),l=this.width(),d=this.height();return h===wa?(r-=a,d+=a):h===Pa?d+=a:h===ka?(t-=i*1.5,l+=i):h===Ca&&(l+=i*1.5),{x:t,y:r,width:l,height:d}}}Tn.prototype.className="Tag";Rt(Tn);S.addGetterSetter(Tn,"pointerDirection",e0);S.addGetterSetter(Tn,"pointerWidth",0,z());S.addGetterSetter(Tn,"pointerHeight",0,z());S.addGetterSetter(Tn,"cornerRadius",0,Wi(4));class Lr extends G{_sceneFunc(t){const r=this.cornerRadius(),i=this.width(),a=this.height();t.beginPath(),r?P.drawRoundedRectPath(t,i,a,r):t.rect(0,0,i,a),t.closePath(),t.fillStrokeShape(this)}}Lr.prototype.className="Rect";Rt(Lr);S.addGetterSetter(Lr,"cornerRadius",0,Wi(4));class ln extends G{_sceneFunc(t){const r=this._getPoints(),i=this.radius(),a=this.sides(),h=this.cornerRadius();if(t.beginPath(),h)P.drawRoundedPolygonPath(t,r,a,i,h);else{t.moveTo(r[0].x,r[0].y);for(let l=1;l<r.length;l++)t.lineTo(r[l].x,r[l].y)}t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,r=this.attrs.radius||0,i=[];for(let a=0;a<t;a++)i.push({x:r*Math.sin(a*2*Math.PI/t),y:-1*r*Math.cos(a*2*Math.PI/t)});return i}getSelfRect(){const t=this._getPoints();let r=t[0].x,i=t[0].y,a=t[0].x,h=t[0].y;return t.forEach(l=>{r=Math.min(r,l.x),i=Math.max(i,l.x),a=Math.min(a,l.y),h=Math.max(h,l.y)}),{x:r,y:a,width:i-r,height:h-a}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}ln.prototype.className="RegularPolygon";ln.prototype._centroid=!0;ln.prototype._attrsAffectingSize=["radius"];Rt(ln);S.addGetterSetter(ln,"radius",0,z());S.addGetterSetter(ln,"sides",0,z());S.addGetterSetter(ln,"cornerRadius",0,Wi(4));const Vl=Math.PI*2;class Rn extends G{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,Vl,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),Vl,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Rn.prototype.className="Ring";Rn.prototype._centroid=!0;Rn.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Rt(Rn);S.addGetterSetter(Rn,"innerRadius",0,z());S.addGetterSetter(Rn,"outerRadius",0,z());class Oe extends G{constructor(t){super(t),this._updated=!0,this.anim=new ye(()=>{const r=this._updated;return this._updated=!1,r}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){const r=this.animation(),i=this.frameIndex(),a=i*4,h=this.animations()[r],l=this.frameOffsets(),d=h[a+0],f=h[a+1],p=h[a+2],m=h[a+3],_=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,p,m),t.closePath(),t.fillStrokeShape(this)),_)if(l){const v=l[r],w=i*2;t.drawImage(_,d,f,p,m,v[w+0],v[w+1],p,m)}else t.drawImage(_,d,f,p,m,0,0,p,m)}_hitFunc(t){const r=this.animation(),i=this.frameIndex(),a=i*4,h=this.animations()[r],l=this.frameOffsets(),d=h[a+2],f=h[a+3];if(t.beginPath(),l){const p=l[r],m=i*2;t.rect(p[m+0],p[m+1],d,f)}else t.rect(0,0,d,f);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const t=this.frameIndex(),r=this.animation(),i=this.animations(),a=i[r],h=a.length/4;t<h-1?this.frameIndex(t+1):this.frameIndex(0)}}Oe.prototype.className="Sprite";Rt(Oe);S.addGetterSetter(Oe,"animation");S.addGetterSetter(Oe,"animations");S.addGetterSetter(Oe,"frameOffsets");S.addGetterSetter(Oe,"image");S.addGetterSetter(Oe,"frameIndex",0,z());S.addGetterSetter(Oe,"frameRate",17,z());S.backCompat(Oe,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class hn extends G{_sceneFunc(t){const r=this.innerRadius(),i=this.outerRadius(),a=this.numPoints();t.beginPath(),t.moveTo(0,0-i);for(let h=1;h<a*2;h++){const l=h%2===0?i:r,d=l*Math.sin(h*Math.PI/a),f=-1*l*Math.cos(h*Math.PI/a);t.lineTo(d,f)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}hn.prototype.className="Star";hn.prototype._centroid=!0;hn.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Rt(hn);S.addGetterSetter(hn,"numPoints",5,z());S.addGetterSetter(hn,"innerRadius",0,z());S.addGetterSetter(hn,"outerRadius",0,z());function rn(o){return[...o].reduce((t,r,i,a)=>{if(/\p{Emoji}/u.test(r)){const h=a[i+1];h&&/\p{Emoji_Modifier}|\u200D/u.test(h)?(t.push(r+h),a[i+1]=""):t.push(r)}else/\p{Regional_Indicator}{2}/u.test(r+(a[i+1]||""))?t.push(r+a[i+1]):i>0&&/\p{Mn}|\p{Me}|\p{Mc}/u.test(r)?t[t.length-1]+=r:r&&t.push(r);return t},[])}const Xn="auto",r0="center",Ih="inherit",jn="justify",i0="Change.konva",s0="2d",ql="-",Nh="left",a0="text",o0="Text",l0="top",h0="bottom",Ql="middle",Oh="normal",u0="px ",Oi=" ",c0="right",Kl="rtl",d0="word",f0="char",Jl="none",fa="…",Gh=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],g0=Gh.length;function p0(o){return o.split(",").map(t=>{t=t.trim();const r=t.indexOf(" ")>=0,i=t.indexOf('"')>=0||t.indexOf("'")>=0;return r&&!i&&(t=`"${t}"`),t}).join(", ")}let Gi;function ga(){return Gi||(Gi=P.createCanvasElement().getContext(s0),Gi)}function m0(o){o.fillText(this._partialText,this._partialTextX,this._partialTextY)}function y0(o){o.setAttr("miterLimit",2),o.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function v0(o){return o=o||{},!o.fillLinearGradientColorStops&&!o.fillRadialGradientColorStops&&!o.fillPatternImage&&(o.fill=o.fill||"black"),o}class wt extends G{constructor(t){super(v0(t)),this._partialTextX=0,this._partialTextY=0;for(let r=0;r<g0;r++)this.on(Gh[r]+i0,this._setTextData);this._setTextData()}_sceneFunc(t){var r,i;const a=this.textArr,h=a.length;if(!this.text())return;let l=this.padding(),d=this.fontSize(),f=this.lineHeight()*d,p=this.verticalAlign(),m=this.direction(),_=0,v=this.align(),w=this.getWidth(),x=this.letterSpacing(),M=this.charRenderFunc(),A=this.fill(),L=this.textDecoration(),R=L.indexOf("underline")!==-1,N=L.indexOf("line-through")!==-1,O;m=m===Ih?t.direction:m;let H=f/2,B=Ql;if(!b.legacyTextRendering){const U=this.measureSize("M");B="alphabetic";const j=(r=U.fontBoundingBoxAscent)!==null&&r!==void 0?r:U.actualBoundingBoxAscent,K=(i=U.fontBoundingBoxDescent)!==null&&i!==void 0?i:U.actualBoundingBoxDescent;H=(j-K)/2+f/2}for(m===Kl&&t.setAttr("direction",m),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",B),t.setAttr("textAlign",Nh),p===Ql?_=(this.getHeight()-h*f-l*2)/2:p===h0&&(_=this.getHeight()-h*f-l*2),t.translate(l,_+l),O=0;O<h;O++){let U=0,j=0;const K=a[O],et=K.text,at=K.width,J=K.lastInParagraph;if(t.save(),v===c0?U+=w-at-l*2:v===r0&&(U+=(w-at-l*2)/2),R){t.save(),t.beginPath();const ot=b.legacyTextRendering?Math.round(d/2):Math.round(d/4),$=U,Q=H+j+ot;t.moveTo($,Q);const X=v===jn&&!J?w-l*2:at;t.lineTo($+Math.round(X),Q),t.lineWidth=d/15;const Lt=this._getLinearGradient();t.strokeStyle=Lt||A,t.stroke(),t.restore()}if(m!==Kl&&(x!==0||v===jn||M)){const ot=et.split(" ").length-1,$=rn(et);for(let Q=0;Q<$.length;Q++){const X=$[Q];if(X===" "&&!J&&v===jn&&(U+=(w-l*2-at)/ot),this._partialTextX=U,this._partialTextY=H+j,this._partialText=X,M){t.save();const tt=a.slice(0,O).reduce((At,dt)=>At+rn(dt.text).length,0),gt=Q+tt;M({char:X,index:gt,x:U,y:H+j,lineIndex:O,column:Q,isLastInLine:J,width:this.measureSize(X).width,context:t})}t.fillStrokeShape(this),M&&t.restore(),U+=this.measureSize(X).width+x}}else x!==0&&t.setAttr("letterSpacing",`${x}px`),this._partialTextX=U,this._partialTextY=H+j,this._partialText=et,t.fillStrokeShape(this);if(N){t.save(),t.beginPath();const ot=b.legacyTextRendering?0:-Math.round(d/4),$=v===jn?0:U;t.moveTo($,H+j+ot);const Q=v===jn&&!J?w-l*2:at;t.lineTo($+Math.round(Q),H+j+ot),t.lineWidth=d/15;const X=this._getLinearGradient();t.strokeStyle=X||A,t.stroke(),t.restore()}t.restore(),h>1&&(H+=f)}}_hitFunc(t){const r=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,r,i),t.closePath(),t.fillStrokeShape(this)}setText(t){const r=P._isString(t)?t:t==null?"":t+"";return this._setAttr(a0,r),this}getWidth(){return this.attrs.width===Xn||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===Xn||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return P.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var r,i,a,h,l,d,f,p,m,_,v;let w=ga(),x=this.fontSize(),M;w.save(),w.font=this._getContextFont(),M=w.measureText(t),w.restore();const A=x/100;return{actualBoundingBoxAscent:(r=M.actualBoundingBoxAscent)!==null&&r!==void 0?r:71.58203125*A,actualBoundingBoxDescent:(i=M.actualBoundingBoxDescent)!==null&&i!==void 0?i:0,actualBoundingBoxLeft:(a=M.actualBoundingBoxLeft)!==null&&a!==void 0?a:-7.421875*A,actualBoundingBoxRight:(h=M.actualBoundingBoxRight)!==null&&h!==void 0?h:75.732421875*A,alphabeticBaseline:(l=M.alphabeticBaseline)!==null&&l!==void 0?l:0,emHeightAscent:(d=M.emHeightAscent)!==null&&d!==void 0?d:100*A,emHeightDescent:(f=M.emHeightDescent)!==null&&f!==void 0?f:-20*A,fontBoundingBoxAscent:(p=M.fontBoundingBoxAscent)!==null&&p!==void 0?p:91*A,fontBoundingBoxDescent:(m=M.fontBoundingBoxDescent)!==null&&m!==void 0?m:21*A,hangingBaseline:(_=M.hangingBaseline)!==null&&_!==void 0?_:72.80000305175781*A,ideographicBaseline:(v=M.ideographicBaseline)!==null&&v!==void 0?v:-21*A,width:M.width,height:x}}_getContextFont(){return this.fontStyle()+Oi+this.fontVariant()+Oi+(this.fontSize()+u0)+p0(this.fontFamily())}_addTextLine(t){this.align()===jn&&(t=t.trim());const i=this._getTextWidth(t);return this.textArr.push({text:t,width:i,lastInParagraph:!1})}_getTextWidth(t){const r=this.letterSpacing(),i=t.length;return ga().measureText(t).width+r*i}_setTextData(){let t=this.text().split(`
`),r=+this.fontSize(),i=0,a=this.lineHeight()*r,h=this.attrs.width,l=this.attrs.height,d=h!==Xn&&h!==void 0,f=l!==Xn&&l!==void 0,p=this.padding(),m=h-p*2,_=l-p*2,v=0,w=this.wrap(),x=w!==Jl,M=w!==f0&&x,A=this.ellipsis();this.textArr=[],ga().font=this._getContextFont();const L=A?this._getTextWidth(fa):0;for(let R=0,N=t.length;R<N;++R){let O=t[R],H=this._getTextWidth(O);if(d&&H>m)for(;O.length>0;){let B=0,U=rn(O).length,j="",K=0;for(;B<U;){const et=B+U>>>1,at=rn(O),J=at.slice(0,et+1).join(""),ot=this._getTextWidth(J);(A&&f&&v+a>_?ot+L:ot)<=m?(B=et+1,j=J,K=ot):U=et}if(j){if(M){const J=rn(O),ot=rn(j),$=J[ot.length],Q=$===Oi||$===ql;let X;if(Q&&K<=m)X=ot.length;else{const Lt=ot.lastIndexOf(Oi),tt=ot.lastIndexOf(ql);X=Math.max(Lt,tt)+1}X>0&&(B=X,j=J.slice(0,B).join(""),K=this._getTextWidth(j))}if(j=j.trimRight(),this._addTextLine(j),i=Math.max(i,K),v+=a,this._shouldHandleEllipsis(v)){this._tryToAddEllipsisToLastLine();break}if(O=rn(O).slice(B).join("").trimLeft(),O.length>0&&(H=this._getTextWidth(O),H<=m)){this._addTextLine(O),v+=a,i=Math.max(i,H);break}}else break}else this._addTextLine(O),v+=a,i=Math.max(i,H),this._shouldHandleEllipsis(v)&&R<N-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),f&&v+a>_)break}this.textHeight=r,this.textWidth=i}_shouldHandleEllipsis(t){const r=+this.fontSize(),i=this.lineHeight()*r,a=this.attrs.height,h=a!==Xn&&a!==void 0,l=this.padding(),d=a-l*2;return!(this.wrap()!==Jl)||h&&t+i>d}_tryToAddEllipsisToLastLine(){const t=this.attrs.width,r=t!==Xn&&t!==void 0,i=this.padding(),a=t-i*2,h=this.ellipsis(),l=this.textArr[this.textArr.length-1];!l||!h||(r&&(this._getTextWidth(l.text+fa)<a||(l.text=l.text.slice(0,l.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(l.text+fa))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,r=this.hasShadow();return t&&r?!0:super._useBufferCanvas()}}wt.prototype._fillFunc=m0;wt.prototype._strokeFunc=y0;wt.prototype.className=o0;wt.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];Rt(wt);S.overWriteSetter(wt,"width",Aa());S.overWriteSetter(wt,"height",Aa());S.addGetterSetter(wt,"direction",Ih);S.addGetterSetter(wt,"fontFamily","Arial");S.addGetterSetter(wt,"fontSize",12,z());S.addGetterSetter(wt,"fontStyle",Oh);S.addGetterSetter(wt,"fontVariant",Oh);S.addGetterSetter(wt,"padding",0,z());S.addGetterSetter(wt,"align",Nh);S.addGetterSetter(wt,"verticalAlign",l0);S.addGetterSetter(wt,"lineHeight",1,z());S.addGetterSetter(wt,"wrap",d0);S.addGetterSetter(wt,"ellipsis",!1,Pe());S.addGetterSetter(wt,"letterSpacing",0,z());S.addGetterSetter(wt,"text","",Pn());S.addGetterSetter(wt,"textDecoration","");S.addGetterSetter(wt,"charRenderFunc",void 0);const _0="",Dh="normal";function Fh(o){o.fillText(this.partialText,0,0)}function zh(o){o.strokeText(this.partialText,0,0)}class Gt extends G{constructor(t){super(t),this.dummyCanvas=P.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return _t.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;const r=this.pathLength;return t>r?null:_t.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=_t.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();const r=this.textDecoration(),i=this.fill(),a=this.fontSize(),h=this.glyphInfo,l=r.indexOf("underline")!==-1,d=r.indexOf("line-through")!==-1;l&&t.beginPath();for(let f=0;f<h.length;f++){t.save();const p=h[f].p0;t.translate(p.x,p.y),t.rotate(h[f].rotation),this.partialText=h[f].text,t.fillStrokeShape(this),l&&(f===0&&t.moveTo(0,a/2+1),t.lineTo(h[f].width,a/2+1)),t.restore()}if(l&&(t.strokeStyle=i,t.lineWidth=a/20,t.stroke()),d){t.beginPath();for(let f=0;f<h.length;f++){t.save();const p=h[f].p0;t.translate(p.x,p.y),t.rotate(h[f].rotation),f===0&&t.moveTo(0,0),t.lineTo(h[f].width,0),t.restore()}t.strokeStyle=i,t.lineWidth=a/20,t.stroke()}t.restore()}_hitFunc(t){t.beginPath();const r=this.glyphInfo;if(r.length>=1){const i=r[0].p0;t.moveTo(i.x,i.y)}for(let i=0;i<r.length;i++){const a=r[i].p1;t.lineTo(a.x,a.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return P.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return wt.prototype.setText.call(this,t)}_getContextFont(){return wt.prototype._getContextFont.call(this)}_getTextSize(t){const i=this.dummyCanvas.getContext("2d");i.save(),i.font=this._getContextFont();const a=i.measureText(t);return i.restore(),{width:a.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const t=rn(this.text()),r=[];let i=0;for(let _=0;_<t.length;_++)r.push({char:t[_],width:this._getTextSize(t[_]).width}),i+=r[_].width;const{height:a}=this._getTextSize(this.attrs.text);if(this.textWidth=i,this.textHeight=a,this.glyphInfo=[],!this.attrs.data)return null;const h=this.letterSpacing(),l=this.align(),d=this.kerningFunc(),f=Math.max(this.textWidth+((this.attrs.text||"").length-1)*h,0);let p=0;l==="center"&&(p=Math.max(0,this.pathLength/2-f/2)),l==="right"&&(p=Math.max(0,this.pathLength-f));let m=p;for(let _=0;_<r.length;_++){const v=this._getPointAtLength(m);if(!v)return;const w=r[_].char;let x=r[_].width+h;if(w===" "&&l==="justify"){const O=this.text().split(" ").length-1;x+=(this.pathLength-f)/O}const M=this._getPointAtLength(m+x);if(!M)return;const A=_t.getLineLength(v.x,v.y,M.x,M.y);let L=0;if(d)try{L=d(r[_-1].char,w)*this.fontSize()}catch{L=0}v.x+=L,M.x+=L,this.textWidth+=L;const R=_t.getPointOnLine(L+A/2,v.x,v.y,M.x,M.y),N=Math.atan2(M.y-v.y,M.x-v.x);this.glyphInfo.push({transposeX:R.x,transposeY:R.y,text:t[_],rotation:N,p0:v,p1:M,width:A}),m+=x}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const t=[];this.glyphInfo.forEach(function(p){t.push(p.p0.x),t.push(p.p0.y),t.push(p.p1.x),t.push(p.p1.y)});let r=t[0]||0,i=t[0]||0,a=t[1]||0,h=t[1]||0,l,d;for(let p=0;p<t.length/2;p++)l=t[p*2],d=t[p*2+1],r=Math.min(r,l),i=Math.max(i,l),a=Math.min(a,d),h=Math.max(h,d);const f=this.fontSize();return{x:r-f/2,y:a-f/2,width:i-r+f,height:h-a+f}}destroy(){return P.releaseCanvas(this.dummyCanvas),super.destroy()}}Gt.prototype._fillFunc=Fh;Gt.prototype._strokeFunc=zh;Gt.prototype._fillFuncHit=Fh;Gt.prototype._strokeFuncHit=zh;Gt.prototype.className="TextPath";Gt.prototype._attrsAffectingSize=["text","fontSize","data"];Rt(Gt);S.addGetterSetter(Gt,"data");S.addGetterSetter(Gt,"fontFamily","Arial");S.addGetterSetter(Gt,"fontSize",12,z());S.addGetterSetter(Gt,"fontStyle",Dh);S.addGetterSetter(Gt,"align","left");S.addGetterSetter(Gt,"letterSpacing",0,z());S.addGetterSetter(Gt,"textBaseline","middle");S.addGetterSetter(Gt,"fontVariant",Dh);S.addGetterSetter(Gt,"text",_0);S.addGetterSetter(Gt,"textDecoration","");S.addGetterSetter(Gt,"kerningFunc",void 0);const bh="tr-konva",S0=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(o=>o+`.${bh}`).join(" "),Zl="nodesRect",x0=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],w0={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},C0="ontouchstart"in b._global;function P0(o,t,r){if(o==="rotater")return r;t+=P.degToRad(w0[o]||0);const i=(P.radToDeg(t)%360+360)%360;return P._inRange(i,315+22.5,360)||P._inRange(i,0,22.5)?"ns-resize":P._inRange(i,45-22.5,45+22.5)?"nesw-resize":P._inRange(i,90-22.5,90+22.5)?"ew-resize":P._inRange(i,135-22.5,135+22.5)?"nwse-resize":P._inRange(i,180-22.5,180+22.5)?"ns-resize":P._inRange(i,225-22.5,225+22.5)?"nesw-resize":P._inRange(i,270-22.5,270+22.5)?"ew-resize":P._inRange(i,315-22.5,315+22.5)?"nwse-resize":(P.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}const Bi=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function k0(o){return{x:o.x+o.width/2*Math.cos(o.rotation)+o.height/2*Math.sin(-o.rotation),y:o.y+o.height/2*Math.cos(o.rotation)+o.width/2*Math.sin(o.rotation)}}function Bh(o,t,r){const i=r.x+(o.x-r.x)*Math.cos(t)-(o.y-r.y)*Math.sin(t),a=r.y+(o.x-r.x)*Math.sin(t)+(o.y-r.y)*Math.cos(t);return{...o,rotation:o.rotation+t,x:i,y:a}}function E0(o,t){const r=k0(o);return Bh(o,t,r)}function T0(o,t,r){let i=t;for(let a=0;a<o.length;a++){const h=b.getAngle(o[a]),l=Math.abs(h-t)%(Math.PI*2);Math.min(l,Math.PI*2-l)<r&&(i=h)}return i}let Ea=0,lt=class extends qn{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(S0,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return P.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return bh+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const r=t.filter(a=>a.isAncestorOf(this)?(P.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=t=r,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(a=>{const h=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(a._attrsAffectingSize.length){const l=a._attrsAffectingSize.map(d=>d+"Change."+this._getEventNamespace()).join(" ");a.on(l,h)}a.on(x0.map(l=>l+`.${this._getEventNamespace()}`).join(" "),h),a.on(`absoluteTransformChange.${this._getEventNamespace()}`,h),this._proxyDrag(a)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let r;t.on(`dragstart.${this._getEventNamespace()}`,i=>{r=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(i,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,i=>{if(!r)return;const a=t.getAbsolutePosition(),h=a.x-r.x,l=a.y-r.y;this.nodes().forEach(d=>{if(d===t||d.isDragging())return;const f=d.getAbsolutePosition();d.setAbsolutePosition({x:f.x+h,y:f.y+l}),d.startDrag(i)}),r=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(Zl),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(Zl,this.__getNodeRect)}__getNodeShape(t,r=this.rotation(),i){const a=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),h=t.getAbsoluteScale(i),l=t.getAbsolutePosition(i),d=a.x*h.x-t.offsetX()*h.x,f=a.y*h.y-t.offsetY()*h.y,p=(b.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),m={x:l.x+d*Math.cos(p)+f*Math.sin(-p),y:l.y+f*Math.cos(p)+d*Math.sin(p),width:a.width*h.x,height:a.height*h.y,rotation:p};return Bh(m,-b.getAngle(r),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const r=[];this.nodes().map(p=>{const m=p.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),_=[{x:m.x,y:m.y},{x:m.x+m.width,y:m.y},{x:m.x+m.width,y:m.y+m.height},{x:m.x,y:m.y+m.height}],v=p.getAbsoluteTransform();_.forEach(function(w){const x=v.point(w);r.push(x)})});const i=new ae;i.rotate(-b.getAngle(this.rotation()));let a=1/0,h=1/0,l=-1/0,d=-1/0;r.forEach(function(p){const m=i.point(p);a===void 0&&(a=l=m.x,h=d=m.y),a=Math.min(a,m.x),h=Math.min(h,m.y),l=Math.max(l,m.x),d=Math.max(d,m.y)}),i.invert();const f=i.point({x:a,y:h});return{x:f.x,y:f.y,width:l-a,height:d-h,rotation:b.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Bi.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){const r=new Lr({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:C0?10:"auto"}),i=this;r.on("mousedown touchstart",function(a){i._handleMouseDown(a)}),r.on("dragstart",a=>{r.stopDrag(),a.cancelBubble=!0}),r.on("dragend",a=>{a.cancelBubble=!0}),r.on("mouseenter",()=>{const a=b.getAngle(this.rotation()),h=this.rotateAnchorCursor(),l=P0(t,a,h);r.getStage().content&&(r.getStage().content.style.cursor=l),this._cursorChange=!0}),r.on("mouseout",()=>{r.getStage().content&&(r.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(r)}_createBack(){const t=new G({name:"back",width:0,height:0,sceneFunc(r,i){const a=i.getParent(),h=a.padding();r.beginPath(),r.rect(-h,-h,i.width()+h*2,i.height()+h*2),r.moveTo(i.width()/2,-h),a.rotateEnabled()&&a.rotateLineVisible()&&r.lineTo(i.width()/2,-a.rotateAnchorOffset()*P._sign(i.height())-h),r.fillStrokeShape(i)},hitFunc:(r,i)=>{if(!this.shouldOverdrawWholeArea())return;const a=this.padding();r.beginPath(),r.rect(-a,-a,i.width()+a*2,i.height()+a*2),r.fillStrokeShape(i)}});this.add(t),this._proxyDrag(t),t.on("dragstart",r=>{r.cancelBubble=!0}),t.on("dragmove",r=>{r.cancelBubble=!0}),t.on("dragend",r=>{r.cancelBubble=!0}),this.on("dragmove",r=>{this.update()})}_handleMouseDown(t){if(this._transforming)return;this._movingAnchorName=t.target.name().split(" ")[0];const r=this._getNodeRect(),i=r.width,a=r.height,h=Math.sqrt(Math.pow(i,2)+Math.pow(a,2));this.sin=Math.abs(a/h),this.cos=Math.abs(i/h),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const l=t.target.getAbsolutePosition(),d=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:d.x-l.x,y:d.y-l.y},Ea++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(f=>{f._fire("transformstart",{evt:t.evt,target:f})})}_handleMouseMove(t){let r,i,a;const h=this.findOne("."+this._movingAnchorName),l=h.getStage();l.setPointersPositions(t);const d=l.getPointerPosition();let f={x:d.x-this._anchorDragOffset.x,y:d.y-this._anchorDragOffset.y};const p=h.getAbsolutePosition();this.anchorDragBoundFunc()&&(f=this.anchorDragBoundFunc()(p,f,t)),h.setAbsolutePosition(f);const m=h.getAbsolutePosition();if(p.x===m.x&&p.y===m.y)return;if(this._movingAnchorName==="rotater"){const R=this._getNodeRect();r=h.x()-R.width/2,i=-h.y()+R.height/2;let N=Math.atan2(-i,r)+Math.PI/2;R.height<0&&(N-=Math.PI);const H=b.getAngle(this.rotation())+N,B=b.getAngle(this.rotationSnapTolerance()),j=T0(this.rotationSnaps(),H,B)-R.rotation,K=E0(R,j);this._fitNodesInto(K,t);return}const _=this.shiftBehavior();let v;_==="inverted"?v=this.keepRatio()&&!t.shiftKey:_==="none"?v=this.keepRatio():v=this.keepRatio()||t.shiftKey;let w=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(v){const R=w?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};a=Math.sqrt(Math.pow(R.x-h.x(),2)+Math.pow(R.y-h.y(),2));const N=this.findOne(".top-left").x()>R.x?-1:1,O=this.findOne(".top-left").y()>R.y?-1:1;r=a*this.cos*N,i=a*this.sin*O,this.findOne(".top-left").x(R.x-r),this.findOne(".top-left").y(R.y-i)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(h.y());else if(this._movingAnchorName==="top-right"){if(v){const R=w?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};a=Math.sqrt(Math.pow(h.x()-R.x,2)+Math.pow(R.y-h.y(),2));const N=this.findOne(".top-right").x()<R.x?-1:1,O=this.findOne(".top-right").y()>R.y?-1:1;r=a*this.cos*N,i=a*this.sin*O,this.findOne(".top-right").x(R.x+r),this.findOne(".top-right").y(R.y-i)}var x=h.position();this.findOne(".top-left").y(x.y),this.findOne(".bottom-right").x(x.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(h.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(h.x());else if(this._movingAnchorName==="bottom-left"){if(v){const R=w?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};a=Math.sqrt(Math.pow(R.x-h.x(),2)+Math.pow(h.y()-R.y,2));const N=R.x<h.x()?-1:1,O=h.y()<R.y?-1:1;r=a*this.cos*N,i=a*this.sin*O,h.x(R.x-r),h.y(R.y+i)}x=h.position(),this.findOne(".top-left").x(x.x),this.findOne(".bottom-right").y(x.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(h.y());else if(this._movingAnchorName==="bottom-right"){if(v){const R=w?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};a=Math.sqrt(Math.pow(h.x()-R.x,2)+Math.pow(h.y()-R.y,2));const N=this.findOne(".bottom-right").x()<R.x?-1:1,O=this.findOne(".bottom-right").y()<R.y?-1:1;r=a*this.cos*N,i=a*this.sin*O,this.findOne(".bottom-right").x(R.x+r),this.findOne(".bottom-right").y(R.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(w=this.centeredScaling()||t.altKey,w){const R=this.findOne(".top-left"),N=this.findOne(".bottom-right"),O=R.x(),H=R.y(),B=this.getWidth()-N.x(),U=this.getHeight()-N.y();N.move({x:-O,y:-H}),R.move({x:B,y:U})}const M=this.findOne(".top-left").getAbsolutePosition();r=M.x,i=M.y;const A=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),L=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:r,y:i,width:A,height:L,rotation:b.getAngle(this.rotation())},t)}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var r;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const i=this.getNode();Ea--,this._fire("transformend",{evt:t,target:i}),(r=this.getLayer())===null||r===void 0||r.batchDraw(),i&&this._nodes.forEach(a=>{var h;a._fire("transformend",{evt:t,target:a}),(h=a.getLayer())===null||h===void 0||h.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(t,r){const i=this._getNodeRect(),a=1;if(P._inRange(t.width,-this.padding()*2-a,a)){this.update();return}if(P._inRange(t.height,-this.padding()*2-a,a)){this.update();return}const h=new ae;if(h.rotate(b.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const v=h.point({x:-this.padding()*2,y:0});t.x+=v.x,t.y+=v.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=v.x,this._anchorDragOffset.y-=v.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const v=h.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=v.x,this._anchorDragOffset.y-=v.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const v=h.point({x:0,y:-this.padding()*2});t.x+=v.x,t.y+=v.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=v.x,this._anchorDragOffset.y-=v.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const v=h.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=v.x,this._anchorDragOffset.y-=v.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const v=this.boundBoxFunc()(i,t);v?t=v:P.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const l=1e7,d=new ae;d.translate(i.x,i.y),d.rotate(i.rotation),d.scale(i.width/l,i.height/l);const f=new ae,p=t.width/l,m=t.height/l;this.flipEnabled()===!1?(f.translate(t.x,t.y),f.rotate(t.rotation),f.translate(t.width<0?t.width:0,t.height<0?t.height:0),f.scale(Math.abs(p),Math.abs(m))):(f.translate(t.x,t.y),f.rotate(t.rotation),f.scale(p,m));const _=f.multiply(d.invert());this._nodes.forEach(v=>{var w;if(!v.getStage())return;const x=v.getParent().getAbsoluteTransform(),M=v.getTransform().copy();M.translate(v.offsetX(),v.offsetY());const A=new ae;A.multiply(x.copy().invert()).multiply(_).multiply(x).multiply(M);const L=A.decompose();v.setAttrs(L),(w=v.getLayer())===null||w===void 0||w.batchDraw()}),this.rotation(P._getRotation(t.rotation)),this._nodes.forEach(v=>{this._fire("transform",{evt:r,target:v}),v._fire("transform",{evt:r,target:v})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,r){this.findOne(t).setAttrs(r)}update(){var t;const r=this._getNodeRect();this.rotation(P._getRotation(r.rotation));const i=r.width,a=r.height,h=this.enabledAnchors(),l=this.resizeEnabled(),d=this.padding(),f=this.anchorSize(),p=this.find("._anchor");p.forEach(_=>{_.setAttrs({width:f,height:f,offsetX:f/2,offsetY:f/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:f/2+d,offsetY:f/2+d,visible:l&&h.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:f/2+d,visible:l&&h.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:f/2-d,offsetY:f/2+d,visible:l&&h.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:a/2,offsetX:f/2+d,visible:l&&h.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:a/2,offsetX:f/2-d,visible:l&&h.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:a,offsetX:f/2+d,offsetY:f/2-d,visible:l&&h.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:a,offsetY:f/2-d,visible:l&&h.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:a,offsetX:f/2-d,offsetY:f/2-d,visible:l&&h.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:i/2,y:-this.rotateAnchorOffset()*P._sign(a)-d,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:a,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(_=>_.draggable()),x:0,y:0});const m=this.anchorStyleFunc();m&&p.forEach(_=>{m(_)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),qn.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return F.prototype.toObject.call(this)}clone(t){return F.prototype.clone.call(this,t)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};lt.isTransforming=()=>Ea>0;function R0(o){return o instanceof Array||P.warn("enabledAnchors value should be an array"),o instanceof Array&&o.forEach(function(t){Bi.indexOf(t)===-1&&P.warn("Unknown anchor name: "+t+". Available names are: "+Bi.join(", "))}),o||[]}lt.prototype.className="Transformer";Rt(lt);S.addGetterSetter(lt,"enabledAnchors",Bi,R0);S.addGetterSetter(lt,"flipEnabled",!0,Pe());S.addGetterSetter(lt,"resizeEnabled",!0);S.addGetterSetter(lt,"anchorSize",10,z());S.addGetterSetter(lt,"rotateEnabled",!0);S.addGetterSetter(lt,"rotateLineVisible",!0);S.addGetterSetter(lt,"rotationSnaps",[]);S.addGetterSetter(lt,"rotateAnchorOffset",50,z());S.addGetterSetter(lt,"rotateAnchorCursor","crosshair");S.addGetterSetter(lt,"rotationSnapTolerance",5,z());S.addGetterSetter(lt,"borderEnabled",!0);S.addGetterSetter(lt,"anchorStroke","rgb(0, 161, 255)");S.addGetterSetter(lt,"anchorStrokeWidth",1,z());S.addGetterSetter(lt,"anchorFill","white");S.addGetterSetter(lt,"anchorCornerRadius",0,z());S.addGetterSetter(lt,"borderStroke","rgb(0, 161, 255)");S.addGetterSetter(lt,"borderStrokeWidth",1,z());S.addGetterSetter(lt,"borderDash");S.addGetterSetter(lt,"keepRatio",!0);S.addGetterSetter(lt,"shiftBehavior","default");S.addGetterSetter(lt,"centeredScaling",!1);S.addGetterSetter(lt,"ignoreStroke",!1);S.addGetterSetter(lt,"padding",0,z());S.addGetterSetter(lt,"nodes");S.addGetterSetter(lt,"node");S.addGetterSetter(lt,"boundBoxFunc");S.addGetterSetter(lt,"anchorDragBoundFunc");S.addGetterSetter(lt,"anchorStyleFunc");S.addGetterSetter(lt,"shouldOverdrawWholeArea",!1);S.addGetterSetter(lt,"useSingleNodeRotation",!0);S.backCompat(lt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Xe extends G{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,b.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Xe.prototype.className="Wedge";Xe.prototype._centroid=!0;Xe.prototype._attrsAffectingSize=["radius"];Rt(Xe);S.addGetterSetter(Xe,"radius",0,z());S.addGetterSetter(Xe,"angle",0,z());S.addGetterSetter(Xe,"clockwise",!1);S.backCompat(Xe,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function $l(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const A0=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],M0=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function L0(o,t){const r=o.data,i=o.width,a=o.height;let h,l,d,f,p,m,_,v,w,x,M,A,L,R,N,O,H,B,U,j;const K=t+t+1,et=i-1,at=a-1,J=t+1,ot=J*(J+1)/2,$=new $l,Q=A0[t],X=M0[t];let Lt=null,tt=$,gt=null,At=null;for(let dt=1;dt<K;dt++)tt=tt.next=new $l,dt===J&&(Lt=tt);tt.next=$,d=l=0;for(let dt=0;dt<a;dt++){A=L=R=N=f=p=m=_=0,v=J*(O=r[l]),w=J*(H=r[l+1]),x=J*(B=r[l+2]),M=J*(U=r[l+3]),f+=ot*O,p+=ot*H,m+=ot*B,_+=ot*U,tt=$;for(let kt=0;kt<J;kt++)tt.r=O,tt.g=H,tt.b=B,tt.a=U,tt=tt.next;for(let kt=1;kt<J;kt++)h=l+((et<kt?et:kt)<<2),f+=(tt.r=O=r[h])*(j=J-kt),p+=(tt.g=H=r[h+1])*j,m+=(tt.b=B=r[h+2])*j,_+=(tt.a=U=r[h+3])*j,A+=O,L+=H,R+=B,N+=U,tt=tt.next;gt=$,At=Lt;for(let kt=0;kt<i;kt++)r[l+3]=U=_*Q>>X,U!==0?(U=255/U,r[l]=(f*Q>>X)*U,r[l+1]=(p*Q>>X)*U,r[l+2]=(m*Q>>X)*U):r[l]=r[l+1]=r[l+2]=0,f-=v,p-=w,m-=x,_-=M,v-=gt.r,w-=gt.g,x-=gt.b,M-=gt.a,h=d+((h=kt+t+1)<et?h:et)<<2,A+=gt.r=r[h],L+=gt.g=r[h+1],R+=gt.b=r[h+2],N+=gt.a=r[h+3],f+=A,p+=L,m+=R,_+=N,gt=gt.next,v+=O=At.r,w+=H=At.g,x+=B=At.b,M+=U=At.a,A-=O,L-=H,R-=B,N-=U,At=At.next,l+=4;d+=i}for(let dt=0;dt<i;dt++){L=R=N=A=p=m=_=f=0,l=dt<<2,v=J*(O=r[l]),w=J*(H=r[l+1]),x=J*(B=r[l+2]),M=J*(U=r[l+3]),f+=ot*O,p+=ot*H,m+=ot*B,_+=ot*U,tt=$;for(let Kt=0;Kt<J;Kt++)tt.r=O,tt.g=H,tt.b=B,tt.a=U,tt=tt.next;let kt=i;for(let Kt=1;Kt<=t;Kt++)l=kt+dt<<2,f+=(tt.r=O=r[l])*(j=J-Kt),p+=(tt.g=H=r[l+1])*j,m+=(tt.b=B=r[l+2])*j,_+=(tt.a=U=r[l+3])*j,A+=O,L+=H,R+=B,N+=U,tt=tt.next,Kt<at&&(kt+=i);l=dt,gt=$,At=Lt;for(let Kt=0;Kt<a;Kt++)h=l<<2,r[h+3]=U=_*Q>>X,U>0?(U=255/U,r[h]=(f*Q>>X)*U,r[h+1]=(p*Q>>X)*U,r[h+2]=(m*Q>>X)*U):r[h]=r[h+1]=r[h+2]=0,f-=v,p-=w,m-=x,_-=M,v-=gt.r,w-=gt.g,x-=gt.b,M-=gt.a,h=dt+((h=Kt+J)<at?h:at)*i<<2,f+=A+=gt.r=r[h],p+=L+=gt.g=r[h+1],m+=R+=gt.b=r[h+2],_+=N+=gt.a=r[h+3],gt=gt.next,v+=O=At.r,w+=H=At.g,x+=B=At.b,M+=U=At.a,A-=O,L-=H,R-=B,N-=U,At=At.next,l+=i}}const I0=function(t){const r=Math.round(this.blurRadius());r>0&&L0(t,r)};S.addGetterSetter(F,"blurRadius",0,z(),S.afterSetFilter);const N0=function(o){const t=this.brightness()*255,r=o.data,i=r.length;for(let a=0;a<i;a+=4)r[a]+=t,r[a+1]+=t,r[a+2]+=t};S.addGetterSetter(F,"brightness",0,z(),S.afterSetFilter);const O0=function(o){const t=this.brightness(),r=o.data,i=r.length;for(let a=0;a<i;a+=4)r[a]=Math.min(255,r[a]*t),r[a+1]=Math.min(255,r[a+1]*t),r[a+2]=Math.min(255,r[a+2]*t)},G0=function(o){const t=Math.pow((this.contrast()+100)/100,2),r=o.data,i=r.length;let a=150,h=150,l=150;for(let d=0;d<i;d+=4)a=r[d],h=r[d+1],l=r[d+2],a/=255,a-=.5,a*=t,a+=.5,a*=255,h/=255,h-=.5,h*=t,h+=.5,h*=255,l/=255,l-=.5,l*=t,l+=.5,l*=255,a=a<0?0:a>255?255:a,h=h<0?0:h>255?255:h,l=l<0?0:l>255?255:l,r[d]=a,r[d+1]=h,r[d+2]=l};S.addGetterSetter(F,"contrast",0,z(),S.afterSetFilter);const D0=function(o){var t,r,i,a,h,l,d,f,p;const m=o.data,_=o.width,v=o.height,w=Math.min(1,Math.max(0,(r=(t=this.embossStrength)===null||t===void 0?void 0:t.call(this))!==null&&r!==void 0?r:.5)),x=Math.min(1,Math.max(0,(a=(i=this.embossWhiteLevel)===null||i===void 0?void 0:i.call(this))!==null&&a!==void 0?a:.5)),A=(d={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(l=(h=this.embossDirection)===null||h===void 0?void 0:h.call(this))!==null&&l!==void 0?l:"top-left"])!==null&&d!==void 0?d:315,L=!!((p=(f=this.embossBlend)===null||f===void 0?void 0:f.call(this))!==null&&p!==void 0&&p),R=w*10,N=x*255,O=A*Math.PI/180,H=Math.cos(O),B=Math.sin(O),U=128/1020*R,j=new Uint8ClampedArray(m),K=new Float32Array(_*v);for(let $=0,Q=0;Q<m.length;Q+=4,$++)K[$]=.2126*j[Q]+.7152*j[Q+1]+.0722*j[Q+2];const et=[-1,0,1,-2,0,2,-1,0,1],at=[-1,-2,-1,0,0,0,1,2,1],J=[-_-1,-_,-_+1,-1,0,1,_-1,_,_+1],ot=$=>$<0?0:$>255?255:$;for(let $=1;$<v-1;$++)for(let Q=1;Q<_-1;Q++){const X=$*_+Q;let Lt=0,tt=0;Lt+=K[X+J[0]]*et[0],tt+=K[X+J[0]]*at[0],Lt+=K[X+J[1]]*et[1],tt+=K[X+J[1]]*at[1],Lt+=K[X+J[2]]*et[2],tt+=K[X+J[2]]*at[2],Lt+=K[X+J[3]]*et[3],tt+=K[X+J[3]]*at[3],Lt+=K[X+J[5]]*et[5],tt+=K[X+J[5]]*at[5],Lt+=K[X+J[6]]*et[6],tt+=K[X+J[6]]*at[6],Lt+=K[X+J[7]]*et[7],tt+=K[X+J[7]]*at[7],Lt+=K[X+J[8]]*et[8],tt+=K[X+J[8]]*at[8];const gt=H*Lt+B*tt,At=ot(N+gt*U),dt=X*4;if(L){const kt=At-N;m[dt]=ot(j[dt]+kt),m[dt+1]=ot(j[dt+1]+kt),m[dt+2]=ot(j[dt+2]+kt),m[dt+3]=j[dt+3]}else m[dt]=m[dt+1]=m[dt+2]=At,m[dt+3]=j[dt+3]}for(let $=0;$<_;$++){let Q=$*4,X=((v-1)*_+$)*4;m[Q]=j[Q],m[Q+1]=j[Q+1],m[Q+2]=j[Q+2],m[Q+3]=j[Q+3],m[X]=j[X],m[X+1]=j[X+1],m[X+2]=j[X+2],m[X+3]=j[X+3]}for(let $=1;$<v-1;$++){let Q=$*_*4,X=($*_+(_-1))*4;m[Q]=j[Q],m[Q+1]=j[Q+1],m[Q+2]=j[Q+2],m[Q+3]=j[Q+3],m[X]=j[X],m[X+1]=j[X+1],m[X+2]=j[X+2],m[X+3]=j[X+3]}return o};S.addGetterSetter(F,"embossStrength",.5,z(),S.afterSetFilter);S.addGetterSetter(F,"embossWhiteLevel",.5,z(),S.afterSetFilter);S.addGetterSetter(F,"embossDirection","top-left",void 0,S.afterSetFilter);S.addGetterSetter(F,"embossBlend",!1,void 0,S.afterSetFilter);function pa(o,t,r,i,a){const h=r-t,l=a-i;if(h===0)return i+l/2;if(l===0)return i;let d=(o-t)/h;return d=l*d+i,d}const F0=function(o){const t=o.data,r=t.length;let i=t[0],a=i,h,l=t[1],d=l,f,p=t[2],m=p,_;const v=this.enhance();if(v===0)return;for(let N=0;N<r;N+=4)h=t[N+0],h<i?i=h:h>a&&(a=h),f=t[N+1],f<l?l=f:f>d&&(d=f),_=t[N+2],_<p?p=_:_>m&&(m=_);a===i&&(a=255,i=0),d===l&&(d=255,l=0),m===p&&(m=255,p=0);let w,x,M,A,L,R;if(v>0)w=a+v*(255-a),x=i-v*(i-0),M=d+v*(255-d),A=l-v*(l-0),L=m+v*(255-m),R=p-v*(p-0);else{const N=(a+i)*.5;w=a+v*(a-N),x=i+v*(i-N);const O=(d+l)*.5;M=d+v*(d-O),A=l+v*(l-O);const H=(m+p)*.5;L=m+v*(m-H),R=p+v*(p-H)}for(let N=0;N<r;N+=4)t[N+0]=pa(t[N+0],i,a,x,w),t[N+1]=pa(t[N+1],l,d,A,M),t[N+2]=pa(t[N+2],p,m,R,L)};S.addGetterSetter(F,"enhance",0,z(),S.afterSetFilter);const z0=function(o){const t=o.data,r=t.length;for(let i=0;i<r;i+=4){const a=.34*t[i]+.5*t[i+1]+.16*t[i+2];t[i]=a,t[i+1]=a,t[i+2]=a}};S.addGetterSetter(F,"hue",0,z(),S.afterSetFilter);S.addGetterSetter(F,"saturation",0,z(),S.afterSetFilter);S.addGetterSetter(F,"luminance",0,z(),S.afterSetFilter);const b0=function(o){const t=o.data,r=t.length,i=1,a=Math.pow(2,this.saturation()),h=Math.abs(this.hue()+360)%360,l=this.luminance()*127,d=i*a*Math.cos(h*Math.PI/180),f=i*a*Math.sin(h*Math.PI/180),p=.299*i+.701*d+.167*f,m=.587*i-.587*d+.33*f,_=.114*i-.114*d-.497*f,v=.299*i-.299*d-.328*f,w=.587*i+.413*d+.035*f,x=.114*i-.114*d+.293*f,M=.299*i-.3*d+1.25*f,A=.587*i-.586*d-1.05*f,L=.114*i+.886*d-.2*f;let R,N,O,H;for(let B=0;B<r;B+=4)R=t[B+0],N=t[B+1],O=t[B+2],H=t[B+3],t[B+0]=p*R+m*N+_*O+l,t[B+1]=v*R+w*N+x*O+l,t[B+2]=M*R+A*N+L*O+l,t[B+3]=H},B0=function(o){const t=o.data,r=t.length,i=Math.pow(2,this.value()),a=Math.pow(2,this.saturation()),h=Math.abs(this.hue()+360)%360,l=i*a*Math.cos(h*Math.PI/180),d=i*a*Math.sin(h*Math.PI/180),f=.299*i+.701*l+.167*d,p=.587*i-.587*l+.33*d,m=.114*i-.114*l-.497*d,_=.299*i-.299*l-.328*d,v=.587*i+.413*l+.035*d,w=.114*i-.114*l+.293*d,x=.299*i-.3*l+1.25*d,M=.587*i-.586*l-1.05*d,A=.114*i+.886*l-.2*d;for(let L=0;L<r;L+=4){const R=t[L+0],N=t[L+1],O=t[L+2],H=t[L+3];t[L+0]=f*R+p*N+m*O,t[L+1]=_*R+v*N+w*O,t[L+2]=x*R+M*N+A*O,t[L+3]=H}};S.addGetterSetter(F,"hue",0,z(),S.afterSetFilter);S.addGetterSetter(F,"saturation",0,z(),S.afterSetFilter);S.addGetterSetter(F,"value",0,z(),S.afterSetFilter);const H0=function(o){const t=o.data,r=t.length;for(let i=0;i<r;i+=4)t[i]=255-t[i],t[i+1]=255-t[i+1],t[i+2]=255-t[i+2]},W0=function(o,t,r){const i=o.data,a=t.data,h=o.width,l=o.height,d=r.polarCenterX||h/2,f=r.polarCenterY||l/2;let p=Math.sqrt(d*d+f*f),m=h-d,_=l-f;const v=Math.sqrt(m*m+_*_);p=v>p?v:p;const w=l,x=h,M=360/x*Math.PI/180;for(let A=0;A<x;A+=1){const L=Math.sin(A*M),R=Math.cos(A*M);for(let N=0;N<w;N+=1){m=Math.floor(d+p*N/w*R),_=Math.floor(f+p*N/w*L);let O=(_*h+m)*4;const H=i[O+0],B=i[O+1],U=i[O+2],j=i[O+3];O=(A+N*h)*4,a[O+0]=H,a[O+1]=B,a[O+2]=U,a[O+3]=j}}},U0=function(o,t,r){const i=o.data,a=t.data,h=o.width,l=o.height,d=r.polarCenterX||h/2,f=r.polarCenterY||l/2;let p=Math.sqrt(d*d+f*f),m=h-d,_=l-f;const v=Math.sqrt(m*m+_*_);p=v>p?v:p;const w=l,x=h,M=0;let A,L;for(m=0;m<h;m+=1)for(_=0;_<l;_+=1){const R=m-d,N=_-f,O=Math.sqrt(R*R+N*N)*w/p;let H=(Math.atan2(N,R)*180/Math.PI+360+M)%360;H=H*x/360,A=Math.floor(H),L=Math.floor(O);let B=(L*h+A)*4;const U=i[B+0],j=i[B+1],K=i[B+2],et=i[B+3];B=(_*h+m)*4,a[B+0]=U,a[B+1]=j,a[B+2]=K,a[B+3]=et}},Y0=function(o){const t=o.width,r=o.height;let i,a,h,l,d,f,p,m,_,v,w=Math.round(this.kaleidoscopePower());const x=Math.round(this.kaleidoscopeAngle()),M=Math.floor(t*(x%360)/360);if(w<1)return;const A=P.createCanvasElement();A.width=t,A.height=r;const L=A.getContext("2d").getImageData(0,0,t,r);P.releaseCanvas(A),W0(o,L,{polarCenterX:t/2,polarCenterY:r/2});let R=t/Math.pow(2,w);for(;R<=8;)R=R*2,w-=1;R=Math.ceil(R);let N=R,O=0,H=N,B=1;for(M+R>t&&(O=N,H=0,B=-1),a=0;a<r;a+=1)for(i=O;i!==H;i+=B)h=Math.round(i+M)%t,_=(t*a+h)*4,d=L.data[_+0],f=L.data[_+1],p=L.data[_+2],m=L.data[_+3],v=(t*a+i)*4,L.data[v+0]=d,L.data[v+1]=f,L.data[v+2]=p,L.data[v+3]=m;for(a=0;a<r;a+=1)for(N=Math.floor(R),l=0;l<w;l+=1){for(i=0;i<N+1;i+=1)_=(t*a+i)*4,d=L.data[_+0],f=L.data[_+1],p=L.data[_+2],m=L.data[_+3],v=(t*a+N*2-i-1)*4,L.data[v+0]=d,L.data[v+1]=f,L.data[v+2]=p,L.data[v+3]=m;N*=2}U0(L,o,{})};S.addGetterSetter(F,"kaleidoscopePower",2,z(),S.afterSetFilter);S.addGetterSetter(F,"kaleidoscopeAngle",0,z(),S.afterSetFilter);function Di(o,t,r){let i=(r*o.width+t)*4;const a=[];return a.push(o.data[i++],o.data[i++],o.data[i++],o.data[i++]),a}function _r(o,t){return Math.sqrt(Math.pow(o[0]-t[0],2)+Math.pow(o[1]-t[1],2)+Math.pow(o[2]-t[2],2))}function X0(o){const t=[0,0,0];for(let r=0;r<o.length;r++)t[0]+=o[r][0],t[1]+=o[r][1],t[2]+=o[r][2];return t[0]/=o.length,t[1]/=o.length,t[2]/=o.length,t}function j0(o,t){const r=Di(o,0,0),i=Di(o,o.width-1,0),a=Di(o,0,o.height-1),h=Di(o,o.width-1,o.height-1),l=t||10;if(_r(r,i)<l&&_r(i,h)<l&&_r(h,a)<l&&_r(a,r)<l){const d=X0([i,r,h,a]),f=[];for(let p=0;p<o.width*o.height;p++){const m=_r(d,[o.data[p*4],o.data[p*4+1],o.data[p*4+2]]);f[p]=m<l?0:255}return f}}function V0(o,t){for(let r=0;r<o.width*o.height;r++)o.data[4*r+3]=t[r]}function q0(o,t,r){const i=[1,1,1,1,0,1,1,1,1],a=Math.round(Math.sqrt(i.length)),h=Math.floor(a/2),l=[];for(let d=0;d<r;d++)for(let f=0;f<t;f++){const p=d*t+f;let m=0;for(let _=0;_<a;_++)for(let v=0;v<a;v++){const w=d+_-h,x=f+v-h;if(w>=0&&w<r&&x>=0&&x<t){const M=w*t+x,A=i[_*a+v];m+=o[M]*A}}l[p]=m===255*8?255:0}return l}function Q0(o,t,r){const i=[1,1,1,1,1,1,1,1,1],a=Math.round(Math.sqrt(i.length)),h=Math.floor(a/2),l=[];for(let d=0;d<r;d++)for(let f=0;f<t;f++){const p=d*t+f;let m=0;for(let _=0;_<a;_++)for(let v=0;v<a;v++){const w=d+_-h,x=f+v-h;if(w>=0&&w<r&&x>=0&&x<t){const M=w*t+x,A=i[_*a+v];m+=o[M]*A}}l[p]=m>=255*4?255:0}return l}function K0(o,t,r){const i=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],a=Math.round(Math.sqrt(i.length)),h=Math.floor(a/2),l=[];for(let d=0;d<r;d++)for(let f=0;f<t;f++){const p=d*t+f;let m=0;for(let _=0;_<a;_++)for(let v=0;v<a;v++){const w=d+_-h,x=f+v-h;if(w>=0&&w<r&&x>=0&&x<t){const M=w*t+x,A=i[_*a+v];m+=o[M]*A}}l[p]=m}return l}const J0=function(o){const t=this.threshold();let r=j0(o,t);return r&&(r=q0(r,o.width,o.height),r=Q0(r,o.width,o.height),r=K0(r,o.width,o.height),V0(o,r)),o};S.addGetterSetter(F,"threshold",0,z(),S.afterSetFilter);const Z0=function(o){const t=this.noise()*255,r=o.data,i=r.length,a=t/2;for(let h=0;h<i;h+=4)r[h+0]+=a-2*a*Math.random(),r[h+1]+=a-2*a*Math.random(),r[h+2]+=a-2*a*Math.random()};S.addGetterSetter(F,"noise",.2,z(),S.afterSetFilter);const $0=function(o){let t=Math.ceil(this.pixelSize()),r=o.width,i=o.height,a=Math.ceil(r/t),h=Math.ceil(i/t),l=o.data;if(t<=0){P.error("pixelSize value can not be <= 0");return}for(let d=0;d<a;d+=1)for(let f=0;f<h;f+=1){let p=0,m=0,_=0,v=0;const w=d*t,x=w+t,M=f*t,A=M+t;let L=0;for(let R=w;R<x;R+=1)if(!(R>=r))for(let N=M;N<A;N+=1){if(N>=i)continue;const O=(r*N+R)*4;p+=l[O+0],m+=l[O+1],_+=l[O+2],v+=l[O+3],L+=1}p=p/L,m=m/L,_=_/L,v=v/L;for(let R=w;R<x;R+=1)if(!(R>=r))for(let N=M;N<A;N+=1){if(N>=i)continue;const O=(r*N+R)*4;l[O+0]=p,l[O+1]=m,l[O+2]=_,l[O+3]=v}}};S.addGetterSetter(F,"pixelSize",8,z(),S.afterSetFilter);const tf=function(o){const t=Math.round(this.levels()*254)+1,r=o.data,i=r.length,a=255/t;for(let h=0;h<i;h+=1)r[h]=Math.floor(r[h]/a)*a};S.addGetterSetter(F,"levels",.5,z(),S.afterSetFilter);const ef=function(o){const t=o.data,r=t.length,i=this.red(),a=this.green(),h=this.blue();for(let l=0;l<r;l+=4){const d=(.34*t[l]+.5*t[l+1]+.16*t[l+2])/255;t[l]=d*i,t[l+1]=d*a,t[l+2]=d*h,t[l+3]=t[l+3]}};S.addGetterSetter(F,"red",0,function(o){return this._filterUpToDate=!1,o>255?255:o<0?0:Math.round(o)});S.addGetterSetter(F,"green",0,function(o){return this._filterUpToDate=!1,o>255?255:o<0?0:Math.round(o)});S.addGetterSetter(F,"blue",0,hh,S.afterSetFilter);const nf=function(o){const t=o.data,r=t.length,i=this.red(),a=this.green(),h=this.blue(),l=this.alpha();for(let d=0;d<r;d+=4){const f=1-l;t[d]=i*l+t[d]*f,t[d+1]=a*l+t[d+1]*f,t[d+2]=h*l+t[d+2]*f}};S.addGetterSetter(F,"red",0,function(o){return this._filterUpToDate=!1,o>255?255:o<0?0:Math.round(o)});S.addGetterSetter(F,"green",0,function(o){return this._filterUpToDate=!1,o>255?255:o<0?0:Math.round(o)});S.addGetterSetter(F,"blue",0,hh,S.afterSetFilter);S.addGetterSetter(F,"alpha",1,function(o){return this._filterUpToDate=!1,o>1?1:o<0?0:o});const rf=function(o){const t=o.data,r=t.length;for(let i=0;i<r;i+=4){const a=t[i+0],h=t[i+1],l=t[i+2];t[i+0]=Math.min(255,a*.393+h*.769+l*.189),t[i+1]=Math.min(255,a*.349+h*.686+l*.168),t[i+2]=Math.min(255,a*.272+h*.534+l*.131)}},sf=function(o){const r=o.data;for(let i=0;i<r.length;i+=4){const a=r[i],h=r[i+1],l=r[i+2];.2126*a+.7152*h+.0722*l>=128&&(r[i]=255-a,r[i+1]=255-h,r[i+2]=255-l)}return o},af=function(o){const t=this.threshold()*255,r=o.data,i=r.length;for(let a=0;a<i;a+=1)r[a]=r[a]<t?0:255};S.addGetterSetter(F,"threshold",.5,z(),S.afterSetFilter);Cn.Util._assign(Cn,{Arc:Ue,Arrow:En,Circle:Qn,Ellipse:on,Image:Ne,Label:Ia,Tag:Tn,Line:Ye,Path:_t,Rect:Lr,RegularPolygon:ln,Ring:Rn,Sprite:Oe,Star:hn,Text:wt,TextPath:Gt,Transformer:lt,Wedge:Xe,Filters:{Blur:I0,Brightness:O0,Brighten:N0,Contrast:G0,Emboss:D0,Enhance:F0,Grayscale:z0,HSL:b0,HSV:B0,Invert:H0,Kaleidoscope:Y0,Mask:J0,Noise:Z0,Pixelate:$0,Posterize:tf,RGB:ef,RGBA:nf,Sepia:rf,Solarize:sf,Threshold:af}});var Hh={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var of=function(t){var r={},i=Qt,a=Fi,h=Object.assign;function l(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,f=Symbol.for("react.element"),p=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),x=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),O=Symbol.for("react.offscreen"),H=Symbol.iterator;function B(e){return e===null||typeof e!="object"?null:(e=H&&e[H]||e["@@iterator"],typeof e=="function"?e:null)}function U(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case m:return"Fragment";case p:return"Portal";case v:return"Profiler";case _:return"StrictMode";case A:return"Suspense";case L:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case x:return(e.displayName||"Context")+".Consumer";case w:return(e._context.displayName||"Context")+".Provider";case M:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case R:return n=e.displayName||null,n!==null?n:U(e.type)||"Memo";case N:n=e._payload,e=e._init;try{return U(e(n))}catch{}}return null}function j(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(n);case 8:return n===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function K(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,n.flags&4098&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function et(e){if(K(e)!==e)throw Error(l(188))}function at(e){var n=e.alternate;if(!n){if(n=K(e),n===null)throw Error(l(188));return n!==e?null:e}for(var s=e,u=n;;){var c=s.return;if(c===null)break;var g=c.alternate;if(g===null){if(u=c.return,u!==null){s=u;continue}break}if(c.child===g.child){for(g=c.child;g;){if(g===s)return et(c),e;if(g===u)return et(c),n;g=g.sibling}throw Error(l(188))}if(s.return!==u.return)s=c,u=g;else{for(var y=!1,C=c.child;C;){if(C===s){y=!0,s=c,u=g;break}if(C===u){y=!0,u=c,s=g;break}C=C.sibling}if(!y){for(C=g.child;C;){if(C===s){y=!0,s=g,u=c;break}if(C===u){y=!0,u=g,s=c;break}C=C.sibling}if(!y)throw Error(l(189))}}if(s.alternate!==u)throw Error(l(190))}if(s.tag!==3)throw Error(l(188));return s.stateNode.current===s?e:n}function J(e){return e=at(e),e!==null?ot(e):null}function ot(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=ot(e);if(n!==null)return n;e=e.sibling}return null}function $(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){if(e.tag!==4){var n=$(e);if(n!==null)return n}e=e.sibling}return null}var Q=Array.isArray,X=t.getPublicInstance,Lt=t.getRootHostContext,tt=t.getChildHostContext,gt=t.prepareForCommit,At=t.resetAfterCommit,dt=t.createInstance,kt=t.appendInitialChild,Kt=t.finalizeInitialChildren,Ga=t.prepareUpdate,Xi=t.shouldSetTextContent,Da=t.createTextInstance,Fa=t.scheduleTimeout,Qh=t.cancelTimeout,ji=t.noTimeout,Ir=t.isPrimaryRenderer,re=t.supportsMutation,Nr=t.supportsPersistence,le=t.supportsHydration,Kh=t.getInstanceFromNode,Jh=t.preparePortalMount,Zh=t.getCurrentEventPriority,$h=t.detachDeletedInstance,tu=t.supportsMicrotasks,eu=t.scheduleMicrotask,Kn=t.supportsTestSelectors,nu=t.findFiberRoot,ru=t.getBoundingRect,iu=t.getTextContent,Jn=t.isHiddenSubtree,su=t.matchAccessibilityRole,au=t.setFocusIfFocusable,ou=t.setupIntersectionObserver,lu=t.appendChild,hu=t.appendChildToContainer,uu=t.commitTextUpdate,cu=t.commitMount,du=t.commitUpdate,fu=t.insertBefore,gu=t.insertInContainerBefore,pu=t.removeChild,mu=t.removeChildFromContainer,za=t.resetTextContent,yu=t.hideInstance,vu=t.hideTextInstance,_u=t.unhideInstance,Su=t.unhideTextInstance,xu=t.clearContainer,wu=t.cloneInstance,ba=t.createContainerChildSet,Ba=t.appendChildToContainerChildSet,Cu=t.finalizeContainerChildren,Vi=t.replaceContainerChildren,Ha=t.cloneHiddenInstance,Wa=t.cloneHiddenTextInstance,Pu=t.canHydrateInstance,ku=t.canHydrateTextInstance,Eu=t.canHydrateSuspenseInstance,Ua=t.isSuspenseInstancePending,qi=t.isSuspenseInstanceFallback,Tu=t.getSuspenseInstanceFallbackErrorDetails,Ru=t.registerSuspenseInstanceRetry,Or=t.getNextHydratableSibling,Au=t.getFirstHydratableChild,Mu=t.getFirstHydratableChildWithinContainer,Lu=t.getFirstHydratableChildWithinSuspenseInstance,Iu=t.hydrateInstance,Nu=t.hydrateTextInstance,Ou=t.hydrateSuspenseInstance,Gu=t.getNextHydratableInstanceAfterSuspenseInstance,Du=t.commitHydratedContainer,Fu=t.commitHydratedSuspenseInstance,zu=t.clearSuspenseBoundary,bu=t.clearSuspenseBoundaryFromContainer,Bu=t.shouldDeleteUnhydratedTailInstances,Hu=t.didNotMatchHydratedContainerTextInstance,Wu=t.didNotMatchHydratedTextInstance,Qi;function Zn(e){if(Qi===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);Qi=n&&n[1]||""}return`
`+Qi+e}var Ki=!1;function Ji(e,n){if(!e||Ki)return"";Ki=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(D){var u=D}Reflect.construct(e,[],n)}else{try{n.call()}catch(D){u=D}e.call(n.prototype)}else{try{throw Error()}catch(D){u=D}e()}}catch(D){if(D&&u&&typeof D.stack=="string"){for(var c=D.stack.split(`
`),g=u.stack.split(`
`),y=c.length-1,C=g.length-1;1<=y&&0<=C&&c[y]!==g[C];)C--;for(;1<=y&&0<=C;y--,C--)if(c[y]!==g[C]){if(y!==1||C!==1)do if(y--,C--,0>C||c[y]!==g[C]){var T=`
`+c[y].replace(" at new "," at ");return e.displayName&&T.includes("<anonymous>")&&(T=T.replace("<anonymous>",e.displayName)),T}while(1<=y&&0<=C);break}}}finally{Ki=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Zn(e):""}var Uu=Object.prototype.hasOwnProperty,Zi=[],Mn=-1;function je(e){return{current:e}}function St(e){0>Mn||(e.current=Zi[Mn],Zi[Mn]=null,Mn--)}function yt(e,n){Mn++,Zi[Mn]=e.current,e.current=n}var Ve={},Wt=je(Ve),Jt=je(!1),cn=Ve;function Ln(e,n){var s=e.type.contextTypes;if(!s)return Ve;var u=e.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===n)return u.__reactInternalMemoizedMaskedChildContext;var c={},g;for(g in s)c[g]=n[g];return u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=c),c}function Zt(e){return e=e.childContextTypes,e!=null}function Gr(){St(Jt),St(Wt)}function Ya(e,n,s){if(Wt.current!==Ve)throw Error(l(168));yt(Wt,n),yt(Jt,s)}function Xa(e,n,s){var u=e.stateNode;if(n=n.childContextTypes,typeof u.getChildContext!="function")return s;u=u.getChildContext();for(var c in u)if(!(c in n))throw Error(l(108,j(e)||"Unknown",c));return h({},s,u)}function Dr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ve,cn=Wt.current,yt(Wt,e),yt(Jt,Jt.current),!0}function ja(e,n,s){var u=e.stateNode;if(!u)throw Error(l(169));s?(e=Xa(e,n,cn),u.__reactInternalMemoizedMergedChildContext=e,St(Jt),St(Wt),yt(Wt,e)):St(Jt),yt(Jt,s)}var ve=Math.clz32?Math.clz32:ju,Yu=Math.log,Xu=Math.LN2;function ju(e){return e>>>=0,e===0?32:31-(Yu(e)/Xu|0)|0}var Fr=64,zr=4194304;function $n(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function br(e,n){var s=e.pendingLanes;if(s===0)return 0;var u=0,c=e.suspendedLanes,g=e.pingedLanes,y=s&268435455;if(y!==0){var C=y&~c;C!==0?u=$n(C):(g&=y,g!==0&&(u=$n(g)))}else y=s&~c,y!==0?u=$n(y):g!==0&&(u=$n(g));if(u===0)return 0;if(n!==0&&n!==u&&!(n&c)&&(c=u&-u,g=n&-n,c>=g||c===16&&(g&4194240)!==0))return n;if(u&4&&(u|=s&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=u;0<n;)s=31-ve(n),c=1<<s,u|=e[s],n&=~c;return u}function Vu(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qu(e,n){for(var s=e.suspendedLanes,u=e.pingedLanes,c=e.expirationTimes,g=e.pendingLanes;0<g;){var y=31-ve(g),C=1<<y,T=c[y];T===-1?(!(C&s)||C&u)&&(c[y]=Vu(C,n)):T<=n&&(e.expiredLanes|=C),g&=~C}}function $i(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Va(){var e=Fr;return Fr<<=1,!(Fr&4194240)&&(Fr=64),e}function ts(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function tr(e,n,s){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-ve(n),e[n]=s}function Qu(e,n){var s=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var u=e.eventTimes;for(e=e.expirationTimes;0<s;){var c=31-ve(s),g=1<<c;n[c]=0,u[c]=-1,e[c]=-1,s&=~g}}function es(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var u=31-ve(s),c=1<<u;c&n|e[u]&n&&(e[u]|=n),s&=~c}}var ht=0;function qa(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ns=a.unstable_scheduleCallback,Qa=a.unstable_cancelCallback,Ku=a.unstable_shouldYield,Ju=a.unstable_requestPaint,Dt=a.unstable_now,rs=a.unstable_ImmediatePriority,Zu=a.unstable_UserBlockingPriority,is=a.unstable_NormalPriority,$u=a.unstable_IdlePriority,Br=null,ke=null;function tc(e){if(ke&&typeof ke.onCommitFiberRoot=="function")try{ke.onCommitFiberRoot(Br,e,void 0,(e.current.flags&128)===128)}catch{}}function ec(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var _e=typeof Object.is=="function"?Object.is:ec,Ge=null,Hr=!1,ss=!1;function Ka(e){Ge===null?Ge=[e]:Ge.push(e)}function nc(e){Hr=!0,Ka(e)}function Ee(){if(!ss&&Ge!==null){ss=!0;var e=0,n=ht;try{var s=Ge;for(ht=1;e<s.length;e++){var u=s[e];do u=u(!0);while(u!==null)}Ge=null,Hr=!1}catch(c){throw Ge!==null&&(Ge=Ge.slice(e+1)),ns(rs,Ee),c}finally{ht=n,ss=!1}}return null}var In=[],Nn=0,Wr=null,Ur=0,he=[],ue=0,dn=null,De=1,Fe="";function fn(e,n){In[Nn++]=Ur,In[Nn++]=Wr,Wr=e,Ur=n}function Ja(e,n,s){he[ue++]=De,he[ue++]=Fe,he[ue++]=dn,dn=e;var u=De;e=Fe;var c=32-ve(u)-1;u&=~(1<<c),s+=1;var g=32-ve(n)+c;if(30<g){var y=c-c%5;g=(u&(1<<y)-1).toString(32),u>>=y,c-=y,De=1<<32-ve(n)+c|s<<c|u,Fe=g+e}else De=1<<g|s<<c|u,Fe=e}function as(e){e.return!==null&&(fn(e,1),Ja(e,1,0))}function os(e){for(;e===Wr;)Wr=In[--Nn],In[Nn]=null,Ur=In[--Nn],In[Nn]=null;for(;e===dn;)dn=he[--ue],he[ue]=null,Fe=he[--ue],he[ue]=null,De=he[--ue],he[ue]=null}var ie=null,ce=null,Ct=!1,er=!1,Se=null;function Za(e,n){var s=me(5,null,null,0);s.elementType="DELETED",s.stateNode=n,s.return=e,n=e.deletions,n===null?(e.deletions=[s],e.flags|=16):n.push(s)}function $a(e,n){switch(e.tag){case 5:return n=Pu(n,e.type,e.pendingProps),n!==null?(e.stateNode=n,ie=e,ce=Au(n),!0):!1;case 6:return n=ku(n,e.pendingProps),n!==null?(e.stateNode=n,ie=e,ce=null,!0):!1;case 13:if(n=Eu(n),n!==null){var s=dn!==null?{id:De,overflow:Fe}:null;return e.memoizedState={dehydrated:n,treeContext:s,retryLane:1073741824},s=me(18,null,null,0),s.stateNode=n,s.return=e,e.child=s,ie=e,ce=null,!0}return!1;default:return!1}}function ls(e){return(e.mode&1)!==0&&(e.flags&128)===0}function hs(e){if(Ct){var n=ce;if(n){var s=n;if(!$a(e,n)){if(ls(e))throw Error(l(418));n=Or(s);var u=ie;n&&$a(e,n)?Za(u,s):(e.flags=e.flags&-4097|2,Ct=!1,ie=e)}}else{if(ls(e))throw Error(l(418));e.flags=e.flags&-4097|2,Ct=!1,ie=e}}}function to(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ie=e}function Yr(e){if(!le||e!==ie)return!1;if(!Ct)return to(e),Ct=!0,!1;if(e.tag!==3&&(e.tag!==5||Bu(e.type)&&!Xi(e.type,e.memoizedProps))){var n=ce;if(n){if(ls(e))throw eo(),Error(l(418));for(;n;)Za(e,n),n=Or(n)}}if(to(e),e.tag===13){if(!le)throw Error(l(316));if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));ce=Gu(e)}else ce=ie?Or(e.stateNode):null;return!0}function eo(){for(var e=ce;e;)e=Or(e)}function On(){le&&(ce=ie=null,er=Ct=!1)}function us(e){Se===null?Se=[e]:Se.push(e)}var rc=d.ReactCurrentBatchConfig;function Xr(e,n){if(_e(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),u=Object.keys(n);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var c=s[u];if(!Uu.call(n,c)||!_e(e[c],n[c]))return!1}return!0}function ic(e){switch(e.tag){case 5:return Zn(e.type);case 16:return Zn("Lazy");case 13:return Zn("Suspense");case 19:return Zn("SuspenseList");case 0:case 2:case 15:return e=Ji(e.type,!1),e;case 11:return e=Ji(e.type.render,!1),e;case 1:return e=Ji(e.type,!0),e;default:return""}}function nr(e,n,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(l(309));var u=s.stateNode}if(!u)throw Error(l(147,e));var c=u,g=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===g?n.ref:(n=function(y){var C=c.refs;y===null?delete C[g]:C[g]=y},n._stringRef=g,n)}if(typeof e!="string")throw Error(l(284));if(!s._owner)throw Error(l(290,e))}return e}function jr(e,n){throw e=Object.prototype.toString.call(n),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function no(e){var n=e._init;return n(e._payload)}function ro(e){function n(E,k){if(e){var I=E.deletions;I===null?(E.deletions=[k],E.flags|=16):I.push(k)}}function s(E,k){if(!e)return null;for(;k!==null;)n(E,k),k=k.sibling;return null}function u(E,k){for(E=new Map;k!==null;)k.key!==null?E.set(k.key,k):E.set(k.index,k),k=k.sibling;return E}function c(E,k){return E=tn(E,k),E.index=0,E.sibling=null,E}function g(E,k,I){return E.index=I,e?(I=E.alternate,I!==null?(I=I.index,I<k?(E.flags|=2,k):I):(E.flags|=2,k)):(E.flags|=1048576,k)}function y(E){return e&&E.alternate===null&&(E.flags|=2),E}function C(E,k,I,Y){return k===null||k.tag!==6?(k=sa(I,E.mode,Y),k.return=E,k):(k=c(k,I),k.return=E,k)}function T(E,k,I,Y){var Z=I.type;return Z===m?q(E,k,I.props.children,Y,I.key):k!==null&&(k.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===N&&no(Z)===k.type)?(Y=c(k,I.props),Y.ref=nr(E,k,I),Y.return=E,Y):(Y=Ci(I.type,I.key,I.props,null,E.mode,Y),Y.ref=nr(E,k,I),Y.return=E,Y)}function D(E,k,I,Y){return k===null||k.tag!==4||k.stateNode.containerInfo!==I.containerInfo||k.stateNode.implementation!==I.implementation?(k=aa(I,E.mode,Y),k.return=E,k):(k=c(k,I.children||[]),k.return=E,k)}function q(E,k,I,Y,Z){return k===null||k.tag!==7?(k=Sn(I,E.mode,Y,Z),k.return=E,k):(k=c(k,I),k.return=E,k)}function nt(E,k,I){if(typeof k=="string"&&k!==""||typeof k=="number")return k=sa(""+k,E.mode,I),k.return=E,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case f:return I=Ci(k.type,k.key,k.props,null,E.mode,I),I.ref=nr(E,null,k),I.return=E,I;case p:return k=aa(k,E.mode,I),k.return=E,k;case N:var Y=k._init;return nt(E,Y(k._payload),I)}if(Q(k)||B(k))return k=Sn(k,E.mode,I,null),k.return=E,k;jr(E,k)}return null}function W(E,k,I,Y){var Z=k!==null?k.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return Z!==null?null:C(E,k,""+I,Y);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case f:return I.key===Z?T(E,k,I,Y):null;case p:return I.key===Z?D(E,k,I,Y):null;case N:return Z=I._init,W(E,k,Z(I._payload),Y)}if(Q(I)||B(I))return Z!==null?null:q(E,k,I,Y,null);jr(E,I)}return null}function xt(E,k,I,Y,Z){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return E=E.get(I)||null,C(k,E,""+Y,Z);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case f:return E=E.get(Y.key===null?I:Y.key)||null,T(k,E,Y,Z);case p:return E=E.get(Y.key===null?I:Y.key)||null,D(k,E,Y,Z);case N:var it=Y._init;return xt(E,k,I,it(Y._payload),Z)}if(Q(Y)||B(Y))return E=E.get(I)||null,q(k,E,Y,Z,null);jr(k,Y)}return null}function pt(E,k,I,Y){for(var Z=null,it=null,rt=k,ut=k=0,bt=null;rt!==null&&ut<I.length;ut++){rt.index>ut?(bt=rt,rt=null):bt=rt.sibling;var ct=W(E,rt,I[ut],Y);if(ct===null){rt===null&&(rt=bt);break}e&&rt&&ct.alternate===null&&n(E,rt),k=g(ct,k,ut),it===null?Z=ct:it.sibling=ct,it=ct,rt=bt}if(ut===I.length)return s(E,rt),Ct&&fn(E,ut),Z;if(rt===null){for(;ut<I.length;ut++)rt=nt(E,I[ut],Y),rt!==null&&(k=g(rt,k,ut),it===null?Z=rt:it.sibling=rt,it=rt);return Ct&&fn(E,ut),Z}for(rt=u(E,rt);ut<I.length;ut++)bt=xt(rt,E,ut,I[ut],Y),bt!==null&&(e&&bt.alternate!==null&&rt.delete(bt.key===null?ut:bt.key),k=g(bt,k,ut),it===null?Z=bt:it.sibling=bt,it=bt);return e&&rt.forEach(function(en){return n(E,en)}),Ct&&fn(E,ut),Z}function ne(E,k,I,Y){var Z=B(I);if(typeof Z!="function")throw Error(l(150));if(I=Z.call(I),I==null)throw Error(l(151));for(var it=Z=null,rt=k,ut=k=0,bt=null,ct=I.next();rt!==null&&!ct.done;ut++,ct=I.next()){rt.index>ut?(bt=rt,rt=null):bt=rt.sibling;var en=W(E,rt,ct.value,Y);if(en===null){rt===null&&(rt=bt);break}e&&rt&&en.alternate===null&&n(E,rt),k=g(en,k,ut),it===null?Z=en:it.sibling=en,it=en,rt=bt}if(ct.done)return s(E,rt),Ct&&fn(E,ut),Z;if(rt===null){for(;!ct.done;ut++,ct=I.next())ct=nt(E,ct.value,Y),ct!==null&&(k=g(ct,k,ut),it===null?Z=ct:it.sibling=ct,it=ct);return Ct&&fn(E,ut),Z}for(rt=u(E,rt);!ct.done;ut++,ct=I.next())ct=xt(rt,E,ut,ct.value,Y),ct!==null&&(e&&ct.alternate!==null&&rt.delete(ct.key===null?ut:ct.key),k=g(ct,k,ut),it===null?Z=ct:it.sibling=ct,it=ct);return e&&rt.forEach(function(Oc){return n(E,Oc)}),Ct&&fn(E,ut),Z}function He(E,k,I,Y){if(typeof I=="object"&&I!==null&&I.type===m&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case f:t:{for(var Z=I.key,it=k;it!==null;){if(it.key===Z){if(Z=I.type,Z===m){if(it.tag===7){s(E,it.sibling),k=c(it,I.props.children),k.return=E,E=k;break t}}else if(it.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===N&&no(Z)===it.type){s(E,it.sibling),k=c(it,I.props),k.ref=nr(E,it,I),k.return=E,E=k;break t}s(E,it);break}else n(E,it);it=it.sibling}I.type===m?(k=Sn(I.props.children,E.mode,Y,I.key),k.return=E,E=k):(Y=Ci(I.type,I.key,I.props,null,E.mode,Y),Y.ref=nr(E,k,I),Y.return=E,E=Y)}return y(E);case p:t:{for(it=I.key;k!==null;){if(k.key===it)if(k.tag===4&&k.stateNode.containerInfo===I.containerInfo&&k.stateNode.implementation===I.implementation){s(E,k.sibling),k=c(k,I.children||[]),k.return=E,E=k;break t}else{s(E,k);break}else n(E,k);k=k.sibling}k=aa(I,E.mode,Y),k.return=E,E=k}return y(E);case N:return it=I._init,He(E,k,it(I._payload),Y)}if(Q(I))return pt(E,k,I,Y);if(B(I))return ne(E,k,I,Y);jr(E,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,k!==null&&k.tag===6?(s(E,k.sibling),k=c(k,I),k.return=E,E=k):(s(E,k),k=sa(I,E.mode,Y),k.return=E,E=k),y(E)):s(E,k)}return He}var Gn=ro(!0),io=ro(!1),Vr=je(null),qr=null,Dn=null,cs=null;function ds(){cs=Dn=qr=null}function so(e,n,s){Ir?(yt(Vr,n._currentValue),n._currentValue=s):(yt(Vr,n._currentValue2),n._currentValue2=s)}function fs(e){var n=Vr.current;St(Vr),Ir?e._currentValue=n:e._currentValue2=n}function gs(e,n,s){for(;e!==null;){var u=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,u!==null&&(u.childLanes|=n)):u!==null&&(u.childLanes&n)!==n&&(u.childLanes|=n),e===s)break;e=e.return}}function Fn(e,n){qr=e,cs=Dn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&n&&($t=!0),e.firstContext=null)}function de(e){var n=Ir?e._currentValue:e._currentValue2;if(cs!==e)if(e={context:e,memoizedValue:n,next:null},Dn===null){if(qr===null)throw Error(l(308));Dn=e,qr.dependencies={lanes:0,firstContext:e}}else Dn=Dn.next=e;return n}var gn=null;function ps(e){gn===null?gn=[e]:gn.push(e)}function ao(e,n,s,u){var c=n.interleaved;return c===null?(s.next=s,ps(n)):(s.next=c.next,c.next=s),n.interleaved=s,Te(e,u)}function Te(e,n){e.lanes|=n;var s=e.alternate;for(s!==null&&(s.lanes|=n),s=e,e=e.return;e!==null;)e.childLanes|=n,s=e.alternate,s!==null&&(s.childLanes|=n),s=e,e=e.return;return s.tag===3?s.stateNode:null}var qe=!1;function ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oo(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ze(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Qe(e,n,s){var u=e.updateQueue;if(u===null)return null;if(u=u.shared,st&2){var c=u.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),u.pending=n,Te(e,s)}return c=u.interleaved,c===null?(n.next=n,ps(u)):(n.next=c.next,c.next=n),u.interleaved=n,Te(e,s)}function Qr(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194240)!==0)){var u=n.lanes;u&=e.pendingLanes,s|=u,n.lanes=s,es(e,s)}}function lo(e,n){var s=e.updateQueue,u=e.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var c=null,g=null;if(s=s.firstBaseUpdate,s!==null){do{var y={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};g===null?c=g=y:g=g.next=y,s=s.next}while(s!==null);g===null?c=g=n:g=g.next=n}else c=g=n;s={baseState:u.baseState,firstBaseUpdate:c,lastBaseUpdate:g,shared:u.shared,effects:u.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}function Kr(e,n,s,u){var c=e.updateQueue;qe=!1;var g=c.firstBaseUpdate,y=c.lastBaseUpdate,C=c.shared.pending;if(C!==null){c.shared.pending=null;var T=C,D=T.next;T.next=null,y===null?g=D:y.next=D,y=T;var q=e.alternate;q!==null&&(q=q.updateQueue,C=q.lastBaseUpdate,C!==y&&(C===null?q.firstBaseUpdate=D:C.next=D,q.lastBaseUpdate=T))}if(g!==null){var nt=c.baseState;y=0,q=D=T=null,C=g;do{var W=C.lane,xt=C.eventTime;if((u&W)===W){q!==null&&(q=q.next={eventTime:xt,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});t:{var pt=e,ne=C;switch(W=n,xt=s,ne.tag){case 1:if(pt=ne.payload,typeof pt=="function"){nt=pt.call(xt,nt,W);break t}nt=pt;break t;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=ne.payload,W=typeof pt=="function"?pt.call(xt,nt,W):pt,W==null)break t;nt=h({},nt,W);break t;case 2:qe=!0}}C.callback!==null&&C.lane!==0&&(e.flags|=64,W=c.effects,W===null?c.effects=[C]:W.push(C))}else xt={eventTime:xt,lane:W,tag:C.tag,payload:C.payload,callback:C.callback,next:null},q===null?(D=q=xt,T=nt):q=q.next=xt,y|=W;if(C=C.next,C===null){if(C=c.shared.pending,C===null)break;W=C,C=W.next,W.next=null,c.lastBaseUpdate=W,c.shared.pending=null}}while(!0);if(q===null&&(T=nt),c.baseState=T,c.firstBaseUpdate=D,c.lastBaseUpdate=q,n=c.shared.interleaved,n!==null){c=n;do y|=c.lane,c=c.next;while(c!==n)}else g===null&&(c.shared.lanes=0);mn|=y,e.lanes=y,e.memoizedState=nt}}function ho(e,n,s){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var u=e[n],c=u.callback;if(c!==null){if(u.callback=null,u=s,typeof c!="function")throw Error(l(191,c));c.call(u)}}}var rr={},fe=je(rr),ir=je(rr),zn=je(rr);function Re(e){if(e===rr)throw Error(l(174));return e}function ys(e,n){yt(zn,n),yt(ir,e),yt(fe,rr),e=Lt(n),St(fe),yt(fe,e)}function bn(){St(fe),St(ir),St(zn)}function uo(e){var n=Re(zn.current),s=Re(fe.current);n=tt(s,e.type,n),s!==n&&(yt(ir,e),yt(fe,n))}function vs(e){ir.current===e&&(St(fe),St(ir))}var Et=je(0);function Jr(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Ua(s)||qi(s)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var _s=[];function Ss(){for(var e=0;e<_s.length;e++){var n=_s[e];Ir?n._workInProgressVersionPrimary=null:n._workInProgressVersionSecondary=null}_s.length=0}var Zr=d.ReactCurrentDispatcher,xs=d.ReactCurrentBatchConfig,pn=0,Tt=null,Nt=null,Ft=null,$r=!1,sr=!1,ar=0,sc=0;function Ut(){throw Error(l(321))}function ws(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!_e(e[s],n[s]))return!1;return!0}function Cs(e,n,s,u,c,g){if(pn=g,Tt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Zr.current=e===null||e.memoizedState===null?hc:uc,e=s(u,c),sr){g=0;do{if(sr=!1,ar=0,25<=g)throw Error(l(301));g+=1,Ft=Nt=null,n.updateQueue=null,Zr.current=cc,e=s(u,c)}while(sr)}if(Zr.current=ni,n=Nt!==null&&Nt.next!==null,pn=0,Ft=Nt=Tt=null,$r=!1,n)throw Error(l(300));return e}function Ps(){var e=ar!==0;return ar=0,e}function Ae(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?Tt.memoizedState=Ft=e:Ft=Ft.next=e,Ft}function ge(){if(Nt===null){var e=Tt.alternate;e=e!==null?e.memoizedState:null}else e=Nt.next;var n=Ft===null?Tt.memoizedState:Ft.next;if(n!==null)Ft=n,Nt=e;else{if(e===null)throw Error(l(310));Nt=e,e={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Ft===null?Tt.memoizedState=Ft=e:Ft=Ft.next=e}return Ft}function or(e,n){return typeof n=="function"?n(e):n}function ks(e){var n=ge(),s=n.queue;if(s===null)throw Error(l(311));s.lastRenderedReducer=e;var u=Nt,c=u.baseQueue,g=s.pending;if(g!==null){if(c!==null){var y=c.next;c.next=g.next,g.next=y}u.baseQueue=c=g,s.pending=null}if(c!==null){g=c.next,u=u.baseState;var C=y=null,T=null,D=g;do{var q=D.lane;if((pn&q)===q)T!==null&&(T=T.next={lane:0,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),u=D.hasEagerState?D.eagerState:e(u,D.action);else{var nt={lane:q,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null};T===null?(C=T=nt,y=u):T=T.next=nt,Tt.lanes|=q,mn|=q}D=D.next}while(D!==null&&D!==g);T===null?y=u:T.next=C,_e(u,n.memoizedState)||($t=!0),n.memoizedState=u,n.baseState=y,n.baseQueue=T,s.lastRenderedState=u}if(e=s.interleaved,e!==null){c=e;do g=c.lane,Tt.lanes|=g,mn|=g,c=c.next;while(c!==e)}else c===null&&(s.lanes=0);return[n.memoizedState,s.dispatch]}function Es(e){var n=ge(),s=n.queue;if(s===null)throw Error(l(311));s.lastRenderedReducer=e;var u=s.dispatch,c=s.pending,g=n.memoizedState;if(c!==null){s.pending=null;var y=c=c.next;do g=e(g,y.action),y=y.next;while(y!==c);_e(g,n.memoizedState)||($t=!0),n.memoizedState=g,n.baseQueue===null&&(n.baseState=g),s.lastRenderedState=g}return[g,u]}function co(){}function fo(e,n){var s=Tt,u=ge(),c=n(),g=!_e(u.memoizedState,c);if(g&&(u.memoizedState=c,$t=!0),u=u.queue,Ts(mo.bind(null,s,u,e),[e]),u.getSnapshot!==n||g||Ft!==null&&Ft.memoizedState.tag&1){if(s.flags|=2048,lr(9,po.bind(null,s,u,c,n),void 0,null),zt===null)throw Error(l(349));pn&30||go(s,n,c)}return c}function go(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=Tt.updateQueue,n===null?(n={lastEffect:null,stores:null},Tt.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function po(e,n,s,u){n.value=s,n.getSnapshot=u,yo(n)&&vo(e)}function mo(e,n,s){return s(function(){yo(n)&&vo(e)})}function yo(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!_e(e,s)}catch{return!0}}function vo(e){var n=Te(e,1);n!==null&&pe(n,e,1,-1)}function _o(e){var n=Ae();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:e},n.queue=e,e=e.dispatch=lc.bind(null,Tt,e),[n.memoizedState,e]}function lr(e,n,s,u){return e={tag:e,create:n,destroy:s,deps:u,next:null},n=Tt.updateQueue,n===null?(n={lastEffect:null,stores:null},Tt.updateQueue=n,n.lastEffect=e.next=e):(s=n.lastEffect,s===null?n.lastEffect=e.next=e:(u=s.next,s.next=e,e.next=u,n.lastEffect=e)),e}function So(){return ge().memoizedState}function ti(e,n,s,u){var c=Ae();Tt.flags|=e,c.memoizedState=lr(1|n,s,void 0,u===void 0?null:u)}function ei(e,n,s,u){var c=ge();u=u===void 0?null:u;var g=void 0;if(Nt!==null){var y=Nt.memoizedState;if(g=y.destroy,u!==null&&ws(u,y.deps)){c.memoizedState=lr(n,s,g,u);return}}Tt.flags|=e,c.memoizedState=lr(1|n,s,g,u)}function xo(e,n){return ti(8390656,8,e,n)}function Ts(e,n){return ei(2048,8,e,n)}function wo(e,n){return ei(4,2,e,n)}function Co(e,n){return ei(4,4,e,n)}function Po(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function ko(e,n,s){return s=s!=null?s.concat([e]):null,ei(4,4,Po.bind(null,n,e),s)}function Rs(){}function Eo(e,n){var s=ge();n=n===void 0?null:n;var u=s.memoizedState;return u!==null&&n!==null&&ws(n,u[1])?u[0]:(s.memoizedState=[e,n],e)}function To(e,n){var s=ge();n=n===void 0?null:n;var u=s.memoizedState;return u!==null&&n!==null&&ws(n,u[1])?u[0]:(e=e(),s.memoizedState=[e,n],e)}function Ro(e,n,s){return pn&21?(_e(s,n)||(s=Va(),Tt.lanes|=s,mn|=s,e.baseState=!0),n):(e.baseState&&(e.baseState=!1,$t=!0),e.memoizedState=s)}function ac(e,n){var s=ht;ht=s!==0&&4>s?s:4,e(!0);var u=xs.transition;xs.transition={};try{e(!1),n()}finally{ht=s,xs.transition=u}}function Ao(){return ge().memoizedState}function oc(e,n,s){var u=Ze(e);if(s={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null},Mo(e))Lo(n,s);else if(s=ao(e,n,s,u),s!==null){var c=jt();pe(s,e,u,c),Io(s,n,u)}}function lc(e,n,s){var u=Ze(e),c={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null};if(Mo(e))Lo(n,c);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=n.lastRenderedReducer,g!==null))try{var y=n.lastRenderedState,C=g(y,s);if(c.hasEagerState=!0,c.eagerState=C,_e(C,y)){var T=n.interleaved;T===null?(c.next=c,ps(n)):(c.next=T.next,T.next=c),n.interleaved=c;return}}catch{}finally{}s=ao(e,n,c,u),s!==null&&(c=jt(),pe(s,e,u,c),Io(s,n,u))}}function Mo(e){var n=e.alternate;return e===Tt||n!==null&&n===Tt}function Lo(e,n){sr=$r=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function Io(e,n,s){if(s&4194240){var u=n.lanes;u&=e.pendingLanes,s|=u,n.lanes=s,es(e,s)}}var ni={readContext:de,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},hc={readContext:de,useCallback:function(e,n){return Ae().memoizedState=[e,n===void 0?null:n],e},useContext:de,useEffect:xo,useImperativeHandle:function(e,n,s){return s=s!=null?s.concat([e]):null,ti(4194308,4,Po.bind(null,n,e),s)},useLayoutEffect:function(e,n){return ti(4194308,4,e,n)},useInsertionEffect:function(e,n){return ti(4,2,e,n)},useMemo:function(e,n){var s=Ae();return n=n===void 0?null:n,e=e(),s.memoizedState=[e,n],e},useReducer:function(e,n,s){var u=Ae();return n=s!==void 0?s(n):n,u.memoizedState=u.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},u.queue=e,e=e.dispatch=oc.bind(null,Tt,e),[u.memoizedState,e]},useRef:function(e){var n=Ae();return e={current:e},n.memoizedState=e},useState:_o,useDebugValue:Rs,useDeferredValue:function(e){return Ae().memoizedState=e},useTransition:function(){var e=_o(!1),n=e[0];return e=ac.bind(null,e[1]),Ae().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,s){var u=Tt,c=Ae();if(Ct){if(s===void 0)throw Error(l(407));s=s()}else{if(s=n(),zt===null)throw Error(l(349));pn&30||go(u,n,s)}c.memoizedState=s;var g={value:s,getSnapshot:n};return c.queue=g,xo(mo.bind(null,u,g,e),[e]),u.flags|=2048,lr(9,po.bind(null,u,g,s,n),void 0,null),s},useId:function(){var e=Ae(),n=zt.identifierPrefix;if(Ct){var s=Fe,u=De;s=(u&~(1<<32-ve(u)-1)).toString(32)+s,n=":"+n+"R"+s,s=ar++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=sc++,n=":"+n+"r"+s.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},uc={readContext:de,useCallback:Eo,useContext:de,useEffect:Ts,useImperativeHandle:ko,useInsertionEffect:wo,useLayoutEffect:Co,useMemo:To,useReducer:ks,useRef:So,useState:function(){return ks(or)},useDebugValue:Rs,useDeferredValue:function(e){var n=ge();return Ro(n,Nt.memoizedState,e)},useTransition:function(){var e=ks(or)[0],n=ge().memoizedState;return[e,n]},useMutableSource:co,useSyncExternalStore:fo,useId:Ao,unstable_isNewReconciler:!1},cc={readContext:de,useCallback:Eo,useContext:de,useEffect:Ts,useImperativeHandle:ko,useInsertionEffect:wo,useLayoutEffect:Co,useMemo:To,useReducer:Es,useRef:So,useState:function(){return Es(or)},useDebugValue:Rs,useDeferredValue:function(e){var n=ge();return Nt===null?n.memoizedState=e:Ro(n,Nt.memoizedState,e)},useTransition:function(){var e=Es(or)[0],n=ge().memoizedState;return[e,n]},useMutableSource:co,useSyncExternalStore:fo,useId:Ao,unstable_isNewReconciler:!1};function xe(e,n){if(e&&e.defaultProps){n=h({},n),e=e.defaultProps;for(var s in e)n[s]===void 0&&(n[s]=e[s]);return n}return n}function As(e,n,s,u){n=e.memoizedState,s=s(u,n),s=s==null?n:h({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var ri={isMounted:function(e){return(e=e._reactInternals)?K(e)===e:!1},enqueueSetState:function(e,n,s){e=e._reactInternals;var u=jt(),c=Ze(e),g=ze(u,c);g.payload=n,s!=null&&(g.callback=s),n=Qe(e,g,c),n!==null&&(pe(n,e,c,u),Qr(n,e,c))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var u=jt(),c=Ze(e),g=ze(u,c);g.tag=1,g.payload=n,s!=null&&(g.callback=s),n=Qe(e,g,c),n!==null&&(pe(n,e,c,u),Qr(n,e,c))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=jt(),u=Ze(e),c=ze(s,u);c.tag=2,n!=null&&(c.callback=n),n=Qe(e,c,u),n!==null&&(pe(n,e,u,s),Qr(n,e,u))}};function No(e,n,s,u,c,g,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(u,g,y):n.prototype&&n.prototype.isPureReactComponent?!Xr(s,u)||!Xr(c,g):!0}function Oo(e,n,s){var u=!1,c=Ve,g=n.contextType;return typeof g=="object"&&g!==null?g=de(g):(c=Zt(n)?cn:Wt.current,u=n.contextTypes,g=(u=u!=null)?Ln(e,c):Ve),n=new n(s,g),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=ri,e.stateNode=n,n._reactInternals=e,u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=g),n}function Go(e,n,s,u){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,u),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,u),n.state!==e&&ri.enqueueReplaceState(n,n.state,null)}function Ms(e,n,s,u){var c=e.stateNode;c.props=s,c.state=e.memoizedState,c.refs={},ms(e);var g=n.contextType;typeof g=="object"&&g!==null?c.context=de(g):(g=Zt(n)?cn:Wt.current,c.context=Ln(e,g)),c.state=e.memoizedState,g=n.getDerivedStateFromProps,typeof g=="function"&&(As(e,n,g,s),c.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(n=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),n!==c.state&&ri.enqueueReplaceState(c,c.state,null),Kr(e,s,c,u),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Bn(e,n){try{var s="",u=n;do s+=ic(u),u=u.return;while(u);var c=s}catch(g){c=`
Error generating stack: `+g.message+`
`+g.stack}return{value:e,source:n,stack:c,digest:null}}function Ls(e,n,s){return{value:e,source:null,stack:s??null,digest:n??null}}function Is(e,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var dc=typeof WeakMap=="function"?WeakMap:Map;function Do(e,n,s){s=ze(-1,s),s.tag=3,s.payload={element:null};var u=n.value;return s.callback=function(){yi||(yi=!0,Zs=u),Is(e,n)},s}function Fo(e,n,s){s=ze(-1,s),s.tag=3;var u=e.type.getDerivedStateFromError;if(typeof u=="function"){var c=n.value;s.payload=function(){return u(c)},s.callback=function(){Is(e,n)}}var g=e.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(s.callback=function(){Is(e,n),typeof u!="function"&&(Ke===null?Ke=new Set([this]):Ke.add(this));var y=n.stack;this.componentDidCatch(n.value,{componentStack:y!==null?y:""})}),s}function zo(e,n,s){var u=e.pingCache;if(u===null){u=e.pingCache=new dc;var c=new Set;u.set(n,c)}else c=u.get(n),c===void 0&&(c=new Set,u.set(n,c));c.has(s)||(c.add(s),e=Ec.bind(null,e,n,s),n.then(e,e))}function bo(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function Bo(e,n,s,u,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===n?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(n=ze(-1,1),n.tag=2,Qe(s,n,1))),s.lanes|=1),e)}var fc=d.ReactCurrentOwner,$t=!1;function Vt(e,n,s,u){n.child=e===null?io(n,null,s,u):Gn(n,e.child,s,u)}function Ho(e,n,s,u,c){s=s.render;var g=n.ref;return Fn(n,c),u=Cs(e,n,s,u,g,c),s=Ps(),e!==null&&!$t?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~c,be(e,n,c)):(Ct&&s&&as(n),n.flags|=1,Vt(e,n,u,c),n.child)}function Wo(e,n,s,u,c){if(e===null){var g=s.type;return typeof g=="function"&&!ia(g)&&g.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=g,Uo(e,n,g,u,c)):(e=Ci(s.type,null,u,n,n.mode,c),e.ref=n.ref,e.return=n,n.child=e)}if(g=e.child,!(e.lanes&c)){var y=g.memoizedProps;if(s=s.compare,s=s!==null?s:Xr,s(y,u)&&e.ref===n.ref)return be(e,n,c)}return n.flags|=1,e=tn(g,u),e.ref=n.ref,e.return=n,n.child=e}function Uo(e,n,s,u,c){if(e!==null){var g=e.memoizedProps;if(Xr(g,u)&&e.ref===n.ref)if($t=!1,n.pendingProps=u=g,(e.lanes&c)!==0)e.flags&131072&&($t=!0);else return n.lanes=e.lanes,be(e,n,c)}return Ns(e,n,s,u,c)}function Yo(e,n,s){var u=n.pendingProps,c=u.children,g=e!==null?e.memoizedState:null;if(u.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},yt(Wn,se),se|=s;else{if(!(s&1073741824))return e=g!==null?g.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,yt(Wn,se),se|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=g!==null?g.baseLanes:s,yt(Wn,se),se|=u}else g!==null?(u=g.baseLanes|s,n.memoizedState=null):u=s,yt(Wn,se),se|=u;return Vt(e,n,c,s),n.child}function Xo(e,n){var s=n.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(n.flags|=512,n.flags|=2097152)}function Ns(e,n,s,u,c){var g=Zt(s)?cn:Wt.current;return g=Ln(n,g),Fn(n,c),s=Cs(e,n,s,u,g,c),u=Ps(),e!==null&&!$t?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~c,be(e,n,c)):(Ct&&u&&as(n),n.flags|=1,Vt(e,n,s,c),n.child)}function jo(e,n,s,u,c){if(Zt(s)){var g=!0;Dr(n)}else g=!1;if(Fn(n,c),n.stateNode===null)si(e,n),Oo(n,s,u),Ms(n,s,u,c),u=!0;else if(e===null){var y=n.stateNode,C=n.memoizedProps;y.props=C;var T=y.context,D=s.contextType;typeof D=="object"&&D!==null?D=de(D):(D=Zt(s)?cn:Wt.current,D=Ln(n,D));var q=s.getDerivedStateFromProps,nt=typeof q=="function"||typeof y.getSnapshotBeforeUpdate=="function";nt||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C!==u||T!==D)&&Go(n,y,u,D),qe=!1;var W=n.memoizedState;y.state=W,Kr(n,u,y,c),T=n.memoizedState,C!==u||W!==T||Jt.current||qe?(typeof q=="function"&&(As(n,s,q,u),T=n.memoizedState),(C=qe||No(n,s,C,u,W,T,D))?(nt||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(n.flags|=4194308)):(typeof y.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=u,n.memoizedState=T),y.props=u,y.state=T,y.context=D,u=C):(typeof y.componentDidMount=="function"&&(n.flags|=4194308),u=!1)}else{y=n.stateNode,oo(e,n),C=n.memoizedProps,D=n.type===n.elementType?C:xe(n.type,C),y.props=D,nt=n.pendingProps,W=y.context,T=s.contextType,typeof T=="object"&&T!==null?T=de(T):(T=Zt(s)?cn:Wt.current,T=Ln(n,T));var xt=s.getDerivedStateFromProps;(q=typeof xt=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C!==nt||W!==T)&&Go(n,y,u,T),qe=!1,W=n.memoizedState,y.state=W,Kr(n,u,y,c);var pt=n.memoizedState;C!==nt||W!==pt||Jt.current||qe?(typeof xt=="function"&&(As(n,s,xt,u),pt=n.memoizedState),(D=qe||No(n,s,D,u,W,pt,T)||!1)?(q||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,pt,T),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,pt,T)),typeof y.componentDidUpdate=="function"&&(n.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof y.componentDidUpdate!="function"||C===e.memoizedProps&&W===e.memoizedState||(n.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||C===e.memoizedProps&&W===e.memoizedState||(n.flags|=1024),n.memoizedProps=u,n.memoizedState=pt),y.props=u,y.state=pt,y.context=T,u=D):(typeof y.componentDidUpdate!="function"||C===e.memoizedProps&&W===e.memoizedState||(n.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||C===e.memoizedProps&&W===e.memoizedState||(n.flags|=1024),u=!1)}return Os(e,n,s,u,g,c)}function Os(e,n,s,u,c,g){Xo(e,n);var y=(n.flags&128)!==0;if(!u&&!y)return c&&ja(n,s,!1),be(e,n,g);u=n.stateNode,fc.current=n;var C=y&&typeof s.getDerivedStateFromError!="function"?null:u.render();return n.flags|=1,e!==null&&y?(n.child=Gn(n,e.child,null,g),n.child=Gn(n,null,C,g)):Vt(e,n,C,g),n.memoizedState=u.state,c&&ja(n,s,!0),n.child}function Vo(e){var n=e.stateNode;n.pendingContext?Ya(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Ya(e,n.context,!1),ys(e,n.containerInfo)}function qo(e,n,s,u,c){return On(),us(c),n.flags|=256,Vt(e,n,s,u),n.child}var Gs={dehydrated:null,treeContext:null,retryLane:0};function Ds(e){return{baseLanes:e,cachePool:null,transitions:null}}function Qo(e,n,s){var u=n.pendingProps,c=Et.current,g=!1,y=(n.flags&128)!==0,C;if((C=y)||(C=e!==null&&e.memoizedState===null?!1:(c&2)!==0),C?(g=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),yt(Et,c&1),e===null)return hs(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(n.mode&1?qi(e)?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(y=u.children,e=u.fallback,g?(u=n.mode,g=n.child,y={mode:"hidden",children:y},!(u&1)&&g!==null?(g.childLanes=0,g.pendingProps=y):g=Pi(y,u,0,null),e=Sn(e,u,s,null),g.return=n,e.return=n,g.sibling=e,n.child=g,n.child.memoizedState=Ds(s),n.memoizedState=Gs,e):Fs(n,y));if(c=e.memoizedState,c!==null&&(C=c.dehydrated,C!==null))return gc(e,n,y,u,C,c,s);if(g){g=u.fallback,y=n.mode,c=e.child,C=c.sibling;var T={mode:"hidden",children:u.children};return!(y&1)&&n.child!==c?(u=n.child,u.childLanes=0,u.pendingProps=T,n.deletions=null):(u=tn(c,T),u.subtreeFlags=c.subtreeFlags&14680064),C!==null?g=tn(C,g):(g=Sn(g,y,s,null),g.flags|=2),g.return=n,u.return=n,u.sibling=g,n.child=u,u=g,g=n.child,y=e.child.memoizedState,y=y===null?Ds(s):{baseLanes:y.baseLanes|s,cachePool:null,transitions:y.transitions},g.memoizedState=y,g.childLanes=e.childLanes&~s,n.memoizedState=Gs,u}return g=e.child,e=g.sibling,u=tn(g,{mode:"visible",children:u.children}),!(n.mode&1)&&(u.lanes=s),u.return=n,u.sibling=null,e!==null&&(s=n.deletions,s===null?(n.deletions=[e],n.flags|=16):s.push(e)),n.child=u,n.memoizedState=null,u}function Fs(e,n){return n=Pi({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function ii(e,n,s,u){return u!==null&&us(u),Gn(n,e.child,null,s),e=Fs(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function gc(e,n,s,u,c,g,y){if(s)return n.flags&256?(n.flags&=-257,u=Ls(Error(l(422))),ii(e,n,y,u)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(g=u.fallback,c=n.mode,u=Pi({mode:"visible",children:u.children},c,0,null),g=Sn(g,c,y,null),g.flags|=2,u.return=n,g.return=n,u.sibling=g,n.child=u,n.mode&1&&Gn(n,e.child,null,y),n.child.memoizedState=Ds(y),n.memoizedState=Gs,g);if(!(n.mode&1))return ii(e,n,y,null);if(qi(c))return u=Tu(c).digest,g=Error(l(419)),u=Ls(g,u,void 0),ii(e,n,y,u);if(s=(y&e.childLanes)!==0,$t||s){if(u=zt,u!==null){switch(y&-y){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(u.suspendedLanes|y)?0:c,c!==0&&c!==g.retryLane&&(g.retryLane=c,Te(e,c),pe(u,e,c,-1))}return ra(),u=Ls(Error(l(421))),ii(e,n,y,u)}return Ua(c)?(n.flags|=128,n.child=e.child,n=Tc.bind(null,e),Ru(c,n),null):(e=g.treeContext,le&&(ce=Lu(c),ie=n,Ct=!0,Se=null,er=!1,e!==null&&(he[ue++]=De,he[ue++]=Fe,he[ue++]=dn,De=e.id,Fe=e.overflow,dn=n)),n=Fs(n,u.children),n.flags|=4096,n)}function Ko(e,n,s){e.lanes|=n;var u=e.alternate;u!==null&&(u.lanes|=n),gs(e.return,n,s)}function zs(e,n,s,u,c){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:c}:(g.isBackwards=n,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=s,g.tailMode=c)}function Jo(e,n,s){var u=n.pendingProps,c=u.revealOrder,g=u.tail;if(Vt(e,n,u.children,s),u=Et.current,u&2)u=u&1|2,n.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ko(e,s,n);else if(e.tag===19)Ko(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}u&=1}if(yt(Et,u),!(n.mode&1))n.memoizedState=null;else switch(c){case"forwards":for(s=n.child,c=null;s!==null;)e=s.alternate,e!==null&&Jr(e)===null&&(c=s),s=s.sibling;s=c,s===null?(c=n.child,n.child=null):(c=s.sibling,s.sibling=null),zs(n,!1,c,s,g);break;case"backwards":for(s=null,c=n.child,n.child=null;c!==null;){if(e=c.alternate,e!==null&&Jr(e)===null){n.child=c;break}e=c.sibling,c.sibling=s,s=c,c=e}zs(n,!0,s,null,g);break;case"together":zs(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function si(e,n){!(n.mode&1)&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function be(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),mn|=n.lanes,!(s&n.childLanes))return null;if(e!==null&&n.child!==e.child)throw Error(l(153));if(n.child!==null){for(e=n.child,s=tn(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=tn(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function pc(e,n,s){switch(n.tag){case 3:Vo(n),On();break;case 5:uo(n);break;case 1:Zt(n.type)&&Dr(n);break;case 4:ys(n,n.stateNode.containerInfo);break;case 10:so(n,n.type._context,n.memoizedProps.value);break;case 13:var u=n.memoizedState;if(u!==null)return u.dehydrated!==null?(yt(Et,Et.current&1),n.flags|=128,null):s&n.child.childLanes?Qo(e,n,s):(yt(Et,Et.current&1),e=be(e,n,s),e!==null?e.sibling:null);yt(Et,Et.current&1);break;case 19:if(u=(s&n.childLanes)!==0,e.flags&128){if(u)return Jo(e,n,s);n.flags|=128}var c=n.memoizedState;if(c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),yt(Et,Et.current),u)break;return null;case 22:case 23:return n.lanes=0,Yo(e,n,s)}return be(e,n,s)}function Me(e){e.flags|=4}function Zo(e,n){if(e!==null&&e.child===n.child)return!0;if(n.flags&16)return!1;for(e=n.child;e!==null;){if(e.flags&12854||e.subtreeFlags&12854)return!1;e=e.sibling}return!0}var hr,ur,ai,oi;if(re)hr=function(e,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)kt(e,s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},ur=function(){},ai=function(e,n,s,u,c){if(e=e.memoizedProps,e!==u){var g=n.stateNode,y=Re(fe.current);s=Ga(g,s,e,u,c,y),(n.updateQueue=s)&&Me(n)}},oi=function(e,n,s,u){s!==u&&Me(n)};else if(Nr){hr=function(e,n,s,u){for(var c=n.child;c!==null;){if(c.tag===5){var g=c.stateNode;s&&u&&(g=Ha(g,c.type,c.memoizedProps,c)),kt(e,g)}else if(c.tag===6)g=c.stateNode,s&&u&&(g=Wa(g,c.memoizedProps,c)),kt(e,g);else if(c.tag!==4){if(c.tag===22&&c.memoizedState!==null)g=c.child,g!==null&&(g.return=c),hr(e,c,!0,!0);else if(c.child!==null){c.child.return=c,c=c.child;continue}}if(c===n)break;for(;c.sibling===null;){if(c.return===null||c.return===n)return;c=c.return}c.sibling.return=c.return,c=c.sibling}};var $o=function(e,n,s,u){for(var c=n.child;c!==null;){if(c.tag===5){var g=c.stateNode;s&&u&&(g=Ha(g,c.type,c.memoizedProps,c)),Ba(e,g)}else if(c.tag===6)g=c.stateNode,s&&u&&(g=Wa(g,c.memoizedProps,c)),Ba(e,g);else if(c.tag!==4){if(c.tag===22&&c.memoizedState!==null)g=c.child,g!==null&&(g.return=c),$o(e,c,!0,!0);else if(c.child!==null){c.child.return=c,c=c.child;continue}}if(c===n)break;for(;c.sibling===null;){if(c.return===null||c.return===n)return;c=c.return}c.sibling.return=c.return,c=c.sibling}};ur=function(e,n){var s=n.stateNode;if(!Zo(e,n)){e=s.containerInfo;var u=ba(e);$o(u,n,!1,!1),s.pendingChildren=u,Me(n),Cu(e,u)}},ai=function(e,n,s,u,c){var g=e.stateNode,y=e.memoizedProps;if((e=Zo(e,n))&&y===u)n.stateNode=g;else{var C=n.stateNode,T=Re(fe.current),D=null;y!==u&&(D=Ga(C,s,y,u,c,T)),e&&D===null?n.stateNode=g:(g=wu(g,D,s,y,u,n,e,C),Kt(g,s,u,c,T)&&Me(n),n.stateNode=g,e?Me(n):hr(g,n,!1,!1))}},oi=function(e,n,s,u){s!==u?(e=Re(zn.current),s=Re(fe.current),n.stateNode=Da(u,e,s,n),Me(n)):n.stateNode=e.stateNode}}else ur=function(){},ai=function(){},oi=function(){};function cr(e,n){if(!Ct)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:u.sibling=null}}function Yt(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,u=0;if(n)for(var c=e.child;c!==null;)s|=c.lanes|c.childLanes,u|=c.subtreeFlags&14680064,u|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)s|=c.lanes|c.childLanes,u|=c.subtreeFlags,u|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=u,e.childLanes=s,n}function mc(e,n,s){var u=n.pendingProps;switch(os(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(n),null;case 1:return Zt(n.type)&&Gr(),Yt(n),null;case 3:return s=n.stateNode,bn(),St(Jt),St(Wt),Ss(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Yr(n)?Me(n):e===null||e.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,Se!==null&&(ea(Se),Se=null))),ur(e,n),Yt(n),null;case 5:vs(n),s=Re(zn.current);var c=n.type;if(e!==null&&n.stateNode!=null)ai(e,n,c,u,s),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!u){if(n.stateNode===null)throw Error(l(166));return Yt(n),null}if(e=Re(fe.current),Yr(n)){if(!le)throw Error(l(175));e=Iu(n.stateNode,n.type,n.memoizedProps,s,e,n,!er),n.updateQueue=e,e!==null&&Me(n)}else{var g=dt(c,u,s,e,n);hr(g,n,!1,!1),n.stateNode=g,Kt(g,c,u,s,e)&&Me(n)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Yt(n),null;case 6:if(e&&n.stateNode!=null)oi(e,n,e.memoizedProps,u);else{if(typeof u!="string"&&n.stateNode===null)throw Error(l(166));if(e=Re(zn.current),s=Re(fe.current),Yr(n)){if(!le)throw Error(l(176));if(e=n.stateNode,s=n.memoizedProps,(u=Nu(e,s,n,!er))&&(c=ie,c!==null))switch(c.tag){case 3:Hu(c.stateNode.containerInfo,e,s,(c.mode&1)!==0);break;case 5:Wu(c.type,c.memoizedProps,c.stateNode,e,s,(c.mode&1)!==0)}u&&Me(n)}else n.stateNode=Da(u,e,s,n)}return Yt(n),null;case 13:if(St(Et),u=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ct&&ce!==null&&n.mode&1&&!(n.flags&128))eo(),On(),n.flags|=98560,c=!1;else if(c=Yr(n),u!==null&&u.dehydrated!==null){if(e===null){if(!c)throw Error(l(318));if(!le)throw Error(l(344));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(l(317));Ou(c,n)}else On(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;Yt(n),c=!1}else Se!==null&&(ea(Se),Se=null),c=!0;if(!c)return n.flags&65536?n:null}return n.flags&128?(n.lanes=s,n):(s=u!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(n.child.flags|=8192,n.mode&1&&(e===null||Et.current&1?Ot===0&&(Ot=3):ra())),n.updateQueue!==null&&(n.flags|=4),Yt(n),null);case 4:return bn(),ur(e,n),e===null&&Jh(n.stateNode.containerInfo),Yt(n),null;case 10:return fs(n.type._context),Yt(n),null;case 17:return Zt(n.type)&&Gr(),Yt(n),null;case 19:if(St(Et),c=n.memoizedState,c===null)return Yt(n),null;if(u=(n.flags&128)!==0,g=c.rendering,g===null)if(u)cr(c,!1);else{if(Ot!==0||e!==null&&e.flags&128)for(e=n.child;e!==null;){if(g=Jr(e),g!==null){for(n.flags|=128,cr(c,!1),e=g.updateQueue,e!==null&&(n.updateQueue=e,n.flags|=4),n.subtreeFlags=0,e=s,s=n.child;s!==null;)u=s,c=e,u.flags&=14680066,g=u.alternate,g===null?(u.childLanes=0,u.lanes=c,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=g.childLanes,u.lanes=g.lanes,u.child=g.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=g.memoizedProps,u.memoizedState=g.memoizedState,u.updateQueue=g.updateQueue,u.type=g.type,c=g.dependencies,u.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),s=s.sibling;return yt(Et,Et.current&1|2),n.child}e=e.sibling}c.tail!==null&&Dt()>Js&&(n.flags|=128,u=!0,cr(c,!1),n.lanes=4194304)}else{if(!u)if(e=Jr(g),e!==null){if(n.flags|=128,u=!0,e=e.updateQueue,e!==null&&(n.updateQueue=e,n.flags|=4),cr(c,!0),c.tail===null&&c.tailMode==="hidden"&&!g.alternate&&!Ct)return Yt(n),null}else 2*Dt()-c.renderingStartTime>Js&&s!==1073741824&&(n.flags|=128,u=!0,cr(c,!1),n.lanes=4194304);c.isBackwards?(g.sibling=n.child,n.child=g):(e=c.last,e!==null?e.sibling=g:n.child=g,c.last=g)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Dt(),n.sibling=null,e=Et.current,yt(Et,u?e&1|2:e&1),n):(Yt(n),null);case 22:case 23:return na(),s=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(n.flags|=8192),s&&n.mode&1?se&1073741824&&(Yt(n),re&&n.subtreeFlags&6&&(n.flags|=8192)):Yt(n),null;case 24:return null;case 25:return null}throw Error(l(156,n.tag))}function yc(e,n){switch(os(n),n.tag){case 1:return Zt(n.type)&&Gr(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return bn(),St(Jt),St(Wt),Ss(),e=n.flags,e&65536&&!(e&128)?(n.flags=e&-65537|128,n):null;case 5:return vs(n),null;case 13:if(St(Et),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(l(340));On()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return St(Et),null;case 4:return bn(),null;case 10:return fs(n.type._context),null;case 22:case 23:return na(),null;case 24:return null;default:return null}}var li=!1,Xt=!1,vc=typeof WeakSet=="function"?WeakSet:Set,V=null;function Hn(e,n){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(u){Pt(e,n,u)}else s.current=null}function bs(e,n,s){try{s()}catch(u){Pt(e,n,u)}}var tl=!1;function _c(e,n){for(gt(e.containerInfo),V=n;V!==null;)if(e=V,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,V=n;else for(;V!==null;){e=V;try{var s=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(s!==null){var u=s.memoizedProps,c=s.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?u:xe(e.type,u),c);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:re&&xu(e.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(l(163))}}catch(C){Pt(e,e.return,C)}if(n=e.sibling,n!==null){n.return=e.return,V=n;break}V=e.return}return s=tl,tl=!1,s}function dr(e,n,s){var u=n.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var c=u=u.next;do{if((c.tag&e)===e){var g=c.destroy;c.destroy=void 0,g!==void 0&&bs(n,s,g)}c=c.next}while(c!==u)}}function hi(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var u=s.create;s.destroy=u()}s=s.next}while(s!==n)}}function Bs(e){var n=e.ref;if(n!==null){var s=e.stateNode;switch(e.tag){case 5:e=X(s);break;default:e=s}typeof n=="function"?n(e):n.current=e}}function el(e){var n=e.alternate;n!==null&&(e.alternate=null,el(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&$h(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function nl(e){return e.tag===5||e.tag===3||e.tag===4}function rl(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||nl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hs(e,n,s){var u=e.tag;if(u===5||u===6)e=e.stateNode,n?gu(s,e,n):hu(s,e);else if(u!==4&&(e=e.child,e!==null))for(Hs(e,n,s),e=e.sibling;e!==null;)Hs(e,n,s),e=e.sibling}function Ws(e,n,s){var u=e.tag;if(u===5||u===6)e=e.stateNode,n?fu(s,e,n):lu(s,e);else if(u!==4&&(e=e.child,e!==null))for(Ws(e,n,s),e=e.sibling;e!==null;)Ws(e,n,s),e=e.sibling}var Bt=null,we=!1;function Le(e,n,s){for(s=s.child;s!==null;)Us(e,n,s),s=s.sibling}function Us(e,n,s){if(ke&&typeof ke.onCommitFiberUnmount=="function")try{ke.onCommitFiberUnmount(Br,s)}catch{}switch(s.tag){case 5:Xt||Hn(s,n);case 6:if(re){var u=Bt,c=we;Bt=null,Le(e,n,s),Bt=u,we=c,Bt!==null&&(we?mu(Bt,s.stateNode):pu(Bt,s.stateNode))}else Le(e,n,s);break;case 18:re&&Bt!==null&&(we?bu(Bt,s.stateNode):zu(Bt,s.stateNode));break;case 4:re?(u=Bt,c=we,Bt=s.stateNode.containerInfo,we=!0,Le(e,n,s),Bt=u,we=c):(Nr&&(u=s.stateNode.containerInfo,c=ba(u),Vi(u,c)),Le(e,n,s));break;case 0:case 11:case 14:case 15:if(!Xt&&(u=s.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){c=u=u.next;do{var g=c,y=g.destroy;g=g.tag,y!==void 0&&(g&2||g&4)&&bs(s,n,y),c=c.next}while(c!==u)}Le(e,n,s);break;case 1:if(!Xt&&(Hn(s,n),u=s.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=s.memoizedProps,u.state=s.memoizedState,u.componentWillUnmount()}catch(C){Pt(s,n,C)}Le(e,n,s);break;case 21:Le(e,n,s);break;case 22:s.mode&1?(Xt=(u=Xt)||s.memoizedState!==null,Le(e,n,s),Xt=u):Le(e,n,s);break;default:Le(e,n,s)}}function il(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new vc),n.forEach(function(u){var c=Rc.bind(null,e,u);s.has(u)||(s.add(u),u.then(c,c))})}}function Ce(e,n){var s=n.deletions;if(s!==null)for(var u=0;u<s.length;u++){var c=s[u];try{var g=e,y=n;if(re){var C=y;t:for(;C!==null;){switch(C.tag){case 5:Bt=C.stateNode,we=!1;break t;case 3:Bt=C.stateNode.containerInfo,we=!0;break t;case 4:Bt=C.stateNode.containerInfo,we=!0;break t}C=C.return}if(Bt===null)throw Error(l(160));Us(g,y,c),Bt=null,we=!1}else Us(g,y,c);var T=c.alternate;T!==null&&(T.return=null),c.return=null}catch(D){Pt(c,n,D)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)sl(n,e),n=n.sibling}function sl(e,n){var s=e.alternate,u=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ce(n,e),Ie(e),u&4){try{dr(3,e,e.return),hi(3,e)}catch(W){Pt(e,e.return,W)}try{dr(5,e,e.return)}catch(W){Pt(e,e.return,W)}}break;case 1:Ce(n,e),Ie(e),u&512&&s!==null&&Hn(s,s.return);break;case 5:if(Ce(n,e),Ie(e),u&512&&s!==null&&Hn(s,s.return),re){if(e.flags&32){var c=e.stateNode;try{za(c)}catch(W){Pt(e,e.return,W)}}if(u&4&&(c=e.stateNode,c!=null)){var g=e.memoizedProps;if(s=s!==null?s.memoizedProps:g,u=e.type,n=e.updateQueue,e.updateQueue=null,n!==null)try{du(c,n,u,s,g,e)}catch(W){Pt(e,e.return,W)}}}break;case 6:if(Ce(n,e),Ie(e),u&4&&re){if(e.stateNode===null)throw Error(l(162));c=e.stateNode,g=e.memoizedProps,s=s!==null?s.memoizedProps:g;try{uu(c,s,g)}catch(W){Pt(e,e.return,W)}}break;case 3:if(Ce(n,e),Ie(e),u&4){if(re&&le&&s!==null&&s.memoizedState.isDehydrated)try{Du(n.containerInfo)}catch(W){Pt(e,e.return,W)}if(Nr){c=n.containerInfo,g=n.pendingChildren;try{Vi(c,g)}catch(W){Pt(e,e.return,W)}}}break;case 4:if(Ce(n,e),Ie(e),u&4&&Nr){g=e.stateNode,c=g.containerInfo,g=g.pendingChildren;try{Vi(c,g)}catch(W){Pt(e,e.return,W)}}break;case 13:Ce(n,e),Ie(e),c=e.child,c.flags&8192&&(g=c.memoizedState!==null,c.stateNode.isHidden=g,!g||c.alternate!==null&&c.alternate.memoizedState!==null||(Ks=Dt())),u&4&&il(e);break;case 22:var y=s!==null&&s.memoizedState!==null;if(e.mode&1?(Xt=(s=Xt)||y,Ce(n,e),Xt=s):Ce(n,e),Ie(e),u&8192){if(s=e.memoizedState!==null,(e.stateNode.isHidden=s)&&!y&&e.mode&1)for(V=e,u=e.child;u!==null;){for(n=V=u;V!==null;){y=V;var C=y.child;switch(y.tag){case 0:case 11:case 14:case 15:dr(4,y,y.return);break;case 1:Hn(y,y.return);var T=y.stateNode;if(typeof T.componentWillUnmount=="function"){var D=y,q=y.return;try{var nt=D;T.props=nt.memoizedProps,T.state=nt.memoizedState,T.componentWillUnmount()}catch(W){Pt(D,q,W)}}break;case 5:Hn(y,y.return);break;case 22:if(y.memoizedState!==null){ll(n);continue}}C!==null?(C.return=y,V=C):ll(n)}u=u.sibling}if(re){t:if(u=null,re)for(n=e;;){if(n.tag===5){if(u===null){u=n;try{c=n.stateNode,s?yu(c):_u(n.stateNode,n.memoizedProps)}catch(W){Pt(e,e.return,W)}}}else if(n.tag===6){if(u===null)try{g=n.stateNode,s?vu(g):Su(g,n.memoizedProps)}catch(W){Pt(e,e.return,W)}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;u===n&&(u=null),n=n.return}u===n&&(u=null),n.sibling.return=n.return,n=n.sibling}}}break;case 19:Ce(n,e),Ie(e),u&4&&il(e);break;case 21:break;default:Ce(n,e),Ie(e)}}function Ie(e){var n=e.flags;if(n&2){try{if(re){t:{for(var s=e.return;s!==null;){if(nl(s)){var u=s;break t}s=s.return}throw Error(l(160))}switch(u.tag){case 5:var c=u.stateNode;u.flags&32&&(za(c),u.flags&=-33);var g=rl(e);Ws(e,g,c);break;case 3:case 4:var y=u.stateNode.containerInfo,C=rl(e);Hs(e,C,y);break;default:throw Error(l(161))}}}catch(T){Pt(e,e.return,T)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Sc(e,n,s){V=e,al(e)}function al(e,n,s){for(var u=(e.mode&1)!==0;V!==null;){var c=V,g=c.child;if(c.tag===22&&u){var y=c.memoizedState!==null||li;if(!y){var C=c.alternate,T=C!==null&&C.memoizedState!==null||Xt;C=li;var D=Xt;if(li=y,(Xt=T)&&!D)for(V=c;V!==null;)y=V,T=y.child,y.tag===22&&y.memoizedState!==null?hl(c):T!==null?(T.return=y,V=T):hl(c);for(;g!==null;)V=g,al(g),g=g.sibling;V=c,li=C,Xt=D}ol(e)}else c.subtreeFlags&8772&&g!==null?(g.return=c,V=g):ol(e)}}function ol(e){for(;V!==null;){var n=V;if(n.flags&8772){var s=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:Xt||hi(5,n);break;case 1:var u=n.stateNode;if(n.flags&4&&!Xt)if(s===null)u.componentDidMount();else{var c=n.elementType===n.type?s.memoizedProps:xe(n.type,s.memoizedProps);u.componentDidUpdate(c,s.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var g=n.updateQueue;g!==null&&ho(n,g,u);break;case 3:var y=n.updateQueue;if(y!==null){if(s=null,n.child!==null)switch(n.child.tag){case 5:s=X(n.child.stateNode);break;case 1:s=n.child.stateNode}ho(n,y,s)}break;case 5:var C=n.stateNode;s===null&&n.flags&4&&cu(C,n.type,n.memoizedProps,n);break;case 6:break;case 4:break;case 12:break;case 13:if(le&&n.memoizedState===null){var T=n.alternate;if(T!==null){var D=T.memoizedState;if(D!==null){var q=D.dehydrated;q!==null&&Fu(q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(l(163))}Xt||n.flags&512&&Bs(n)}catch(nt){Pt(n,n.return,nt)}}if(n===e){V=null;break}if(s=n.sibling,s!==null){s.return=n.return,V=s;break}V=n.return}}function ll(e){for(;V!==null;){var n=V;if(n===e){V=null;break}var s=n.sibling;if(s!==null){s.return=n.return,V=s;break}V=n.return}}function hl(e){for(;V!==null;){var n=V;try{switch(n.tag){case 0:case 11:case 15:var s=n.return;try{hi(4,n)}catch(T){Pt(n,s,T)}break;case 1:var u=n.stateNode;if(typeof u.componentDidMount=="function"){var c=n.return;try{u.componentDidMount()}catch(T){Pt(n,c,T)}}var g=n.return;try{Bs(n)}catch(T){Pt(n,g,T)}break;case 5:var y=n.return;try{Bs(n)}catch(T){Pt(n,y,T)}}}catch(T){Pt(n,n.return,T)}if(n===e){V=null;break}var C=n.sibling;if(C!==null){C.return=n.return,V=C;break}V=n.return}}var ui=0,ci=1,di=2,fi=3,gi=4;if(typeof Symbol=="function"&&Symbol.for){var fr=Symbol.for;ui=fr("selector.component"),ci=fr("selector.has_pseudo_class"),di=fr("selector.role"),fi=fr("selector.test_id"),gi=fr("selector.text")}function Ys(e){var n=Kh(e);if(n!=null){if(typeof n.memoizedProps["data-testname"]!="string")throw Error(l(364));return n}if(e=nu(e),e===null)throw Error(l(362));return e.stateNode.current}function Xs(e,n){switch(n.$$typeof){case ui:if(e.type===n.value)return!0;break;case ci:t:{n=n.value,e=[e,0];for(var s=0;s<e.length;){var u=e[s++],c=e[s++],g=n[c];if(u.tag!==5||!Jn(u)){for(;g!=null&&Xs(u,g);)c++,g=n[c];if(c===n.length){n=!0;break t}else for(u=u.child;u!==null;)e.push(u,c),u=u.sibling}}n=!1}return n;case di:if(e.tag===5&&su(e.stateNode,n.value))return!0;break;case gi:if((e.tag===5||e.tag===6)&&(e=iu(e),e!==null&&0<=e.indexOf(n.value)))return!0;break;case fi:if(e.tag===5&&(e=e.memoizedProps["data-testname"],typeof e=="string"&&e.toLowerCase()===n.value.toLowerCase()))return!0;break;default:throw Error(l(365))}return!1}function js(e){switch(e.$$typeof){case ui:return"<"+(U(e.value)||"Unknown")+">";case ci:return":has("+(js(e)||"")+")";case di:return'[role="'+e.value+'"]';case gi:return'"'+e.value+'"';case fi:return'[data-testname="'+e.value+'"]';default:throw Error(l(365))}}function ul(e,n){var s=[];e=[e,0];for(var u=0;u<e.length;){var c=e[u++],g=e[u++],y=n[g];if(c.tag!==5||!Jn(c)){for(;y!=null&&Xs(c,y);)g++,y=n[g];if(g===n.length)s.push(c);else for(c=c.child;c!==null;)e.push(c,g),c=c.sibling}}return s}function Vs(e,n){if(!Kn)throw Error(l(363));e=Ys(e),e=ul(e,n),n=[],e=Array.from(e);for(var s=0;s<e.length;){var u=e[s++];if(u.tag===5)Jn(u)||n.push(u.stateNode);else for(u=u.child;u!==null;)e.push(u),u=u.sibling}return n}var xc=Math.ceil,pi=d.ReactCurrentDispatcher,qs=d.ReactCurrentOwner,Mt=d.ReactCurrentBatchConfig,st=0,zt=null,It=null,Ht=0,se=0,Wn=je(0),Ot=0,gr=null,mn=0,mi=0,Qs=0,pr=null,te=null,Ks=0,Js=1/0,Be=null;function Un(){Js=Dt()+500}var yi=!1,Zs=null,Ke=null,vi=!1,Je=null,_i=0,mr=0,$s=null,Si=-1,xi=0;function jt(){return st&6?Dt():Si!==-1?Si:Si=Dt()}function Ze(e){return e.mode&1?st&2&&Ht!==0?Ht&-Ht:rc.transition!==null?(xi===0&&(xi=Va()),xi):(e=ht,e!==0?e:Zh()):1}function pe(e,n,s,u){if(50<mr)throw mr=0,$s=null,Error(l(185));tr(e,s,u),(!(st&2)||e!==zt)&&(e===zt&&(!(st&2)&&(mi|=s),Ot===4&&$e(e,Ht)),ee(e,u),s===1&&st===0&&!(n.mode&1)&&(Un(),Hr&&Ee()))}function ee(e,n){var s=e.callbackNode;qu(e,n);var u=br(e,e===zt?Ht:0);if(u===0)s!==null&&Qa(s),e.callbackNode=null,e.callbackPriority=0;else if(n=u&-u,e.callbackPriority!==n){if(s!=null&&Qa(s),n===1)e.tag===0?nc(dl.bind(null,e)):Ka(dl.bind(null,e)),tu?eu(function(){!(st&6)&&Ee()}):ns(rs,Ee),s=null;else{switch(qa(u)){case 1:s=rs;break;case 4:s=Zu;break;case 16:s=is;break;case 536870912:s=$u;break;default:s=is}s=xl(s,cl.bind(null,e))}e.callbackPriority=n,e.callbackNode=s}}function cl(e,n){if(Si=-1,xi=0,st&6)throw Error(l(327));var s=e.callbackNode;if(_n()&&e.callbackNode!==s)return null;var u=br(e,e===zt?Ht:0);if(u===0)return null;if(u&30||u&e.expiredLanes||n)n=wi(e,u);else{n=u;var c=st;st|=2;var g=pl();(zt!==e||Ht!==n)&&(Be=null,Un(),yn(e,n));do try{Pc();break}catch(C){gl(e,C)}while(!0);ds(),pi.current=g,st=c,It!==null?n=0:(zt=null,Ht=0,n=Ot)}if(n!==0){if(n===2&&(c=$i(e),c!==0&&(u=c,n=ta(e,c))),n===1)throw s=gr,yn(e,0),$e(e,u),ee(e,Dt()),s;if(n===6)$e(e,u);else{if(c=e.current.alternate,!(u&30)&&!wc(c)&&(n=wi(e,u),n===2&&(g=$i(e),g!==0&&(u=g,n=ta(e,g))),n===1))throw s=gr,yn(e,0),$e(e,u),ee(e,Dt()),s;switch(e.finishedWork=c,e.finishedLanes=u,n){case 0:case 1:throw Error(l(345));case 2:vn(e,te,Be);break;case 3:if($e(e,u),(u&130023424)===u&&(n=Ks+500-Dt(),10<n)){if(br(e,0)!==0)break;if(c=e.suspendedLanes,(c&u)!==u){jt(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Fa(vn.bind(null,e,te,Be),n);break}vn(e,te,Be);break;case 4:if($e(e,u),(u&4194240)===u)break;for(n=e.eventTimes,c=-1;0<u;){var y=31-ve(u);g=1<<y,y=n[y],y>c&&(c=y),u&=~g}if(u=c,u=Dt()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*xc(u/1960))-u,10<u){e.timeoutHandle=Fa(vn.bind(null,e,te,Be),u);break}vn(e,te,Be);break;case 5:vn(e,te,Be);break;default:throw Error(l(329))}}}return ee(e,Dt()),e.callbackNode===s?cl.bind(null,e):null}function ta(e,n){var s=pr;return e.current.memoizedState.isDehydrated&&(yn(e,n).flags|=256),e=wi(e,n),e!==2&&(n=te,te=s,n!==null&&ea(n)),e}function ea(e){te===null?te=e:te.push.apply(te,e)}function wc(e){for(var n=e;;){if(n.flags&16384){var s=n.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var u=0;u<s.length;u++){var c=s[u],g=c.getSnapshot;c=c.value;try{if(!_e(g(),c))return!1}catch{return!1}}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function $e(e,n){for(n&=~Qs,n&=~mi,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var s=31-ve(n),u=1<<s;e[s]=-1,n&=~u}}function dl(e){if(st&6)throw Error(l(327));_n();var n=br(e,0);if(!(n&1))return ee(e,Dt()),null;var s=wi(e,n);if(e.tag!==0&&s===2){var u=$i(e);u!==0&&(n=u,s=ta(e,u))}if(s===1)throw s=gr,yn(e,0),$e(e,n),ee(e,Dt()),s;if(s===6)throw Error(l(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,vn(e,te,Be),ee(e,Dt()),null}function fl(e){Je!==null&&Je.tag===0&&!(st&6)&&_n();var n=st;st|=1;var s=Mt.transition,u=ht;try{if(Mt.transition=null,ht=1,e)return e()}finally{ht=u,Mt.transition=s,st=n,!(st&6)&&Ee()}}function na(){se=Wn.current,St(Wn)}function yn(e,n){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==ji&&(e.timeoutHandle=ji,Qh(s)),It!==null)for(s=It.return;s!==null;){var u=s;switch(os(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&Gr();break;case 3:bn(),St(Jt),St(Wt),Ss();break;case 5:vs(u);break;case 4:bn();break;case 13:St(Et);break;case 19:St(Et);break;case 10:fs(u.type._context);break;case 22:case 23:na()}s=s.return}if(zt=e,It=e=tn(e.current,null),Ht=se=n,Ot=0,gr=null,Qs=mi=mn=0,te=pr=null,gn!==null){for(n=0;n<gn.length;n++)if(s=gn[n],u=s.interleaved,u!==null){s.interleaved=null;var c=u.next,g=s.pending;if(g!==null){var y=g.next;g.next=c,u.next=y}s.pending=u}gn=null}return e}function gl(e,n){do{var s=It;try{if(ds(),Zr.current=ni,$r){for(var u=Tt.memoizedState;u!==null;){var c=u.queue;c!==null&&(c.pending=null),u=u.next}$r=!1}if(pn=0,Ft=Nt=Tt=null,sr=!1,ar=0,qs.current=null,s===null||s.return===null){Ot=1,gr=n,It=null;break}t:{var g=e,y=s.return,C=s,T=n;if(n=Ht,C.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){var D=T,q=C,nt=q.tag;if(!(q.mode&1)&&(nt===0||nt===11||nt===15)){var W=q.alternate;W?(q.updateQueue=W.updateQueue,q.memoizedState=W.memoizedState,q.lanes=W.lanes):(q.updateQueue=null,q.memoizedState=null)}var xt=bo(y);if(xt!==null){xt.flags&=-257,Bo(xt,y,C,g,n),xt.mode&1&&zo(g,D,n),n=xt,T=D;var pt=n.updateQueue;if(pt===null){var ne=new Set;ne.add(T),n.updateQueue=ne}else pt.add(T);break t}else{if(!(n&1)){zo(g,D,n),ra();break t}T=Error(l(426))}}else if(Ct&&C.mode&1){var He=bo(y);if(He!==null){!(He.flags&65536)&&(He.flags|=256),Bo(He,y,C,g,n),us(Bn(T,C));break t}}g=T=Bn(T,C),Ot!==4&&(Ot=2),pr===null?pr=[g]:pr.push(g),g=y;do{switch(g.tag){case 3:g.flags|=65536,n&=-n,g.lanes|=n;var E=Do(g,T,n);lo(g,E);break t;case 1:C=T;var k=g.type,I=g.stateNode;if(!(g.flags&128)&&(typeof k.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Ke===null||!Ke.has(I)))){g.flags|=65536,n&=-n,g.lanes|=n;var Y=Fo(g,C,n);lo(g,Y);break t}}g=g.return}while(g!==null)}yl(s)}catch(Z){n=Z,It===s&&s!==null&&(It=s=s.return);continue}break}while(!0)}function pl(){var e=pi.current;return pi.current=ni,e===null?ni:e}function ra(){(Ot===0||Ot===3||Ot===2)&&(Ot=4),zt===null||!(mn&268435455)&&!(mi&268435455)||$e(zt,Ht)}function wi(e,n){var s=st;st|=2;var u=pl();(zt!==e||Ht!==n)&&(Be=null,yn(e,n));do try{Cc();break}catch(c){gl(e,c)}while(!0);if(ds(),st=s,pi.current=u,It!==null)throw Error(l(261));return zt=null,Ht=0,Ot}function Cc(){for(;It!==null;)ml(It)}function Pc(){for(;It!==null&&!Ku();)ml(It)}function ml(e){var n=Sl(e.alternate,e,se);e.memoizedProps=e.pendingProps,n===null?yl(e):It=n,qs.current=null}function yl(e){var n=e;do{var s=n.alternate;if(e=n.return,n.flags&32768){if(s=yc(s,n),s!==null){s.flags&=32767,It=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ot=6,It=null;return}}else if(s=mc(s,n,se),s!==null){It=s;return}if(n=n.sibling,n!==null){It=n;return}It=n=e}while(n!==null);Ot===0&&(Ot=5)}function vn(e,n,s){var u=ht,c=Mt.transition;try{Mt.transition=null,ht=1,kc(e,n,s,u)}finally{Mt.transition=c,ht=u}return null}function kc(e,n,s,u){do _n();while(Je!==null);if(st&6)throw Error(l(327));s=e.finishedWork;var c=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(l(177));e.callbackNode=null,e.callbackPriority=0;var g=s.lanes|s.childLanes;if(Qu(e,g),e===zt&&(It=zt=null,Ht=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||vi||(vi=!0,xl(is,function(){return _n(),null})),g=(s.flags&15990)!==0,s.subtreeFlags&15990||g){g=Mt.transition,Mt.transition=null;var y=ht;ht=1;var C=st;st|=4,qs.current=null,_c(e,s),sl(s,e),At(e.containerInfo),e.current=s,Sc(s),Ju(),st=C,ht=y,Mt.transition=g}else e.current=s;if(vi&&(vi=!1,Je=e,_i=c),g=e.pendingLanes,g===0&&(Ke=null),tc(s.stateNode),ee(e,Dt()),n!==null)for(u=e.onRecoverableError,s=0;s<n.length;s++)c=n[s],u(c.value,{componentStack:c.stack,digest:c.digest});if(yi)throw yi=!1,e=Zs,Zs=null,e;return _i&1&&e.tag!==0&&_n(),g=e.pendingLanes,g&1?e===$s?mr++:(mr=0,$s=e):mr=0,Ee(),null}function _n(){if(Je!==null){var e=qa(_i),n=Mt.transition,s=ht;try{if(Mt.transition=null,ht=16>e?16:e,Je===null)var u=!1;else{if(e=Je,Je=null,_i=0,st&6)throw Error(l(331));var c=st;for(st|=4,V=e.current;V!==null;){var g=V,y=g.child;if(V.flags&16){var C=g.deletions;if(C!==null){for(var T=0;T<C.length;T++){var D=C[T];for(V=D;V!==null;){var q=V;switch(q.tag){case 0:case 11:case 15:dr(8,q,g)}var nt=q.child;if(nt!==null)nt.return=q,V=nt;else for(;V!==null;){q=V;var W=q.sibling,xt=q.return;if(el(q),q===D){V=null;break}if(W!==null){W.return=xt,V=W;break}V=xt}}}var pt=g.alternate;if(pt!==null){var ne=pt.child;if(ne!==null){pt.child=null;do{var He=ne.sibling;ne.sibling=null,ne=He}while(ne!==null)}}V=g}}if(g.subtreeFlags&2064&&y!==null)y.return=g,V=y;else t:for(;V!==null;){if(g=V,g.flags&2048)switch(g.tag){case 0:case 11:case 15:dr(9,g,g.return)}var E=g.sibling;if(E!==null){E.return=g.return,V=E;break t}V=g.return}}var k=e.current;for(V=k;V!==null;){y=V;var I=y.child;if(y.subtreeFlags&2064&&I!==null)I.return=y,V=I;else t:for(y=k;V!==null;){if(C=V,C.flags&2048)try{switch(C.tag){case 0:case 11:case 15:hi(9,C)}}catch(Z){Pt(C,C.return,Z)}if(C===y){V=null;break t}var Y=C.sibling;if(Y!==null){Y.return=C.return,V=Y;break t}V=C.return}}if(st=c,Ee(),ke&&typeof ke.onPostCommitFiberRoot=="function")try{ke.onPostCommitFiberRoot(Br,e)}catch{}u=!0}return u}finally{ht=s,Mt.transition=n}}return!1}function vl(e,n,s){n=Bn(s,n),n=Do(e,n,1),e=Qe(e,n,1),n=jt(),e!==null&&(tr(e,1,n),ee(e,n))}function Pt(e,n,s){if(e.tag===3)vl(e,e,s);else for(;n!==null;){if(n.tag===3){vl(n,e,s);break}else if(n.tag===1){var u=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ke===null||!Ke.has(u))){e=Bn(s,e),e=Fo(n,e,1),n=Qe(n,e,1),e=jt(),n!==null&&(tr(n,1,e),ee(n,e));break}}n=n.return}}function Ec(e,n,s){var u=e.pingCache;u!==null&&u.delete(n),n=jt(),e.pingedLanes|=e.suspendedLanes&s,zt===e&&(Ht&s)===s&&(Ot===4||Ot===3&&(Ht&130023424)===Ht&&500>Dt()-Ks?yn(e,0):Qs|=s),ee(e,n)}function _l(e,n){n===0&&(e.mode&1?(n=zr,zr<<=1,!(zr&130023424)&&(zr=4194304)):n=1);var s=jt();e=Te(e,n),e!==null&&(tr(e,n,s),ee(e,s))}function Tc(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),_l(e,s)}function Rc(e,n){var s=0;switch(e.tag){case 13:var u=e.stateNode,c=e.memoizedState;c!==null&&(s=c.retryLane);break;case 19:u=e.stateNode;break;default:throw Error(l(314))}u!==null&&u.delete(n),_l(e,s)}var Sl;Sl=function(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps||Jt.current)$t=!0;else{if(!(e.lanes&s)&&!(n.flags&128))return $t=!1,pc(e,n,s);$t=!!(e.flags&131072)}else $t=!1,Ct&&n.flags&1048576&&Ja(n,Ur,n.index);switch(n.lanes=0,n.tag){case 2:var u=n.type;si(e,n),e=n.pendingProps;var c=Ln(n,Wt.current);Fn(n,s),c=Cs(null,n,u,e,c,s);var g=Ps();return n.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Zt(u)?(g=!0,Dr(n)):g=!1,n.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,ms(n),c.updater=ri,n.stateNode=c,c._reactInternals=n,Ms(n,u,e,s),n=Os(null,n,u,!0,g,s)):(n.tag=0,Ct&&g&&as(n),Vt(null,n,c,s),n=n.child),n;case 16:u=n.elementType;t:{switch(si(e,n),e=n.pendingProps,c=u._init,u=c(u._payload),n.type=u,c=n.tag=Mc(u),e=xe(u,e),c){case 0:n=Ns(null,n,u,e,s);break t;case 1:n=jo(null,n,u,e,s);break t;case 11:n=Ho(null,n,u,e,s);break t;case 14:n=Wo(null,n,u,xe(u.type,e),s);break t}throw Error(l(306,u,""))}return n;case 0:return u=n.type,c=n.pendingProps,c=n.elementType===u?c:xe(u,c),Ns(e,n,u,c,s);case 1:return u=n.type,c=n.pendingProps,c=n.elementType===u?c:xe(u,c),jo(e,n,u,c,s);case 3:t:{if(Vo(n),e===null)throw Error(l(387));u=n.pendingProps,g=n.memoizedState,c=g.element,oo(e,n),Kr(n,u,null,s);var y=n.memoizedState;if(u=y.element,le&&g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},n.updateQueue.baseState=g,n.memoizedState=g,n.flags&256){c=Bn(Error(l(423)),n),n=qo(e,n,u,s,c);break t}else if(u!==c){c=Bn(Error(l(424)),n),n=qo(e,n,u,s,c);break t}else for(le&&(ce=Mu(n.stateNode.containerInfo),ie=n,Ct=!0,Se=null,er=!1),s=io(n,null,u,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(On(),u===c){n=be(e,n,s);break t}Vt(e,n,u,s)}n=n.child}return n;case 5:return uo(n),e===null&&hs(n),u=n.type,c=n.pendingProps,g=e!==null?e.memoizedProps:null,y=c.children,Xi(u,c)?y=null:g!==null&&Xi(u,g)&&(n.flags|=32),Xo(e,n),Vt(e,n,y,s),n.child;case 6:return e===null&&hs(n),null;case 13:return Qo(e,n,s);case 4:return ys(n,n.stateNode.containerInfo),u=n.pendingProps,e===null?n.child=Gn(n,null,u,s):Vt(e,n,u,s),n.child;case 11:return u=n.type,c=n.pendingProps,c=n.elementType===u?c:xe(u,c),Ho(e,n,u,c,s);case 7:return Vt(e,n,n.pendingProps,s),n.child;case 8:return Vt(e,n,n.pendingProps.children,s),n.child;case 12:return Vt(e,n,n.pendingProps.children,s),n.child;case 10:t:{if(u=n.type._context,c=n.pendingProps,g=n.memoizedProps,y=c.value,so(n,u,y),g!==null)if(_e(g.value,y)){if(g.children===c.children&&!Jt.current){n=be(e,n,s);break t}}else for(g=n.child,g!==null&&(g.return=n);g!==null;){var C=g.dependencies;if(C!==null){y=g.child;for(var T=C.firstContext;T!==null;){if(T.context===u){if(g.tag===1){T=ze(-1,s&-s),T.tag=2;var D=g.updateQueue;if(D!==null){D=D.shared;var q=D.pending;q===null?T.next=T:(T.next=q.next,q.next=T),D.pending=T}}g.lanes|=s,T=g.alternate,T!==null&&(T.lanes|=s),gs(g.return,s,n),C.lanes|=s;break}T=T.next}}else if(g.tag===10)y=g.type===n.type?null:g.child;else if(g.tag===18){if(y=g.return,y===null)throw Error(l(341));y.lanes|=s,C=y.alternate,C!==null&&(C.lanes|=s),gs(y,s,n),y=g.sibling}else y=g.child;if(y!==null)y.return=g;else for(y=g;y!==null;){if(y===n){y=null;break}if(g=y.sibling,g!==null){g.return=y.return,y=g;break}y=y.return}g=y}Vt(e,n,c.children,s),n=n.child}return n;case 9:return c=n.type,u=n.pendingProps.children,Fn(n,s),c=de(c),u=u(c),n.flags|=1,Vt(e,n,u,s),n.child;case 14:return u=n.type,c=xe(u,n.pendingProps),c=xe(u.type,c),Wo(e,n,u,c,s);case 15:return Uo(e,n,n.type,n.pendingProps,s);case 17:return u=n.type,c=n.pendingProps,c=n.elementType===u?c:xe(u,c),si(e,n),n.tag=1,Zt(u)?(e=!0,Dr(n)):e=!1,Fn(n,s),Oo(n,u,c),Ms(n,u,c,s),Os(null,n,u,!0,e,s);case 19:return Jo(e,n,s);case 22:return Yo(e,n,s)}throw Error(l(156,n.tag))};function xl(e,n){return ns(e,n)}function Ac(e,n,s,u){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function me(e,n,s,u){return new Ac(e,n,s,u)}function ia(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Mc(e){if(typeof e=="function")return ia(e)?1:0;if(e!=null){if(e=e.$$typeof,e===M)return 11;if(e===R)return 14}return 2}function tn(e,n){var s=e.alternate;return s===null?(s=me(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Ci(e,n,s,u,c,g){var y=2;if(u=e,typeof e=="function")ia(e)&&(y=1);else if(typeof e=="string")y=5;else t:switch(e){case m:return Sn(s.children,c,g,n);case _:y=8,c|=8;break;case v:return e=me(12,s,n,c|2),e.elementType=v,e.lanes=g,e;case A:return e=me(13,s,n,c),e.elementType=A,e.lanes=g,e;case L:return e=me(19,s,n,c),e.elementType=L,e.lanes=g,e;case O:return Pi(s,c,g,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case w:y=10;break t;case x:y=9;break t;case M:y=11;break t;case R:y=14;break t;case N:y=16,u=null;break t}throw Error(l(130,e==null?e:typeof e,""))}return n=me(y,s,n,c),n.elementType=e,n.type=u,n.lanes=g,n}function Sn(e,n,s,u){return e=me(7,e,u,n),e.lanes=s,e}function Pi(e,n,s,u){return e=me(22,e,u,n),e.elementType=O,e.lanes=s,e.stateNode={isHidden:!1},e}function sa(e,n,s){return e=me(6,e,null,n),e.lanes=s,e}function aa(e,n,s){return n=me(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Lc(e,n,s,u,c){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ji,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ts(0),this.expirationTimes=ts(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ts(0),this.identifierPrefix=u,this.onRecoverableError=c,le&&(this.mutableSourceEagerHydrationData=null)}function wl(e,n,s,u,c,g,y,C,T){return e=new Lc(e,n,s,C,T),n===1?(n=1,g===!0&&(n|=8)):n=0,g=me(3,null,null,n),e.current=g,g.stateNode=e,g.memoizedState={element:u,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},ms(g),e}function Cl(e){if(!e)return Ve;e=e._reactInternals;t:{if(K(e)!==e||e.tag!==1)throw Error(l(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break t;case 1:if(Zt(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break t}}n=n.return}while(n!==null);throw Error(l(171))}if(e.tag===1){var s=e.type;if(Zt(s))return Xa(e,s,n)}return n}function Pl(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=J(n),e===null?null:e.stateNode}function kl(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function ki(e,n){kl(e,n),(e=e.alternate)&&kl(e,n)}function Ic(e){return e=J(e),e===null?null:e.stateNode}function Nc(){return null}return r.attemptContinuousHydration=function(e){if(e.tag===13){var n=Te(e,134217728);if(n!==null){var s=jt();pe(n,e,134217728,s)}ki(e,134217728)}},r.attemptDiscreteHydration=function(e){if(e.tag===13){var n=Te(e,1);if(n!==null){var s=jt();pe(n,e,1,s)}ki(e,1)}},r.attemptHydrationAtCurrentPriority=function(e){if(e.tag===13){var n=Ze(e),s=Te(e,n);if(s!==null){var u=jt();pe(s,e,n,u)}ki(e,n)}},r.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var s=$n(n.pendingLanes);s!==0&&(es(n,s|1),ee(n,Dt()),!(st&6)&&(Un(),Ee()))}break;case 13:fl(function(){var u=Te(e,1);if(u!==null){var c=jt();pe(u,e,1,c)}}),ki(e,1)}},r.batchedUpdates=function(e,n){var s=st;st|=1;try{return e(n)}finally{st=s,st===0&&(Un(),Hr&&Ee())}},r.createComponentSelector=function(e){return{$$typeof:ui,value:e}},r.createContainer=function(e,n,s,u,c,g,y){return wl(e,n,!1,null,s,u,c,g,y)},r.createHasPseudoClassSelector=function(e){return{$$typeof:ci,value:e}},r.createHydrationContainer=function(e,n,s,u,c,g,y,C,T){return e=wl(s,u,!0,e,c,g,y,C,T),e.context=Cl(null),s=e.current,u=jt(),c=Ze(s),g=ze(u,c),g.callback=n??null,Qe(s,g,c),e.current.lanes=c,tr(e,c,u),ee(e,u),e},r.createPortal=function(e,n,s){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:u==null?null:""+u,children:e,containerInfo:n,implementation:s}},r.createRoleSelector=function(e){return{$$typeof:di,value:e}},r.createTestNameSelector=function(e){return{$$typeof:fi,value:e}},r.createTextSelector=function(e){return{$$typeof:gi,value:e}},r.deferredUpdates=function(e){var n=ht,s=Mt.transition;try{return Mt.transition=null,ht=16,e()}finally{ht=n,Mt.transition=s}},r.discreteUpdates=function(e,n,s,u,c){var g=ht,y=Mt.transition;try{return Mt.transition=null,ht=1,e(n,s,u,c)}finally{ht=g,Mt.transition=y,st===0&&Un()}},r.findAllNodes=Vs,r.findBoundingRects=function(e,n){if(!Kn)throw Error(l(363));n=Vs(e,n),e=[];for(var s=0;s<n.length;s++)e.push(ru(n[s]));for(n=e.length-1;0<n;n--){s=e[n];for(var u=s.x,c=u+s.width,g=s.y,y=g+s.height,C=n-1;0<=C;C--)if(n!==C){var T=e[C],D=T.x,q=D+T.width,nt=T.y,W=nt+T.height;if(u>=D&&g>=nt&&c<=q&&y<=W){e.splice(n,1);break}else if(u!==D||s.width!==T.width||W<g||nt>y){if(!(g!==nt||s.height!==T.height||q<u||D>c)){D>u&&(T.width+=D-u,T.x=u),q<c&&(T.width=c-D),e.splice(n,1);break}}else{nt>g&&(T.height+=nt-g,T.y=g),W<y&&(T.height=y-nt),e.splice(n,1);break}}}return e},r.findHostInstance=Pl,r.findHostInstanceWithNoPortals=function(e){return e=at(e),e=e!==null?$(e):null,e===null?null:e.stateNode},r.findHostInstanceWithWarning=function(e){return Pl(e)},r.flushControlled=function(e){var n=st;st|=1;var s=Mt.transition,u=ht;try{Mt.transition=null,ht=1,e()}finally{ht=u,Mt.transition=s,st=n,st===0&&(Un(),Ee())}},r.flushPassiveEffects=_n,r.flushSync=fl,r.focusWithin=function(e,n){if(!Kn)throw Error(l(363));for(e=Ys(e),n=ul(e,n),n=Array.from(n),e=0;e<n.length;){var s=n[e++];if(!Jn(s)){if(s.tag===5&&au(s.stateNode))return!0;for(s=s.child;s!==null;)n.push(s),s=s.sibling}}return!1},r.getCurrentUpdatePriority=function(){return ht},r.getFindAllNodesFailureDescription=function(e,n){if(!Kn)throw Error(l(363));var s=0,u=[];e=[Ys(e),0];for(var c=0;c<e.length;){var g=e[c++],y=e[c++],C=n[y];if((g.tag!==5||!Jn(g))&&(Xs(g,C)&&(u.push(js(C)),y++,y>s&&(s=y)),y<n.length))for(g=g.child;g!==null;)e.push(g,y),g=g.sibling}if(s<n.length){for(e=[];s<n.length;s++)e.push(js(n[s]));return`findAllNodes was able to match part of the selector:
  `+(u.join(" > ")+`

No matching component was found for:
  `)+e.join(" > ")}return null},r.getPublicRootInstance=function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return X(e.child.stateNode);default:return e.child.stateNode}},r.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:d.ReactCurrentDispatcher,findHostInstanceByFiber:Ic,findFiberByHostInstance:e.findFiberByHostInstance||Nc,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")e=!1;else{var n=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(n.isDisabled||!n.supportsFiber)e=!0;else{try{Br=n.inject(e),ke=n}catch{}e=!!n.checkDCE}}return e},r.isAlreadyRendering=function(){return!1},r.observeVisibleRects=function(e,n,s,u){if(!Kn)throw Error(l(363));e=Vs(e,n);var c=ou(e,s,u).disconnect;return{disconnect:function(){c()}}},r.registerMutableSourceForHydration=function(e,n){var s=n._getVersion;s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s)},r.runWithPriority=function(e,n){var s=ht;try{return ht=e,n()}finally{ht=s}},r.shouldError=function(){return null},r.shouldSuspend=function(){return!1},r.updateContainer=function(e,n,s,u){var c=n.current,g=jt(),y=Ze(c);return s=Cl(s),n.context===null?n.context=s:n.pendingContext=s,n=ze(g,y),n.payload={element:e},u=u===void 0?null:u,u!==null&&(n.callback=u),e=Qe(c,n,y),e!==null&&(pe(e,c,y,g),Qr(e,c,y)),y},r};Hh.exports=of;var lf=Hh.exports;const hf=Gc(lf);var Wh={exports:{}},An={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */An.ConcurrentRoot=1;An.ContinuousEventPriority=4;An.DefaultEventPriority=16;An.DiscreteEventPriority=1;An.IdleEventPriority=536870912;An.LegacyRoot=0;Wh.exports=An;var Uh=Wh.exports;const th={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let eh=!1,nh=!1;const Na=".react-konva-event",uf=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,cf=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,df={};function Yi(o,t,r=df){if(!eh&&"zIndex"in t&&(console.warn(cf),eh=!0),!nh&&t.draggable){var i=t.x!==void 0||t.y!==void 0,a=t.onDragEnd||t.onDragMove;i&&!a&&(console.warn(uf),nh=!0)}for(var h in r)if(!th[h]){var l=h.slice(0,2)==="on",d=r[h]!==t[h];if(l&&d){var f=h.substr(2).toLowerCase();f.substr(0,7)==="content"&&(f="content"+f.substr(7,1).toUpperCase()+f.substr(8)),o.off(f,r[h])}var p=!t.hasOwnProperty(h);p&&o.setAttr(h,void 0)}var m=t._useStrictMode,_={},v=!1;const w={};for(var h in t)if(!th[h]){var l=h.slice(0,2)==="on",x=r[h]!==t[h];if(l&&x){var f=h.substr(2).toLowerCase();f.substr(0,7)==="content"&&(f="content"+f.substr(7,1).toUpperCase()+f.substr(8)),t[h]&&(w[f]=t[h])}!l&&(t[h]!==r[h]||m&&t[h]!==o.getAttr(h))&&(v=!0,_[h]=t[h])}v&&(o.setAttrs(_),un(o));for(var f in w)o.on(f+Na,w[f])}function un(o){if(!b.autoDrawEnabled){var t=o.getLayer()||o.getStage();t&&t.batchDraw()}}const Yh={},ff={};Cn.Node.prototype._applyProps=Yi;function gf(o,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}o.add(t),un(o)}function pf(o,t,r){let i=Cn[o];i||(console.error(`Konva has no node with the type ${o}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${o}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),i=Cn.Group);const a={},h={};for(var l in t){var d=l.slice(0,2)==="on";d?h[l]=t[l]:a[l]=t[l]}const f=new i(a);return Yi(f,h),f}function mf(o,t,r){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${o}"`)}function yf(o,t,r){return!1}function vf(o){return o}function _f(){return null}function Sf(){return null}function xf(o,t,r,i){return ff}function wf(){}function Cf(o){}function Pf(o,t){return!1}function kf(){return Yh}function Ef(){return Yh}const Tf=setTimeout,Rf=clearTimeout,Af=-1;function Mf(o,t){return!1}const Lf=!1,If=!0,Nf=!0;function Of(o,t){t.parent===o?t.moveToTop():o.add(t),un(o)}function Gf(o,t){t.parent===o?t.moveToTop():o.add(t),un(o)}function Xh(o,t,r){t._remove(),o.add(t),t.setZIndex(r.getZIndex()),un(o)}function Df(o,t,r){Xh(o,t,r)}function Ff(o,t){t.destroy(),t.off(Na),un(o)}function zf(o,t){t.destroy(),t.off(Na),un(o)}function bf(o,t,r){console.error(`Text components are not yet supported in ReactKonva. You text is: "${r}"`)}function Bf(o,t,r){}function Hf(o,t,r,i,a){Yi(o,a,i)}function Wf(o){o.hide(),un(o)}function Uf(o){}function Yf(o,t){(t.visible==null||t.visible)&&o.show()}function Xf(o,t){}function jf(o){}function Vf(){}const qf=()=>Uh.DefaultEventPriority,Qf=Object.freeze(Object.defineProperty({__proto__:null,appendChild:Of,appendChildToContainer:Gf,appendInitialChild:gf,cancelTimeout:Rf,clearContainer:jf,commitMount:Bf,commitTextUpdate:bf,commitUpdate:Hf,createInstance:pf,createTextInstance:mf,detachDeletedInstance:Vf,finalizeInitialChildren:yf,getChildHostContext:Ef,getCurrentEventPriority:qf,getPublicInstance:vf,getRootHostContext:kf,hideInstance:Wf,hideTextInstance:Uf,idlePriority:Fi.unstable_IdlePriority,insertBefore:Xh,insertInContainerBefore:Df,isPrimaryRenderer:Lf,noTimeout:Af,now:Fi.unstable_now,prepareForCommit:_f,preparePortalMount:Sf,prepareUpdate:xf,removeChild:Ff,removeChildFromContainer:zf,resetAfterCommit:wf,resetTextContent:Cf,run:Fi.unstable_runWithPriority,scheduleTimeout:Tf,shouldDeprioritizeSubtree:Pf,shouldSetTextContent:Mf,supportsMutation:Nf,unhideInstance:Yf,unhideTextInstance:Xf,warnsIfNotActing:If},Symbol.toStringTag,{value:"Module"}));var Kf=Object.defineProperty,Jf=Object.defineProperties,Zf=Object.getOwnPropertyDescriptors,rh=Object.getOwnPropertySymbols,$f=Object.prototype.hasOwnProperty,t1=Object.prototype.propertyIsEnumerable,ih=(o,t,r)=>t in o?Kf(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r,sh=(o,t)=>{for(var r in t||(t={}))$f.call(t,r)&&ih(o,r,t[r]);if(rh)for(var r of rh(t))t1.call(t,r)&&ih(o,r,t[r]);return o},e1=(o,t)=>Jf(o,Zf(t)),ah,oh;typeof window<"u"&&((ah=window.document)!=null&&ah.createElement||((oh=window.navigator)==null?void 0:oh.product)==="ReactNative")?Qt.useLayoutEffect:Qt.useEffect;function jh(o,t,r){if(!o)return;if(r(o)===!0)return o;let i=o.child;for(;i;){const a=jh(i,t,r);if(a)return a;i=i.sibling}}function Vh(o){try{return Object.defineProperties(o,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return o}}const lh=console.error;console.error=function(){const o=[...arguments].join("");if(o?.startsWith("Warning:")&&o.includes("useContext")){console.error=lh;return}return lh.apply(this,arguments)};const Oa=Vh(Qt.createContext(null));class qh extends Qt.Component{render(){return Qt.createElement(Oa.Provider,{value:this._reactInternals},this.props.children)}}function n1(){const o=Qt.useContext(Oa);if(o===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=Qt.useId();return Qt.useMemo(()=>{for(const i of[o,o?.alternate]){if(!i)continue;const a=jh(i,!1,h=>{let l=h.memoizedState;for(;l;){if(l.memoizedState===t)return!0;l=l.next}});if(a)return a}},[o,t])}function r1(){const o=n1(),[t]=Qt.useState(()=>new Map);t.clear();let r=o;for(;r;){if(r.type&&typeof r.type=="object"){const a=r.type._context===void 0&&r.type.Provider===r.type?r.type:r.type._context;a&&a!==Oa&&!t.has(a)&&t.set(a,Qt.useContext(Vh(a)))}r=r.return}return t}function i1(){const o=r1();return Qt.useMemo(()=>Array.from(o.keys()).reduce((t,r)=>i=>Qt.createElement(t,null,Qt.createElement(r.Provider,e1(sh({},i),{value:o.get(r)}))),t=>Qt.createElement(qh,sh({},t))),[o])}function s1(o){const t=qt.useRef({});return qt.useLayoutEffect(()=>{t.current=o}),qt.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const a1=o=>{const t=qt.useRef(null),r=qt.useRef(null),i=qt.useRef(null),a=s1(o),h=i1(),l=d=>{const{forwardedRef:f}=o;f&&(typeof f=="function"?f(d):f.current=d)};return qt.useLayoutEffect(()=>(r.current=new Cn.Stage({width:o.width,height:o.height,container:t.current}),l(r.current),i.current=kr.createContainer(r.current,Uh.LegacyRoot,!1,null),kr.updateContainer(qt.createElement(h,{},o.children),i.current),()=>{Cn.isBrowser&&(l(null),kr.updateContainer(null,i.current,null),r.current.destroy())}),[]),qt.useLayoutEffect(()=>{l(r.current),Yi(r.current,o,a),kr.updateContainer(qt.createElement(h,{},o.children),i.current,null)}),qt.createElement("div",{ref:t,id:o.id,accessKey:o.accessKey,className:o.className,role:o.role,style:o.style,tabIndex:o.tabIndex,title:o.title})},c1="Layer",d1="Image",f1="Transformer",kr=hf(Qf);kr.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:qt.version,rendererPackageName:"react-konva"});const g1=qt.forwardRef((o,t)=>qt.createElement(qh,{},qt.createElement(a1,{...o,forwardedRef:t})));export{d1 as I,c1 as L,g1 as S,f1 as T};
