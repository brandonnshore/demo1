import{c as Z,j as e,S as Le,u as ue,a as Te,d as me,p as Fe,b as xe,e as ze}from"./index-BNHmJ-yo.js";import{r,R as Pe,e as Ee,f as Ue,L as Re,h as Me}from"./react-vendor-Byl6S4M9.js";import{S as $e,L as Be,I as fe,T as Xe}from"./canvas-vendor-CLiMLpzp.js";import{X as ge}from"./x-C_h4tt41.js";import"./auth-vendor-BK_4TCcA.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=Z("ArrowDownToLine",[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=Z("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=Z("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=Z("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),be=r.forwardRef(({tshirtColor:N="white",artworks:f=[],onArtworkPositionChange:C,view:g="front"},E)=>{const[k,w]=r.useState(null),[j,T]=r.useState([]),[I,D]=r.useState(null),[F]=r.useState(null),A=r.useRef([]),p=r.useRef(null),S=r.useRef(null),b=r.useRef({front:null,back:null,neck:null}),B=r.useRef("front"),[L,X]=r.useState({width:550,height:650});r.useImperativeHandle(E,()=>({downloadImage:()=>{if(S.current){const u=S.current.toDataURL({pixelRatio:3,mimeType:"image/png",quality:1}),a=document.createElement("a");a.download="tshirt-design.png",a.href=u,document.body.appendChild(a),a.click(),document.body.removeChild(a)}},getThumbnail:()=>S.current?S.current.toDataURL({pixelRatio:1,mimeType:"image/png",quality:.8}):null,captureImage:()=>S.current?S.current.toDataURL({pixelRatio:2,mimeType:"image/png",quality:.9}):null,getThumbnailBlob:async()=>{if(S.current){const u=S.current.toDataURL({pixelRatio:1,mimeType:"image/png",quality:.8});return await(await fetch(u)).blob()}return null}}));const W=u=>{const a=u.toLowerCase();return a==="navy"?{front:"/assets/navy-front.png",back:"/assets/navy-back.png",neck:"/assets/navy-neck.png"}:a==="black"?{front:"/assets/black-front.png",back:"/assets/black-back.png",neck:"/assets/black-neck.png"}:{front:"/assets/blank-tshirt.png",back:"/assets/back-tshirt.jpeg",neck:"/assets/neck-tshirt.jpeg"}};r.useEffect(()=>{const u=i=>new Promise(m=>{const o=new window.Image;o.src=i,o.crossOrigin="anonymous",o.onload=()=>m(o),o.onerror=()=>m(o)}),a=W(N);Promise.all([u(a.front),u(a.back),u(a.neck)]).then(([i,m,o])=>{b.current.front=i,b.current.back=m,b.current.neck=o;const h=g==="neck"?o:g==="back"?m:i;if(g==="neck"){const c=h.width/h.height,_=1600,x=950;let d=_,v=d/c;v<x&&(v=x,d=v*c),X({width:d,height:v})}else{const c=h.width/h.height,_=600,x=700;let d=_,v=_/c;if(v>x&&(v=x,d=x*c),g==="back"){const R=N?.toLowerCase()||"";R==="white"||R===""?(d=d*1.1,v=v*1.1):R==="navy"&&(d=d*1.02,v=v*1.02)}X({width:d,height:v})}w(h)})},[N,g]),r.useEffect(()=>{if(g===B.current)return;const u=g==="neck"?b.current.neck:g==="back"?b.current.back:b.current.front;if(u){if(g==="neck"){const a=u.width/u.height,i=1600,m=950;let o=i,h=o/a;h<m&&(h=m,o=h*a),X({width:o,height:h})}else{const m=u.width/u.height;let o=600,h=600/m;if(h>700&&(h=700,o=700*m),g==="back"){const c=N?.toLowerCase()||"";c==="white"||c===""?(o=o*1.1,h=h*1.1):c==="navy"&&(o=o*1.02,h=h*1.02)}X({width:o,height:h})}w(u),B.current=g}},[g]);const z=r.useRef(new Map);r.useEffect(()=>{if(f.length===0){T([]),D(null),A.current=[];return}(async()=>{const a=f.map(i=>{const m=z.current.get(i.url);return m?Promise.resolve(m):new Promise((o,h)=>{const c=new window.Image;c.src=i.url,c.crossOrigin="anonymous",c.onload=()=>{z.current.set(i.url,c),o(c)},c.onerror=h})});try{const i=await Promise.all(a);T(i),A.current=new Array(i.length).fill(null);const m=f[f.length-1];m&&!m.position&&D(`artwork-${f.length-1}`)}catch(i){console.error("Failed to load artworks:",i)}})()},[f]),r.useEffect(()=>{if(I&&p.current){const u=parseInt(I.split("-")[1]),a=A.current[u];a&&(p.current.nodes([a]),p.current.getLayer()?.batchDraw())}},[I]);const H=u=>{const a=A.current[u];a&&C&&C({x:a.x(),y:a.y(),scaleX:a.scaleX(),scaleY:a.scaleY(),rotation:a.rotation()},u)},U=u=>{const a=u.target===u.target.getStage(),i=u.target.image===k;(a||i)&&D(null)};return F?e.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-500 mb-2",children:F}),e.jsx("p",{className:"text-xs text-gray-400",children:"Using fallback preview"})]})}):e.jsxs("div",{className:"relative w-full h-full flex items-center justify-center overflow-hidden",children:[j.length>0&&I&&e.jsx("div",{className:"absolute top-3 left-1/2 -translate-x-1/2 bg-black/80 text-white text-xs px-4 py-2 rounded-full z-10",children:"Drag to move â€¢ Corners to resize â€¢ Rotate to spin â€¢ Click away to finish"}),j.length>0&&!I&&e.jsx("div",{className:"absolute top-3 left-1/2 -translate-x-1/2 bg-gray-800/60 text-white text-xs px-4 py-2 rounded-full z-10",children:"Click artwork to edit position and size"}),e.jsx($e,{ref:S,width:L.width,height:L.height,onMouseDown:U,onTouchStart:U,children:e.jsxs(Be,{children:[k&&e.jsx(fe,{image:k,x:0,y:0,width:L.width,height:L.height,onClick:()=>D(null),onTap:()=>D(null),...g==="neck"?{crop:{x:0,y:0,width:k.width,height:k.height}}:{}}),j.map((u,a)=>{const i=f[a];if(!i)return null;const m=250,o=250,h=u.width/u.height;let c=m,_=m/h;return _>o&&(_=o,c=o*h),e.jsxs(Pe.Fragment,{children:[e.jsx(fe,{ref:x=>{A.current[a]=x},image:u,x:i.position?.x??(g==="neck"?750:200+a*20),y:i.position?.y??(g==="neck"?500:250+a*20),width:c,height:_,scaleX:i.position?.scaleX??1,scaleY:i.position?.scaleY??1,rotation:i.position?.rotation??0,draggable:!0,dragBoundFunc:x=>{let d;g==="neck"?d={minX:520,maxX:1080,minY:560,maxY:710}:d={minX:80,maxX:470,minY:100,maxY:550};const v=A.current[a],R=v?.width()||0,V=v?.height()||0,ee=v?.scaleX()||1,q=v?.scaleY()||1,G=R*ee,O=V*q;let $=x.x,M=x.y;return $<d.minX&&($=d.minX),$+G>d.maxX&&($=d.maxX-G),M<d.minY&&(M=d.minY),M+O>d.maxY&&(M=d.maxY-O),{x:$,y:M}},onClick:()=>D(`artwork-${a}`),onTap:()=>D(`artwork-${a}`),onDragEnd:()=>H(a),onTransformEnd:()=>H(a)}),I===`artwork-${a}`&&e.jsx(Xe,{ref:p,keepRatio:!0,boundBoxFunc:(x,d)=>d.width<50||d.height<50||d.width>400||d.height>400?x:d,enabledAnchors:["top-left","top-right","bottom-left","bottom-right"],rotateEnabled:!0,borderStroke:"#000000",borderStrokeWidth:2,anchorSize:12,anchorStroke:"#000000",anchorFill:"#ffffff",anchorCornerRadius:6})]},`artwork-${a}`)})]})})]})});be.displayName="TShirtCanvas";function He({isOpen:N,onClose:f,onSave:C,isUpdating:g=!1,currentName:E=""}){const[k,w]=r.useState(E),[j,T]=r.useState(!1),[I,D]=r.useState(!1),[F,A]=r.useState(""),p=async()=>{if(!k.trim()){A("Please enter a name for your design");return}T(!0),A("");try{await C(k.trim()),D(!0),setTimeout(()=>{f(),D(!1),w("")},1500)}catch(b){A(b.message||"Failed to save design"),T(!1)}},S=()=>{j||(f(),w(""),A(""),D(!1))};return N?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold",children:g?"Update Design":"Save Design"}),!j&&e.jsx("button",{onClick:S,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ge,{size:24})})]}),e.jsx("div",{className:"p-6",children:I?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:e.jsx(pe,{size:32,className:"text-green-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:g?"Design Updated!":"Design Saved!"}),e.jsxs("p",{className:"text-gray-600",children:['Your design "',k,'" has been saved to your dashboard']})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"design-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Design Name"}),e.jsx("input",{id:"design-name",type:"text",value:k,onChange:b=>w(b.target.value),onKeyPress:b=>b.key==="Enter"&&p(),placeholder:"e.g., Summer Collection Tee",className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",disabled:j,autoFocus:!0}),F&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:F})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["ðŸ’¡ ",e.jsx("strong",{children:"Tip:"})," Give your design a memorable name so you can easily find it later!"]})})]})}),!I&&e.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200",children:[e.jsx("button",{onClick:S,disabled:j,className:"flex-1 px-4 py-3 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),e.jsx("button",{onClick:p,disabled:j||!k.trim(),className:"flex-1 px-4 py-3 bg-black text-white rounded-md hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:j?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):g?"Update Design":"Save Design"})]})]})}):null}function Oe({message:N,type:f="success",onClose:C,duration:g=3e3}){r.useEffect(()=>{const w=setTimeout(()=>{C()},g);return()=>clearTimeout(w)},[C,g]);const E={success:e.jsx(pe,{size:20}),error:e.jsx(ge,{size:20}),info:e.jsx(Le,{size:20})},k={success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500"};return e.jsxs("div",{className:"fixed bottom-8 right-8 z-50 animate-slideUp",role:"alert",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden max-w-md",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4",children:[e.jsx("div",{className:`${k[f]} text-white p-2 rounded-xl flex-shrink-0`,children:E[f]}),e.jsx("p",{className:"text-gray-900 font-medium flex-1",children:N}),e.jsx("button",{onClick:C,className:"text-gray-400 hover:text-gray-600 transition-colors p-1","aria-label":"Close",children:e.jsx(ge,{size:18})})]}),e.jsx("div",{className:"h-1 bg-gray-100",children:e.jsx("div",{className:`h-full ${k[f]} transition-all`,style:{animation:`shrink ${g}ms linear`,transformOrigin:"left"}})})]}),e.jsx("style",{children:`
        @keyframes slideUp {
          from {
            transform: translateY(100px);
            opacity: 0;
          }
          to {
            transform: translateY(0);
            opacity: 1;
          }
        }

        @keyframes shrink {
          from {
            width: 100%;
          }
          to {
            width: 0%;
          }
        }
      `})]})}function Ve({product:N,variants:f}){const C=Ee(),g=ue(t=>t.addItem),E=ue(t=>t.updateItem),k=ue(t=>t.getItem),w=r.useRef(null),{isAuthenticated:j}=Te(),[T]=Ue(),[I,D]=r.useState(null),[F,A]=r.useState(null),[p,S]=r.useState(""),[b,B]=r.useState(""),[L,X]=r.useState(null),[W]=r.useState(""),[z,H]=r.useState(1),[U,u]=r.useState([]),[a]=r.useState("front_chest"),[i,m]=r.useState("front"),[o,h]=r.useState([]),[c,_]=r.useState(null),[x,d]=r.useState([]),[,v]=r.useState(null),R=()=>i==="front"?o:i==="neck"?c?[c]:[]:i==="back"?x:[],V=R()[0]||null,[,ee]=r.useState(null),[,q]=r.useState(!1),[G,O]=r.useState(!1),[$,M]=r.useState(""),[ye,te]=r.useState(!1),[ke,se]=r.useState(""),re=(()=>{let t=12.98;const s=o.length>0,n=x.length>0,l=c!==null;return[s,n].filter(Boolean).length===2&&(t+=5),l&&(t+=1),t})(),ae=[...new Set(f.map(t=>t.color))],we=ae.includes("Navy")?ae:[...ae,"Navy"],je=[...new Set(f.map(t=>t.size))].sort((t,s)=>{const n=["S","M","L","XL","2XL","3XL"];return n.indexOf(t)-n.indexOf(s)});r.useEffect(()=>{if(p&&b){const t=f.find(s=>s.color===p&&s.size===b);X(t||null)}},[p,b,f]),r.useEffect(()=>{const t=T.get("designId");t&&j&&ve(t)},[T,j]),r.useEffect(()=>{const t=T.get("editCartItem");if(t){const s=k(t);s&&(A(t),S(s.variantColor),B(s.variantSize),H(s.quantity),s.customization&&(s.customization.frontArtworks&&h(s.customization.frontArtworks),s.customization.backArtworks&&d(s.customization.backArtworks),s.customization.neckArtwork&&_(s.customization.neckArtwork)))}},[T,k]);const ve=async t=>{try{const s=await me.getById(t);if(D(s.id),s.design_data&&(s.design_data.front&&h(s.design_data.front.map(n=>({url:"",position:n}))),s.design_data.back&&d(s.design_data.back.map(n=>({url:"",position:n}))),s.design_data.neck&&s.design_data.neck.length>0&&_({url:"",position:s.design_data.neck[0]})),s.variant_id){const n=f.find(l=>l.id===s.variant_id);n&&(S(n.color),B(n.size))}}catch(s){console.error("Error loading design:",s),alert("Failed to load design")}};r.useEffect(()=>{L&&W&&U.length>0&&Ne()},[L,W,U,z]);const Ne=async()=>{if(L){q(!0);try{const t=await Fe.calculate({variant_id:L.id,method:W,placements:U,quantity:z});ee(t)}catch(t){console.error("Failed to calculate price:",t)}finally{q(!1)}}},ne=async t=>{const s=t.target.files?.[0];if(s)try{if(s.type==="image/png"||s.type==="image/jpeg"){const y=await s.arrayBuffer(),P=await Se(y,s.type);if(P&&P<300&&!window.confirm(`Warning: This image has a DPI of ${P}, which is below the required 300 DPI for high-quality DTG printing. The print quality may be poor.

Do you want to upload it anyway?`)){t.target.value="";return}}const l={url:URL.createObjectURL(s),position:null};if(i==="front")if(o.length<4)h([...o,l]);else{alert("Maximum 4 artworks allowed on front view"),t.target.value="";return}else if(i==="neck"){if(c){alert("Only 1 artwork allowed on neck view. Remove existing artwork first."),t.target.value="";return}_(l)}else if(i==="back")if(x.length<4)d([...x,l]);else{alert("Maximum 4 artworks allowed on back view"),t.target.value="";return}try{const y=await xe.uploadFile(s);v(y);const P={location:a,x:5,y:5,width:4,height:4,artwork_id:y.id,colors:["#000000"]};u([...U,P])}catch(y){console.error("Server upload failed (continuing with local preview):",y)}t.target.value=""}catch(n){console.error("File upload failed:",n),alert("Failed to upload file"),t.target.value=""}},Se=async(t,s)=>{const n=new DataView(t);try{if(s==="image/png"){let l=8;for(;l<n.byteLength;){const y=n.getUint32(l);if(String.fromCharCode(n.getUint8(l+4),n.getUint8(l+5),n.getUint8(l+6),n.getUint8(l+7))==="pHYs"){const Y=n.getUint32(l+8);if(n.getUint8(l+16)===1)return Math.round(Y/39.3701)}l+=y+12}}else if(s==="image/jpeg"){let l=2;for(;l<n.byteLength;){if(n.getUint16(l)===65504){const Y=n.getUint8(l+11),de=n.getUint16(l+12);if(Y===1)return de;if(Y===2)return Math.round(de*2.54);break}const P=n.getUint16(l+2);l+=P+2}}}catch(l){console.error("Error reading DPI:",l)}return null},Ce=()=>{w.current&&w.current.downloadImage&&w.current.downloadImage()},Ie=()=>{if(!j){C("/login",{state:{from:window.location.pathname+window.location.search}});return}O(!0)},De=async t=>{try{const s={front:o.map(y=>y.position),back:x.map(y=>y.position),neck:c?[c.position]:[]},n=[];let l="";if(w.current&&w.current.getThumbnailBlob)try{const y=await w.current.getThumbnailBlob();if(y){const P=new File([y],"thumbnail.png",{type:"image/png"});l=(await xe.uploadFile(P)).file_url}}catch(y){console.error("Failed to capture thumbnail:",y)}if(I)await me.update(I,{name:t,variantId:L?.id,designData:s,artworkIds:n,thumbnailUrl:l}),M(t);else{const y=await me.save({name:t,productId:N.id,variantId:L?.id,designData:s,artworkIds:n,thumbnailUrl:l});D(y.id),M(t)}}catch(s){throw console.error("Error saving design:",s),s}},_e=()=>{if(!p||!b){se("Please select a color and size"),te(!0);return}let t;try{w.current&&w.current.captureImage&&(t=w.current.captureImage())}catch(l){console.error("Error capturing mockup:",l)}const s=L||{id:`temp-${p}-${b}`},n={id:F||`${s.id}-${Date.now()}`,variantId:s.id,productTitle:N.title,variantColor:p,variantSize:b,quantity:z,unitPrice:re,customization:{method:W||"screen_print",placements:U,frontArtworks:o,backArtworks:x,neckArtwork:c},mockupUrl:t};F?(E(F,n),se("Cart item updated successfully!")):(g(n),se("Added to cart successfully!")),te(!0),setTimeout(()=>{C("/cart")},1500)},[ie,Ae]=r.useState(!0),[oe,K]=r.useState(!1),[le,J]=r.useState(!1),[ce,Q]=r.useState(!1);return r.useEffect(()=>{i==="neck"?(Q(!0),K(!1),J(!1)):i==="front"?(K(!0),J(!1),Q(!1)):i==="back"&&(J(!0),K(!1),Q(!1))},[i]),e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("div",{className:"border-b border-gray-200 bg-white",children:e.jsxs("div",{className:"relative px-6 py-1.5 flex items-center",children:[e.jsx("h1",{className:"text-sm font-bold",children:N.title}),e.jsx(Re,{to:"/",className:"absolute left-1/2 -translate-x-1/2 text-lg font-bold hover:text-gray-600 transition-colors",children:"Raspberry"}),e.jsxs("div",{className:"ml-auto flex items-center gap-4",children:[e.jsx("button",{onClick:Ce,disabled:!V,title:"Download Design",className:`p-2 rounded-md transition-colors ${V?"text-gray-700 hover:bg-gray-100":"text-gray-300 cursor-not-allowed"}`,children:e.jsx(We,{size:18})}),e.jsxs("button",{onClick:Ie,className:"flex items-center gap-1.5 px-4 py-1.5 text-xs font-medium rounded-md transition-colors bg-black text-white hover:bg-gray-800",children:[e.jsx(Ye,{size:14}),I?"Update Design":"Save Design"]}),e.jsxs("div",{className:"text-sm font-normal",children:["from $",12.98.toFixed(2)]})]})]})}),e.jsxs("div",{className:"grid lg:grid-cols-[1fr_400px] h-[calc(100vh-40px)]",children:[e.jsxs("div",{className:"bg-white flex flex-col relative h-full overflow-hidden",children:[e.jsx("div",{className:`absolute inset-0 flex items-center justify-center ${i==="neck"?"pt-0 pb-0 px-0":"pt-2 pb-16 px-6"}`,children:e.jsx(be,{ref:w,tshirtColor:p,artworks:R(),onArtworkPositionChange:(t,s)=>{if(i==="front"){const n=[...o];n[s]={...n[s],position:t},h(n)}else if(i==="neck"&&c)_({...c,position:t});else if(i==="back"){const n=[...x];n[s]={...n[s],position:t},d(n)}},view:i})}),e.jsxs("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 bg-white rounded-full shadow-lg px-2 py-2 flex gap-1",children:[e.jsx("button",{onClick:()=>m("front"),className:`px-5 py-2 rounded-full text-sm font-medium transition-colors ${i==="front"?"bg-black text-white":"text-gray-700 hover:bg-gray-100"}`,children:"Front"}),e.jsx("button",{onClick:()=>m("back"),className:`px-5 py-2 rounded-full text-sm font-medium transition-colors ${i==="back"?"bg-black text-white":"text-gray-700 hover:bg-gray-100"}`,children:"Back"}),e.jsx("button",{onClick:()=>m("neck"),className:`px-5 py-2 rounded-full text-sm font-medium transition-colors ${i==="neck"?"bg-black text-white":"text-gray-700 hover:bg-gray-100"}`,children:"Neck"})]})]}),e.jsx("div",{className:"bg-white border-l border-gray-200 overflow-y-auto",children:e.jsxs("div",{className:"p-5 space-y-1",children:[e.jsxs("div",{className:"border-t border-gray-200 pt-5 pb-4",children:[e.jsxs("button",{onClick:()=>Ae(!ie),className:"w-full flex items-center justify-between mb-4 group",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Garment Color"}),e.jsxs("div",{className:"flex items-center gap-3",children:[p&&e.jsx("span",{className:"w-5 h-5 rounded-full border border-gray-300",style:{backgroundColor:p==="White"?"#FFFFFF":p==="Black"?"#000000":p.toLowerCase()}}),e.jsx("span",{className:"text-gray-400 group-hover:text-gray-600",children:ie?"âˆ’":"+"})]})]}),ie&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wider mb-3",children:"Pre-developed"}),e.jsx("div",{className:"grid grid-cols-2 gap-2.5",children:we.map(t=>e.jsxs("button",{onClick:()=>S(t),className:`flex items-center gap-2.5 p-2.5 rounded-md border transition-all ${p===t?"border-gray-900 bg-gray-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[e.jsx("div",{className:"w-8 h-8 rounded-full border border-gray-300 flex-shrink-0",style:{backgroundColor:t==="White"?"#FFFFFF":t==="Black"?"#000000":t==="Navy"?"#001f3f":t.toLowerCase()}}),e.jsx("span",{className:"text-xs font-medium",children:t})]},t))})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-5 pb-4",children:[e.jsxs("button",{onClick:()=>K(!oe),className:"w-full flex items-center justify-between mb-4 group",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Front Artwork"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-5 h-5 rounded-full bg-black text-white text-xs flex items-center justify-center",children:o.length}),e.jsx("span",{className:"text-gray-400 group-hover:text-gray-600",children:oe?"âˆ’":"+"})]})]}),oe&&e.jsxs("div",{className:"space-y-4",children:[o.length<4&&e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-md p-6 text-center hover:border-gray-300 transition-colors cursor-pointer",onClick:()=>m("front"),children:[e.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/svg+xml,application/pdf",onChange:t=>{m("front"),ne(t)},className:"hidden",id:"front-artwork-upload",onClick:t=>t.stopPropagation()}),e.jsxs("label",{htmlFor:"front-artwork-upload",className:"cursor-pointer",children:[e.jsx(he,{className:"mx-auto mb-2 text-gray-300",size:28}),e.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Upload front artwork (up to 4)"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG, SVG or PDF"})]})]}),o.map((t,s)=>e.jsx("div",{className:"border border-gray-200 rounded-md p-3 bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-white border border-gray-200 rounded flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:t.url,alt:"Front Artwork",className:"w-full h-full object-contain"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-medium",children:["Artwork ",s+1]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Click front view to edit"})]})]}),e.jsx("button",{onClick:()=>{h(o.filter((n,l)=>l!==s))},className:"text-xs text-red-600 hover:text-red-700",children:"Remove"})]})},s))]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-5 pb-4",children:[e.jsxs("button",{onClick:()=>J(!le),className:"w-full flex items-center justify-between mb-4 group",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Back Artwork"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-5 h-5 rounded-full bg-black text-white text-xs flex items-center justify-center",children:x.length}),e.jsx("span",{className:"text-gray-400 group-hover:text-gray-600",children:le?"âˆ’":"+"})]})]}),le&&e.jsxs("div",{className:"space-y-4",children:[x.length<4&&e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-md p-6 text-center hover:border-gray-300 transition-colors cursor-pointer",onClick:()=>m("back"),children:[e.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/svg+xml,application/pdf",onChange:t=>{m("back"),ne(t)},className:"hidden",id:"back-artwork-upload",onClick:t=>t.stopPropagation()}),e.jsxs("label",{htmlFor:"back-artwork-upload",className:"cursor-pointer",children:[e.jsx(he,{className:"mx-auto mb-2 text-gray-300",size:28}),e.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Upload back artwork (up to 4)"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG, SVG or PDF"})]})]}),x.map((t,s)=>e.jsx("div",{className:"border border-gray-200 rounded-md p-3 bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-white border border-gray-200 rounded flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:t.url,alt:"Back Artwork",className:"w-full h-full object-contain"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-medium",children:["Artwork ",s+1]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Click back view to edit"})]})]}),e.jsx("button",{onClick:()=>{d(x.filter((n,l)=>l!==s))},className:"text-xs text-red-600 hover:text-red-700",children:"Remove"})]})},s))]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-5 pb-4",children:[e.jsxs("button",{onClick:()=>Q(!ce),className:"w-full flex items-center justify-between mb-4 group",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Neck Label"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-5 h-5 rounded-full bg-black text-white text-xs flex items-center justify-center",children:c?"1":"0"}),e.jsx("span",{className:"text-gray-400 group-hover:text-gray-600",children:ce?"âˆ’":"+"})]})]}),ce&&e.jsxs("div",{className:"space-y-4",children:[!c&&e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-md p-6 text-center hover:border-gray-300 transition-colors cursor-pointer",onClick:()=>m("neck"),children:[e.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/svg+xml,application/pdf",onChange:t=>{m("neck"),ne(t)},className:"hidden",id:"neck-label-upload",onClick:t=>t.stopPropagation()}),e.jsxs("label",{htmlFor:"neck-label-upload",className:"cursor-pointer",children:[e.jsx(he,{className:"mx-auto mb-2 text-gray-300",size:28}),e.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Upload neck label"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG, SVG or PDF"})]})]}),c&&e.jsx("div",{className:"border border-gray-200 rounded-md p-3 bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-white border border-gray-200 rounded flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:c.url,alt:"Neck Label",className:"w-full h-full object-contain"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium",children:"Neck Label"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Click neck view to edit"})]})]}),e.jsx("button",{onClick:()=>_(null),className:"text-xs text-red-600 hover:text-red-700",children:"Remove"})]})})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-5 pb-4",children:[e.jsx("label",{className:"block text-xs font-medium mb-3",children:"Size"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:je.map(t=>e.jsx("button",{onClick:()=>B(t),className:`px-3 py-2 border rounded-md text-xs font-medium transition-all ${b===t?"border-black bg-black text-white":"border-gray-300 hover:border-gray-400"}`,children:t},t))})]}),e.jsx("div",{className:"border-t border-gray-200 pt-5 pb-4",children:e.jsxs("div",{className:`grid ${z>=2?"grid-cols-4":"grid-cols-3"} gap-3`,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-2",children:"Quantity"}),e.jsx("input",{type:"number",min:"1",value:z,onChange:t=>H(parseInt(t.target.value)||1),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:border-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-2",children:"Unit cost"}),e.jsxs("div",{className:"text-sm font-semibold",children:["$",re.toFixed(2)]})]}),z>=2&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-2",children:"Total cost"}),e.jsxs("div",{className:"text-sm font-semibold",children:["$",(re*z).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-2",children:"Delivery"}),e.jsx("div",{className:"text-xs font-semibold",children:"4 Nov"})]})]})}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{onClick:_e,disabled:!p||!b,className:"w-full py-3 bg-black text-white text-sm font-medium rounded-full hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:F?"Update Cart":"Add to Cart"})})]})})]}),e.jsx(He,{isOpen:G,onClose:()=>O(!1),onSave:De,isUpdating:!!I,currentName:$}),ye&&e.jsx(Oe,{message:ke,type:"success",onClose:()=>te(!1)})]})}function tt(){const{slug:N}=Me(),[f,C]=r.useState(null),[g,E]=r.useState(!0),[k]=r.useState(null);return r.useEffect(()=>{if(!N)return;C({product:{id:"1",title:"Classic Cotton T-Shirt",slug:"classic-tee",description:"Premium 100% cotton t-shirt. Soft, comfortable, and perfect for custom designs.",images:["/assets/blank-tshirt.png"],status:"active",variants:[{id:"1",product_id:"1",color:"White",size:"S",sku:"TEE-WHT-S",base_price:12.99,stock_level:100},{id:"2",product_id:"1",color:"White",size:"M",sku:"TEE-WHT-M",base_price:12.99,stock_level:100},{id:"3",product_id:"1",color:"White",size:"L",sku:"TEE-WHT-L",base_price:12.99,stock_level:100},{id:"4",product_id:"1",color:"Black",size:"S",sku:"TEE-BLK-S",base_price:12.99,stock_level:100},{id:"5",product_id:"1",color:"Black",size:"M",sku:"TEE-BLK-M",base_price:12.99,stock_level:100},{id:"6",product_id:"1",color:"Black",size:"L",sku:"TEE-BLK-L",base_price:12.99,stock_level:100},{id:"7",product_id:"1",color:"Navy",size:"S",sku:"TEE-NAV-S",base_price:12.99,stock_level:100},{id:"8",product_id:"1",color:"Navy",size:"M",sku:"TEE-NAV-M",base_price:12.99,stock_level:100},{id:"9",product_id:"1",color:"Navy",size:"L",sku:"TEE-NAV-L",base_price:12.99,stock_level:100}]},decorationMethods:[{id:"1",name:"dtg",display_name:"Direct to Garment",description:"Full-color digital printing",pricing_rules:{base_price:10,per_location:6,quantity_breaks:[{min:1,max:5,multiplier:1},{min:6,max:11,multiplier:.95},{min:12,max:null,multiplier:.85}]},file_requirements:{min_dpi:300,accepted_formats:["png","jpg","pdf"]}}]}),E(!1),ze.getBySlug(N).then(j=>{j&&j.product&&C(j)}).catch(j=>{console.log("Using mock data, API unavailable:",j.message)})},[N]),g?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading product..."})]})}):k||!f?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-red-600 text-lg",children:k||"Product not found"})})}):e.jsx(Ve,{product:f.product,variants:f.product.variants,decorationMethods:f.decorationMethods})}export{tt as default};
