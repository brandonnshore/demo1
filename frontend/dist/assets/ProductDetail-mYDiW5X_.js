import{c as ee,j as e,S as Se,u as ce,a as Ce,d as de,b as Z,p as Ie}from"./index-C42U2fQf.js";import{r as a,R as De,e as _e,f as Te,L as Ae,h as Le}from"./react-vendor-Byl6S4M9.js";import{S as Fe,L as ze,I as he,T as Ue}from"./canvas-vendor-CLiMLpzp.js";import{X as me}from"./x-CsIMTB0K.js";import"./auth-vendor-BK_4TCcA.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=ee("ArrowDownToLine",[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=ee("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=ee("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=ee("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),xe=a.forwardRef(({tshirtColor:C="white",artworks:p=[],onArtworkPositionChange:D,view:g="front"},P)=>{const[k,w]=a.useState(null),[j,z]=a.useState([]),[_,T]=a.useState(null),[U]=a.useState(null),A=a.useRef([]),f=a.useRef(null),I=a.useRef(null),b=a.useRef({front:null,back:null,neck:null}),X=a.useRef("front"),[M,W]=a.useState({width:550,height:650});a.useImperativeHandle(P,()=>({downloadImage:()=>{if(I.current){const i=I.current.toDataURL({pixelRatio:3,mimeType:"image/png",quality:1}),r=document.createElement("a");r.download="tshirt-design.png",r.href=i,document.body.appendChild(r),r.click(),document.body.removeChild(r)}},getThumbnail:()=>I.current?I.current.toDataURL({pixelRatio:1,mimeType:"image/png",quality:.8}):null,captureImage:()=>I.current?I.current.toDataURL({pixelRatio:2,mimeType:"image/png",quality:.9}):null,getThumbnailBlob:async()=>{if(I.current){const i=I.current.toDataURL({pixelRatio:1,mimeType:"image/png",quality:.8});return await(await fetch(i)).blob()}return null}}));const te=i=>{const r=i.toLowerCase();return r==="navy"?{front:"/assets/navy-front.png",back:"/assets/navy-back.png",neck:"/assets/navy-neck.png"}:r==="black"?{front:"/assets/black-front.png",back:"/assets/black-back.png",neck:"/assets/black-neck.png"}:{front:"/assets/blank-tshirt.png",back:"/assets/back-tshirt.jpeg",neck:"/assets/neck-tshirt.jpeg"}};a.useEffect(()=>{const i=m=>new Promise(c=>{const u=new window.Image;u.src=m,u.crossOrigin="anonymous",u.onload=()=>c(u),u.onerror=()=>c(u)}),r=te(C);Promise.all([i(r.front),i(r.back),i(r.neck)]).then(([m,c,u])=>{b.current.front=m,b.current.back=c,b.current.neck=u;const o=g==="neck"?u:g==="back"?c:m;if(g==="neck"){const x=o.width/o.height,F=1600,S=950;let h=F,v=h/x;v<S&&(v=S,h=v*x),W({width:h,height:v})}else{const x=o.width/o.height,F=600,S=700;let h=F,v=F/x;if(v>S&&(v=S,h=S*x),g==="back"){const B=C?.toLowerCase()||"";B==="white"||B===""?(h=h*1.1,v=v*1.1):B==="navy"&&(h=h*1.02,v=v*1.02)}W({width:h,height:v})}w(o)})},[C,g]),a.useEffect(()=>{if(g===X.current)return;const i=g==="neck"?b.current.neck:g==="back"?b.current.back:b.current.front;if(i){if(g==="neck"){const r=i.width/i.height,m=1600,c=950;let u=m,o=u/r;o<c&&(o=c,u=o*r),W({width:u,height:o})}else{const c=i.width/i.height;let u=600,o=600/c;if(o>700&&(o=700,u=700*c),g==="back"){const x=C?.toLowerCase()||"";x==="white"||x===""?(u=u*1.1,o=o*1.1):x==="navy"&&(u=u*1.02,o=o*1.02)}W({width:u,height:o})}w(i),X.current=g}},[g]);const $=a.useRef(new Map);a.useEffect(()=>{if(p.length===0){z([]),T(null),A.current=[];return}(async()=>{const r=p.map(m=>{const c=$.current.get(m.url);return c?Promise.resolve(c):new Promise((u,o)=>{const x=new window.Image;x.src=m.url,x.crossOrigin="anonymous",x.onload=()=>{$.current.set(m.url,x),u(x)},x.onerror=o})});try{const m=await Promise.all(r);z(m),A.current=new Array(m.length).fill(null);const c=p[p.length-1];c&&!c.position&&T(`artwork-${p.length-1}`)}catch(m){console.error("Failed to load artworks:",m)}})()},[p]),a.useEffect(()=>{if(_&&f.current){const i=parseInt(_.split("-")[1]),r=A.current[i];r&&(f.current.nodes([r]),f.current.getLayer()?.batchDraw())}},[_]);const O=i=>{const r=A.current[i];r&&D&&D({x:r.x(),y:r.y(),scaleX:r.scaleX(),scaleY:r.scaleY(),rotation:r.rotation()},i)},y=i=>{const r=i.target===i.target.getStage(),m=i.target.image===k;(r||m)&&T(null)};return U?e.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-500 mb-2",children:U}),e.jsx("p",{className:"text-xs text-gray-400",children:"Using fallback preview"})]})}):e.jsxs("div",{className:"relative w-full h-full flex items-center justify-center overflow-hidden",children:[j.length>0&&_&&e.jsx("div",{className:"absolute top-3 left-1/2 -translate-x-1/2 bg-black/80 text-white text-xs px-4 py-2 rounded-full z-10",children:"Drag to move â€¢ Corners to resize â€¢ Rotate to spin â€¢ Click away to finish"}),j.length>0&&!_&&e.jsx("div",{className:"absolute top-3 left-1/2 -translate-x-1/2 bg-gray-800/60 text-white text-xs px-4 py-2 rounded-full z-10",children:"Click artwork to edit position and size"}),e.jsx(Fe,{ref:I,width:M.width,height:M.height,onMouseDown:y,onTouchStart:y,children:e.jsxs(ze,{children:[k&&e.jsx(he,{image:k,x:0,y:0,width:M.width,height:M.height,onClick:()=>T(null),onTap:()=>T(null),...g==="neck"?{crop:{x:0,y:0,width:k.width,height:k.height}}:{}}),j.map((i,r)=>{const m=p[r];if(!m)return null;const c=250,u=250,o=i.width/i.height;let x=c,F=c/o;return F>u&&(F=u,x=u*o),e.jsxs(De.Fragment,{children:[e.jsx(he,{ref:S=>{A.current[r]=S},image:i,x:m.position?.x??(g==="neck"?750:200+r*20),y:m.position?.y??(g==="neck"?500:250+r*20),width:x,height:F,scaleX:m.position?.scaleX??1,scaleY:m.position?.scaleY??1,rotation:m.position?.rotation??0,draggable:!0,dragBoundFunc:S=>{let h;g==="neck"?h={minX:520,maxX:1080,minY:560,maxY:710}:h={minX:80,maxX:470,minY:100,maxY:550};const v=A.current[r],B=v?.width()||0,G=v?.height()||0,se=v?.scaleX()||1,V=v?.scaleY()||1,q=B*se,Y=G*V;let H=S.x,R=S.y;return H<h.minX&&(H=h.minX),H+q>h.maxX&&(H=h.maxX-q),R<h.minY&&(R=h.minY),R+Y>h.maxY&&(R=h.maxY-Y),{x:H,y:R}},onClick:()=>T(`artwork-${r}`),onTap:()=>T(`artwork-${r}`),onDragEnd:()=>O(r),onTransformEnd:()=>O(r)}),_===`artwork-${r}`&&e.jsx(Ue,{ref:f,keepRatio:!0,boundBoxFunc:(S,h)=>h.width<50||h.height<50||h.width>400||h.height>400?S:h,enabledAnchors:["top-left","top-right","bottom-left","bottom-right"],rotateEnabled:!0,borderStroke:"#000000",borderStrokeWidth:2,anchorSize:12,anchorStroke:"#000000",anchorFill:"#ffffff",anchorCornerRadius:6})]},`artwork-${r}`)})]})})]})});xe.displayName="TShirtCanvas";function Re({isOpen:C,onClose:p,onSave:D,isUpdating:g=!1,currentName:P=""}){const[k,w]=a.useState(P),[j,z]=a.useState(!1),[_,T]=a.useState(!1),[U,A]=a.useState(""),f=async()=>{if(!k.trim()){A("Please enter a name for your design");return}z(!0),A("");try{await D(k.trim()),T(!0),setTimeout(()=>{p(),T(!1),w("")},1500)}catch(b){A(b.message||"Failed to save design"),z(!1)}},I=()=>{j||(p(),w(""),A(""),T(!1))};return C?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold",children:g?"Update Design":"Save Design"}),!j&&e.jsx("button",{onClick:I,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(me,{size:24})})]}),e.jsx("div",{className:"p-6",children:_?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:e.jsx(ge,{size:32,className:"text-green-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:g?"Design Updated!":"Design Saved!"}),e.jsxs("p",{className:"text-gray-600",children:['Your design "',k,'" has been saved to your dashboard']})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"design-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Design Name"}),e.jsx("input",{id:"design-name",type:"text",value:k,onChange:b=>w(b.target.value),onKeyPress:b=>b.key==="Enter"&&f(),placeholder:"e.g., Summer Collection Tee",className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",disabled:j,autoFocus:!0}),U&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:U})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["ðŸ’¡ ",e.jsx("strong",{children:"Tip:"})," Give your design a memorable name so you can easily find it later!"]})})]})}),!_&&e.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200",children:[e.jsx("button",{onClick:I,disabled:j,className:"flex-1 px-4 py-3 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),e.jsx("button",{onClick:f,disabled:j||!k.trim(),className:"flex-1 px-4 py-3 bg-black text-white rounded-md hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:j?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):g?"Update Design":"Save Design"})]})]})}):null}function Me({message:C,type:p="success",onClose:D,duration:g=3e3}){a.useEffect(()=>{const w=setTimeout(()=>{D()},g);return()=>clearTimeout(w)},[D,g]);const P={success:e.jsx(ge,{size:20}),error:e.jsx(me,{size:20}),info:e.jsx(Se,{size:20})},k={success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500"};return e.jsxs("div",{className:"fixed bottom-8 right-8 z-50 animate-slideUp",role:"alert",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden max-w-md",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4",children:[e.jsx("div",{className:`${k[p]} text-white p-2 rounded-xl flex-shrink-0`,children:P[p]}),e.jsx("p",{className:"text-gray-900 font-medium flex-1",children:C}),e.jsx("button",{onClick:D,className:"text-gray-400 hover:text-gray-600 transition-colors p-1","aria-label":"Close",children:e.jsx(me,{size:18})})]}),e.jsx("div",{className:"h-1 bg-gray-100",children:e.jsx("div",{className:`h-full ${k[p]} transition-all`,style:{animation:`shrink ${g}ms linear`,transformOrigin:"left"}})})]}),e.jsx("style",{children:`
        @keyframes slideUp {
          from {
            transform: translateY(100px);
            opacity: 0;
          }
          to {
            transform: translateY(0);
            opacity: 1;
          }
        }

        @keyframes shrink {
          from {
            width: 100%;
          }
          to {
            width: 0%;
          }
        }
      `})]})}function $e({product:C,variants:p}){const D=_e(),g=ce(t=>t.addItem),P=ce(t=>t.updateItem),k=ce(t=>t.getItem),w=a.useRef(null),{isAuthenticated:j}=Ce(),[z]=Te(),[_,T]=a.useState(null),[U,A]=a.useState(null),[f,I]=a.useState(""),[b,X]=a.useState(""),[M,W]=a.useState(null),[te]=a.useState(""),[$,O]=a.useState(1),[y,i]=a.useState("front"),[r,m]=a.useState([]),[c,u]=a.useState(null),[o,x]=a.useState([]),F=()=>y==="front"?r:y==="neck"?c?[c]:[]:y==="back"?o:[],S=F()[0]||null,[h,v]=a.useState(!1),[B,G]=a.useState(""),[se,V]=a.useState(!1),[q,Y]=a.useState(""),R=(()=>{let t=12.98;const s=r.length>0,n=o.length>0,d=c!==null;return[s,n].filter(Boolean).length===2&&(t+=5),d&&(t+=1),t})(),re=[...new Set(p.map(t=>t.color))],pe=re.includes("Navy")?re:[...re,"Navy"],fe=[...new Set(p.map(t=>t.size))].sort((t,s)=>{const n=["S","M","L","XL","2XL","3XL"];return n.indexOf(t)-n.indexOf(s)});a.useEffect(()=>{if(f&&b){const t=p.find(s=>s.color===f&&s.size===b);W(t||null)}},[f,b,p]),a.useEffect(()=>{const t=z.get("designId");t&&j&&be(t)},[z,j]),a.useEffect(()=>{const t=z.get("editCartItem");if(t){const s=k(t);s&&(A(t),I(s.variantColor),X(s.variantSize),O(s.quantity),s.customization&&(s.customization.frontArtworks&&m(s.customization.frontArtworks),s.customization.backArtworks&&x(s.customization.backArtworks),s.customization.neckArtwork&&u(s.customization.neckArtwork)))}},[z,k]);const be=async t=>{try{const s=await de.getById(t);if(T(s.id),s.design_data&&(s.design_data.front&&m(s.design_data.front.map(n=>({url:"",position:n}))),s.design_data.back&&x(s.design_data.back.map(n=>({url:"",position:n}))),s.design_data.neck&&s.design_data.neck.length>0&&u({url:"",position:s.design_data.neck[0]})),s.variant_id){const n=p.find(d=>d.id===s.variant_id);n&&(I(n.color),X(n.size))}}catch(s){console.error("Error loading design:",s),alert("Failed to load design")}},ae=async t=>{const s=t.target.files?.[0];if(s)try{if(s.type==="image/png"||s.type==="image/jpeg"){const l=await s.arrayBuffer(),N=await ye(l,s.type);if(N&&N<300&&!window.confirm(`Warning: This image has a DPI of ${N}, which is below the required 300 DPI for high-quality DTG printing. The print quality may be poor.

Do you want to upload it anyway?`)){t.target.value="";return}}const d={url:URL.createObjectURL(s),position:null,assetId:void 0};if(y==="front")if(r.length<4){const l=r.length;m([...r,d]),Z.uploadFile(s).then(N=>{m(E=>{const L=[...E];return L[l]&&(L[l]={url:`http://localhost:3001${N.file_url}`,position:L[l].position,assetId:N.id}),L})}).catch(N=>console.error("Upload failed:",N))}else{alert("Maximum 4 artworks allowed on front view"),t.target.value="";return}else if(y==="neck"){if(c){alert("Only 1 artwork allowed on neck view. Remove existing artwork first."),t.target.value="";return}u(d),Z.uploadFile(s).then(l=>{u(N=>({url:`http://localhost:3001${l.file_url}`,position:N?.position||null,assetId:l.id}))}).catch(l=>console.error("Upload failed:",l))}else if(y==="back")if(o.length<4){const l=o.length;x([...o,d]),Z.uploadFile(s).then(N=>{x(E=>{const L=[...E];return L[l]&&(L[l]={url:`http://localhost:3001${N.file_url}`,position:L[l].position,assetId:N.id}),L})}).catch(N=>console.error("Upload failed:",N))}else{alert("Maximum 4 artworks allowed on back view"),t.target.value="";return}t.target.value=""}catch(n){console.error("File upload failed:",n),alert("Failed to upload file"),t.target.value=""}},ye=async(t,s)=>{const n=new DataView(t);try{if(s==="image/png"){let d=8;for(;d<n.byteLength;){const l=n.getUint32(d);if(String.fromCharCode(n.getUint8(d+4),n.getUint8(d+5),n.getUint8(d+6),n.getUint8(d+7))==="pHYs"){const E=n.getUint32(d+8);if(n.getUint8(d+16)===1)return Math.round(E/39.3701)}d+=l+12}}else if(s==="image/jpeg"){let d=2;for(;d<n.byteLength;){if(n.getUint16(d)===65504){const E=n.getUint8(d+11),L=n.getUint16(d+12);if(E===1)return L;if(E===2)return Math.round(L*2.54);break}const N=n.getUint16(d+2);d+=N+2}}}catch(d){console.error("Error reading DPI:",d)}return null},ke=()=>{w.current&&w.current.downloadImage&&w.current.downloadImage()},we=()=>{if(!j){D("/login",{state:{from:window.location.pathname+window.location.search}});return}v(!0)},je=async t=>{try{const s={front:r.map(l=>l.position),back:o.map(l=>l.position),neck:c?[c.position]:[]},n=[...r.filter(l=>l.assetId).map(l=>l.assetId),...o.filter(l=>l.assetId).map(l=>l.assetId),...c?.assetId?[c.assetId]:[]];let d="";if(w.current&&w.current.getThumbnailBlob)try{const l=await w.current.getThumbnailBlob();if(l){const N=new File([l],"thumbnail.png",{type:"image/png"});d=(await Z.uploadFile(N)).file_url}}catch(l){console.error("Failed to capture thumbnail:",l)}if(_)await de.update(_,{name:t,variantId:M?.id,designData:s,artworkIds:n,thumbnailUrl:d}),G(t);else{const l=await de.save({name:t,productId:C.id,variantId:M?.id,designData:s,artworkIds:n,thumbnailUrl:d});T(l.id),G(t)}}catch(s){throw console.error("Error saving design:",s),s}},ve=()=>{if(!f||!b){Y("Please select a color and size"),V(!0);return}let t;try{w.current&&w.current.captureImage&&(t=w.current.captureImage())}catch(d){console.error("Error capturing mockup:",d)}const s=M||{id:`temp-${f}-${b}`},n={id:U||`${s.id}-${Date.now()}`,variantId:s.id,productTitle:C.title,variantColor:f,variantSize:b,quantity:$,unitPrice:R,customization:{method:te||"screen_print",frontArtworks:r,backArtworks:o,neckArtwork:c},mockupUrl:t};U?(P(U,n),Y("Cart item updated successfully!")):(g(n),Y("Added to cart successfully!")),V(!0),setTimeout(()=>{D("/cart")},1500)},[ne,Ne]=a.useState(!0),[ie,K]=a.useState(!1),[oe,J]=a.useState(!1),[le,Q]=a.useState(!1);return a.useEffect(()=>{y==="neck"?(Q(!0),K(!1),J(!1)):y==="front"?(K(!0),J(!1),Q(!1)):y==="back"&&(J(!0),K(!1),Q(!1))},[y]),e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("div",{className:"border-b border-gray-200 bg-white",children:e.jsxs("div",{className:"relative px-6 py-1.5 flex items-center",children:[e.jsx("h1",{className:"text-sm font-bold",children:C.title}),e.jsx(Ae,{to:"/",className:"absolute left-1/2 -translate-x-1/2 text-lg font-bold hover:text-gray-600 transition-colors",children:"Raspberry"}),e.jsxs("div",{className:"ml-auto flex items-center gap-4",children:[e.jsx("button",{onClick:ke,disabled:!S,title:"Download Design",className:`p-2 rounded-md transition-colors ${S?"text-gray-700 hover:bg-gray-100":"text-gray-300 cursor-not-allowed"}`,children:e.jsx(Ee,{size:18})}),e.jsxs("button",{onClick:we,className:"flex items-center gap-1.5 px-4 py-1.5 text-xs font-medium rounded-md transition-colors bg-black text-white hover:bg-gray-800",children:[e.jsx(Pe,{size:14}),_?"Update Design":"Save Design"]}),e.jsxs("div",{className:"text-sm font-normal",children:["from $",12.98.toFixed(2)]})]})]})}),e.jsxs("div",{className:"grid lg:grid-cols-[1fr_400px] h-[calc(100vh-40px)]",children:[e.jsxs("div",{className:"bg-white flex flex-col relative h-full overflow-hidden",children:[e.jsx("div",{className:`absolute inset-0 flex items-center justify-center ${y==="neck"?"pt-0 pb-0 px-0":"pt-2 pb-16 px-6"}`,children:e.jsx(xe,{ref:w,tshirtColor:f,artworks:F(),onArtworkPositionChange:(t,s)=>{if(y==="front"){const n=[...r];n[s]={...n[s],position:t},m(n)}else if(y==="neck"&&c)u({...c,position:t});else if(y==="back"){const n=[...o];n[s]={...n[s],position:t},x(n)}},view:y})}),e.jsxs("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 bg-white rounded-full shadow-lg px-2 py-2 flex gap-1",children:[e.jsx("button",{onClick:()=>i("front"),className:`px-5 py-2 rounded-full text-sm font-medium transition-colors ${y==="front"?"bg-black text-white":"text-gray-700 hover:bg-gray-100"}`,children:"Front"}),e.jsx("button",{onClick:()=>i("back"),className:`px-5 py-2 rounded-full text-sm font-medium transition-colors ${y==="back"?"bg-black text-white":"text-gray-700 hover:bg-gray-100"}`,children:"Back"}),e.jsx("button",{onClick:()=>i("neck"),className:`px-5 py-2 rounded-full text-sm font-medium transition-colors ${y==="neck"?"bg-black text-white":"text-gray-700 hover:bg-gray-100"}`,children:"Neck"})]})]}),e.jsx("div",{className:"bg-white border-l border-gray-200 overflow-y-auto",children:e.jsxs("div",{className:"p-5 space-y-1",children:[e.jsxs("div",{className:"border-t border-gray-200 pt-5 pb-4",children:[e.jsxs("button",{onClick:()=>Ne(!ne),className:"w-full flex items-center justify-between mb-4 group",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Garment Color"}),e.jsxs("div",{className:"flex items-center gap-3",children:[f&&e.jsx("span",{className:"w-5 h-5 rounded-full border border-gray-300",style:{backgroundColor:f==="White"?"#FFFFFF":f==="Black"?"#000000":f.toLowerCase()}}),e.jsx("span",{className:"text-gray-400 group-hover:text-gray-600",children:ne?"âˆ’":"+"})]})]}),ne&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wider mb-3",children:"Pre-developed"}),e.jsx("div",{className:"grid grid-cols-2 gap-2.5",children:pe.map(t=>e.jsxs("button",{onClick:()=>I(t),className:`flex items-center gap-2.5 p-2.5 rounded-md border transition-all ${f===t?"border-gray-900 bg-gray-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[e.jsx("div",{className:"w-8 h-8 rounded-full border border-gray-300 flex-shrink-0",style:{backgroundColor:t==="White"?"#FFFFFF":t==="Black"?"#000000":t==="Navy"?"#001f3f":t.toLowerCase()}}),e.jsx("span",{className:"text-xs font-medium",children:t})]},t))})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-5 pb-4",children:[e.jsxs("button",{onClick:()=>K(!ie),className:"w-full flex items-center justify-between mb-4 group",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Front Artwork"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-5 h-5 rounded-full bg-black text-white text-xs flex items-center justify-center",children:r.length}),e.jsx("span",{className:"text-gray-400 group-hover:text-gray-600",children:ie?"âˆ’":"+"})]})]}),ie&&e.jsxs("div",{className:"space-y-4",children:[r.length<4&&e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-md p-6 text-center hover:border-gray-300 transition-colors cursor-pointer",onClick:()=>i("front"),children:[e.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/svg+xml,application/pdf",onChange:t=>{i("front"),ae(t)},className:"hidden",id:"front-artwork-upload",onClick:t=>t.stopPropagation()}),e.jsxs("label",{htmlFor:"front-artwork-upload",className:"cursor-pointer",children:[e.jsx(ue,{className:"mx-auto mb-2 text-gray-300",size:28}),e.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Upload front artwork (up to 4)"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG, SVG or PDF"})]})]}),r.map((t,s)=>e.jsx("div",{className:"border border-gray-200 rounded-md p-3 bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-white border border-gray-200 rounded flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:t.url,alt:"Front Artwork",className:"w-full h-full object-contain"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-medium",children:["Artwork ",s+1]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Click front view to edit"})]})]}),e.jsx("button",{onClick:()=>{m(r.filter((n,d)=>d!==s))},className:"text-xs text-red-600 hover:text-red-700",children:"Remove"})]})},s))]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-5 pb-4",children:[e.jsxs("button",{onClick:()=>J(!oe),className:"w-full flex items-center justify-between mb-4 group",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Back Artwork"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-5 h-5 rounded-full bg-black text-white text-xs flex items-center justify-center",children:o.length}),e.jsx("span",{className:"text-gray-400 group-hover:text-gray-600",children:oe?"âˆ’":"+"})]})]}),oe&&e.jsxs("div",{className:"space-y-4",children:[o.length<4&&e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-md p-6 text-center hover:border-gray-300 transition-colors cursor-pointer",onClick:()=>i("back"),children:[e.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/svg+xml,application/pdf",onChange:t=>{i("back"),ae(t)},className:"hidden",id:"back-artwork-upload",onClick:t=>t.stopPropagation()}),e.jsxs("label",{htmlFor:"back-artwork-upload",className:"cursor-pointer",children:[e.jsx(ue,{className:"mx-auto mb-2 text-gray-300",size:28}),e.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Upload back artwork (up to 4)"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG, SVG or PDF"})]})]}),o.map((t,s)=>e.jsx("div",{className:"border border-gray-200 rounded-md p-3 bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-white border border-gray-200 rounded flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:t.url,alt:"Back Artwork",className:"w-full h-full object-contain"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-medium",children:["Artwork ",s+1]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Click back view to edit"})]})]}),e.jsx("button",{onClick:()=>{x(o.filter((n,d)=>d!==s))},className:"text-xs text-red-600 hover:text-red-700",children:"Remove"})]})},s))]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-5 pb-4",children:[e.jsxs("button",{onClick:()=>Q(!le),className:"w-full flex items-center justify-between mb-4 group",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Neck Label"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-5 h-5 rounded-full bg-black text-white text-xs flex items-center justify-center",children:c?"1":"0"}),e.jsx("span",{className:"text-gray-400 group-hover:text-gray-600",children:le?"âˆ’":"+"})]})]}),le&&e.jsxs("div",{className:"space-y-4",children:[!c&&e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-md p-6 text-center hover:border-gray-300 transition-colors cursor-pointer",onClick:()=>i("neck"),children:[e.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/svg+xml,application/pdf",onChange:t=>{i("neck"),ae(t)},className:"hidden",id:"neck-label-upload",onClick:t=>t.stopPropagation()}),e.jsxs("label",{htmlFor:"neck-label-upload",className:"cursor-pointer",children:[e.jsx(ue,{className:"mx-auto mb-2 text-gray-300",size:28}),e.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Upload neck label"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG, SVG or PDF"})]})]}),c&&e.jsx("div",{className:"border border-gray-200 rounded-md p-3 bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-white border border-gray-200 rounded flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:c.url,alt:"Neck Label",className:"w-full h-full object-contain"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium",children:"Neck Label"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Click neck view to edit"})]})]}),e.jsx("button",{onClick:()=>u(null),className:"text-xs text-red-600 hover:text-red-700",children:"Remove"})]})})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-5 pb-4",children:[e.jsx("label",{className:"block text-xs font-medium mb-3",children:"Size"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:fe.map(t=>e.jsx("button",{onClick:()=>X(t),className:`px-3 py-2 border rounded-md text-xs font-medium transition-all ${b===t?"border-black bg-black text-white":"border-gray-300 hover:border-gray-400"}`,children:t},t))})]}),e.jsx("div",{className:"border-t border-gray-200 pt-5 pb-4",children:e.jsxs("div",{className:`grid ${$>=2?"grid-cols-4":"grid-cols-3"} gap-3`,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-2",children:"Quantity"}),e.jsx("input",{type:"number",min:"1",value:$,onChange:t=>O(parseInt(t.target.value)||1),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:border-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-2",children:"Unit cost"}),e.jsxs("div",{className:"text-sm font-semibold",children:["$",R.toFixed(2)]})]}),$>=2&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-2",children:"Total cost"}),e.jsxs("div",{className:"text-sm font-semibold",children:["$",(R*$).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-2",children:"Delivery"}),e.jsx("div",{className:"text-xs font-semibold",children:"4 Nov"})]})]})}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{onClick:ve,disabled:!f||!b,className:"w-full py-3 bg-black text-white text-sm font-medium rounded-full hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:U?"Update Cart":"Add to Cart"})})]})})]}),e.jsx(Re,{isOpen:h,onClose:()=>v(!1),onSave:je,isUpdating:!!_,currentName:B}),se&&e.jsx(Me,{message:q,type:"success",onClose:()=>V(!1)})]})}function Ve(){const{slug:C}=Le(),[p,D]=a.useState(null),[g,P]=a.useState(!0),[k]=a.useState(null);return a.useEffect(()=>{if(!C)return;D({product:{id:"1",title:"Classic Cotton T-Shirt",slug:"classic-tee",description:"Premium 100% cotton t-shirt. Soft, comfortable, and perfect for custom designs.",images:["/assets/blank-tshirt.png"],status:"active",variants:[{id:"1",product_id:"1",color:"White",size:"S",sku:"TEE-WHT-S",base_price:12.99,stock_level:100},{id:"2",product_id:"1",color:"White",size:"M",sku:"TEE-WHT-M",base_price:12.99,stock_level:100},{id:"3",product_id:"1",color:"White",size:"L",sku:"TEE-WHT-L",base_price:12.99,stock_level:100},{id:"4",product_id:"1",color:"Black",size:"S",sku:"TEE-BLK-S",base_price:12.99,stock_level:100},{id:"5",product_id:"1",color:"Black",size:"M",sku:"TEE-BLK-M",base_price:12.99,stock_level:100},{id:"6",product_id:"1",color:"Black",size:"L",sku:"TEE-BLK-L",base_price:12.99,stock_level:100},{id:"7",product_id:"1",color:"Navy",size:"S",sku:"TEE-NAV-S",base_price:12.99,stock_level:100},{id:"8",product_id:"1",color:"Navy",size:"M",sku:"TEE-NAV-M",base_price:12.99,stock_level:100},{id:"9",product_id:"1",color:"Navy",size:"L",sku:"TEE-NAV-L",base_price:12.99,stock_level:100}]},decorationMethods:[{id:"1",name:"dtg",display_name:"Direct to Garment",description:"Full-color digital printing",pricing_rules:{base_price:10,per_location:6,quantity_breaks:[{min:1,max:5,multiplier:1},{min:6,max:11,multiplier:.95},{min:12,max:null,multiplier:.85}]},file_requirements:{min_dpi:300,accepted_formats:["png","jpg","pdf"]}}]}),P(!1),Ie.getBySlug(C).then(j=>{j&&j.product&&D(j)}).catch(j=>{console.log("Using mock data, API unavailable:",j.message)})},[C]),g?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading product..."})]})}):k||!p?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-red-600 text-lg",children:k||"Product not found"})})}):e.jsx($e,{product:p.product,variants:p.product.variants,decorationMethods:p.decorationMethods})}export{Ve as default};
